(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[122],{73171:(e,t,n)=>{"use strict";t.qw={name:"AwsIcon",height:512,width:640,svgPath:"M180.41 203.01c-.72 22.65 10.6 32.68 10.88 39.05a8.164 8.164 0 0 1-4.1 6.27l-12.8 8.96a10.66 10.66 0 0 1-5.63 1.92c-.43-.02-8.19 1.83-20.48-25.61a78.608 78.608 0 0 1-62.61 29.45c-16.28.89-60.4-9.24-58.13-56.21-1.59-38.28 34.06-62.06 70.93-60.05 7.1.02 21.6.37 46.99 6.27v-15.62c2.69-26.46-14.7-46.99-44.81-43.91-2.4.01-19.4-.5-45.84 10.11-7.36 3.38-8.3 2.82-10.75 2.82-7.41 0-4.36-21.48-2.94-24.2 5.21-6.4 35.86-18.35 65.94-18.18a76.857 76.857 0 0 1 55.69 17.28 70.285 70.285 0 0 1 17.67 52.36l-.01 69.29zM93.99 235.4c32.43-.47 46.16-19.97 49.29-30.47 2.46-10.05 2.05-16.41 2.05-27.4-9.67-2.32-23.59-4.85-39.56-4.87-15.15-1.14-42.82 5.63-41.74 32.26-1.24 16.79 11.12 31.4 29.96 30.48zm170.92 23.05c-7.86.72-11.52-4.86-12.68-10.37l-49.8-164.65c-.97-2.78-1.61-5.65-1.92-8.58a4.61 4.61 0 0 1 3.86-5.25c.24-.04-2.13 0 22.25 0 8.78-.88 11.64 6.03 12.55 10.37l35.72 140.83 33.16-140.83c.53-3.22 2.94-11.07 12.8-10.24h17.16c2.17-.18 11.11-.5 12.68 10.37l33.42 142.63L420.98 80.1c.48-2.18 2.72-11.37 12.68-10.37h19.72c.85-.13 6.15-.81 5.25 8.58-.43 1.85 3.41-10.66-52.75 169.9-1.15 5.51-4.82 11.09-12.68 10.37h-18.69c-10.94 1.15-12.51-9.66-12.68-10.75L328.67 110.7l-32.78 136.99c-.16 1.09-1.73 11.9-12.68 10.75h-18.3zm273.48 5.63c-5.88.01-33.92-.3-57.36-12.29a12.802 12.802 0 0 1-7.81-11.91v-10.75c0-8.45 6.2-6.9 8.83-5.89 10.04 4.06 16.48 7.14 28.81 9.6 36.65 7.53 52.77-2.3 56.72-4.48 13.15-7.81 14.19-25.68 5.25-34.95-10.48-8.79-15.48-9.12-53.13-21-4.64-1.29-43.7-13.61-43.79-52.36-.61-28.24 25.05-56.18 69.52-55.95 12.67-.01 46.43 4.13 55.57 15.62 1.35 2.09 2.02 4.55 1.92 7.04v10.11c0 4.44-1.62 6.66-4.87 6.66-7.71-.86-21.39-11.17-49.16-10.75-6.89-.36-39.89.91-38.41 24.97-.43 18.96 26.61 26.07 29.7 26.89 36.46 10.97 48.65 12.79 63.12 29.58 17.14 22.25 7.9 48.3 4.35 55.44-19.08 37.49-68.42 34.44-69.26 34.42zm40.2 104.86c-70.03 51.72-171.69 79.25-258.49 79.25A469.127 469.127 0 0 1 2.83 327.46c-6.53-5.89-.77-13.96 7.17-9.47a637.37 637.37 0 0 0 316.88 84.12 630.22 630.22 0 0 0 241.59-49.55c11.78-5 21.77 7.8 10.12 16.38zm29.19-33.29c-8.96-11.52-59.28-5.38-81.81-2.69-6.79.77-7.94-5.12-1.79-9.47 40.07-28.17 105.88-20.1 113.44-10.63 7.55 9.47-2.05 75.41-39.56 106.91-5.76 4.87-11.27 2.3-8.71-4.1 8.44-21.25 27.39-68.49 18.43-80.02z",yOffset:0,xOffset:0},t.er=n(35183).createIcon(t.qw),t.ZP=t.er},35451:(e,t,n)=>{"use strict";t.GR={name:"CheckCircleIcon",height:512,width:512,svgPath:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z",yOffset:0,xOffset:0},t.rE=n(35183).createIcon(t.GR),t.ZP=t.rE},10141:(e,t,n)=>{"use strict";t.Fg={name:"CopyIcon",height:512,width:448,svgPath:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z",yOffset:0,xOffset:0},t.TI=n(35183).createIcon(t.Fg),t.ZP=t.TI},8755:(e,t,n)=>{"use strict";t._t={name:"FilterIcon",height:512,width:512,svgPath:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z",yOffset:0,xOffset:0},t.k1=n(35183).createIcon(t._t),t.ZP=t.k1},34046:(e,t,n)=>{"use strict";t.MU={name:"HelpIcon",height:1024,width:1024,svgPath:"M521.3,576 C627.5,576 713.7,502 713.7,413.7 C713.7,325.4 627.6,253.6 521.3,253.6 C366,253.6 334.5,337.7 329.2,407.2 C329.2,414.3 335.2,416 343.5,416 L445,416 C450.5,416 458,415.5 460.8,406.5 C460.8,362.6 582.9,357.1 582.9,413.6 C582.9,441.9 556.2,470.9 521.3,473 C486.4,475.1 447.3,479.8 447.3,521.7 L447.3,553.8 C447.3,570.8 456.1,576 472,576 C487.9,576 521.3,576 521.3,576 M575.3,751.3 L575.3,655.3 C575.313862,651.055109 573.620137,646.982962 570.6,644 C567.638831,640.947672 563.552355,639.247987 559.3,639.29884 L463.3,639.29884 C459.055109,639.286138 454.982962,640.979863 452,644 C448.947672,646.961169 447.247987,651.047645 447.29884,655.3 L447.29884,751.3 C447.286138,755.544891 448.979863,759.617038 452,762.6 C454.961169,765.652328 459.047645,767.352013 463.3,767.30116 L559.3,767.30116 C563.544891,767.313862 567.617038,765.620137 570.6,762.6 C573.659349,759.643612 575.360354,755.553963 575.3,751.3 M512,896 C300.2,896 128,723.9 128,512 C128,300.3 300.2,128 512,128 C723.8,128 896,300.2 896,512 C896,723.8 723.7,896 512,896 M512.1,0 C229.7,0 0,229.8 0,512 C0,794.2 229.8,1024 512.1,1024 C794.4,1024 1024,794.3 1024,512 C1024,229.7 794.4,0 512.1,0",yOffset:0,xOffset:0},t.by=n(35183).createIcon(t.MU),t.ZP=t.by},41942:(e,t,n)=>{"use strict";t.yR={name:"PendingIcon",height:1024,width:1024,svgPath:"M512.1,895.9 C300.3,895.9 128.1,723.8 128.1,511.9 C128.1,300.2 300.3,127.9 512.1,127.9 C723.8,127.9 896,300.2 896.1,511.9 C896.1,723.7 723.8,895.9 512.1,895.9 M512.1,0 C229.7,0 0,229.7 0,512 C0,794.3 229.7,1024 512.1,1024 C794.3,1024 1024,794.3 1024,512 C1024,229.7 794.3,0 512.1,0 M704,288 L704,272 C704,263.2 696.8,256 688,256 L336,256 C327.2,256 320,263.2 320,272 L320,288 C320,447 480,449 480,512 C480,575 320,575 320,736 L320,752 C320,760.8 327.2,768 336,768 L688,768 C696.8,768 704,760.8 704,752 L704,736 C704,576 544,577 544,512 C544,447 704,448 704,288 M603.9,704 L420.3,704 C417.3,704 418.2,695 419.4,686.8 C426.8,634.5 480.1,617.4 495.2,612.3 C512.3,606.6 512.3,606.6 528.9,612.3 C544,617.6 597.6,635.4 604.8,687 C605.9,695.2 606.9,704 603.9,704",yOffset:0,xOffset:0},t.tu=n(35183).createIcon(t.yR),t.ZP=t.tu},56176:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,n,a){var r=n.prototype,i=r.format;a.en.formats=e,r.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var n=this.$locale().formats,a=function(t,n){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,a,r){var i=r&&r.toUpperCase();return a||n[r]||e[r]||n[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))}(t,void 0===n?{}:n);return i.call(this,a)}}}()},82122:(e,t,n)=>{"use strict";n.d(t,{L:()=>X});var a=n(70655),r=n(48121),i=n.n(r),o=n(5977),l=n(13006),s=n(56176),c=n.n(s),u=n(82420),d=n.n(u),m=n(54290),f=n(68908),v=n(73171),p=n(84564),_=n(99229),g=n(42603),E=n(23141),h=n(9995),b=n(78261),T=n(52648),x=function(){var e=(0,l.useTranslation)().t;return i().createElement(m.TextContent,null,i().createElement(m.Text,{component:m.TextVariants.h3},e("common.instance_information")),i().createElement(m.TextList,{component:m.TextListVariants.dl},i().createElement(m.Grid,{sm:6,lg:12,hasGutter:!0},i().createElement(m.GridItem,null,i().createElement(m.TextListItem,{component:m.TextListItemVariants.dt},e("common.duration")),i().createElement(m.TextListItem,{component:m.TextListItemVariants.dd},"48 hours")),i().createElement(m.GridItem,null,i().createElement(m.TextListItem,{component:m.TextListItemVariants.dt},e("common.ingress_egress")),i().createElement(m.TextListItem,{component:m.TextListItemVariants.dd},"up to 2 MB/second each")),i().createElement(m.GridItem,null,i().createElement(m.TextListItem,{component:m.TextListItemVariants.dt},e("common.storage")),i().createElement(m.TextListItem,{component:m.TextListItemVariants.dd},"up to 60 GB")),i().createElement(m.GridItem,null,i().createElement(m.TextListItem,{component:m.TextListItemVariants.dt},e("common.partitions")),i().createElement(m.TextListItem,{component:m.TextListItemVariants.dd},"up to 100")),i().createElement(m.GridItem,null,i().createElement(m.TextListItem,{component:m.TextListItemVariants.dt},e("common.client_connections")),i().createElement(m.TextListItem,{component:m.TextListItemVariants.dd},"up to 100")),i().createElement(m.GridItem,null,i().createElement(m.TextListItem,{component:m.TextListItemVariants.dt},e("common.connection_rate")),i().createElement(m.TextListItem,{component:m.TextListItemVariants.dd},"up to 50 connections/second")),i().createElement(m.GridItem,null,i().createElement(m.TextListItem,{component:m.TextListItemVariants.dt},e("common.message_size")),i().createElement(m.TextListItem,{component:m.TextListItemVariants.dd},"up to 1 MB"))),i().createElement(m.Button,{isSmall:!0,isInline:!0,variant:m.ButtonVariant.link,style:{marginTop:"20px"}},e("common.quick_start_guide_message"))))},C=n(75381),S=n(56777),k=(0,r.createContext)({isModalOpen:!1,setIsModalOpen:function(){},onCreate:function(){},mainToggle:!1,refresh:function(){},cloudProviders:[]}),I=k.Provider,w=function(){return(0,r.useContext)(k)},y={kind:"Empty provider",id:"please_select",display_name:"Please Select",enabled:!0},P=function(){var e=(0,l.useTranslation)().t,t=w(),n=t.isModalOpen,o=t.setIsModalOpen,s=t.onCreate,c=t.cloudProviders,u=t.refresh,d=(t.mainToggle,(0,r.useContext)(g.V)),k=(0,r.useContext)(h.G).basePath,I=(0,_.Z7)().addAlert,P=new f.t;P.name="",P.cloud_provider="",P.region="",P.multi_az=!0;var L=(0,r.useState)(P),V=L[0],O=L[1],D=(0,r.useState)({fieldState:"default"}),N=D[0],M=D[1],A=(0,r.useState)({fieldState:"default"}),B=A[0],R=A[1],F=(0,r.useState)([]),G=F[0],K=F[1],z=(0,r.useState)(!0),Y=z[0],Z=z[1],U=(0,r.useState)(!1),H=U[0],j=U[1],q=function(){O((0,a.__assign)((0,a.__assign)({},V),{name:"",multi_az:!0})),Z(!0),M({fieldState:"default"}),j(!1)},J=function(t){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var n,r,i,o,l;return(0,a.__generator)(this,(function(s){switch(s.label){case 0:return[4,null==d?void 0:d.getToken()];case 1:if(n=s.sent(),r=t.id,void 0===n||""===n||!r)return[3,5];s.label=2;case 2:return s.trys.push([2,4,,5]),[4,new E.M2({accessToken:n,basePath:k}).listCloudProviderRegions(r).then((function(e){var n=e.data,r=[y].concat(n.items);K(null!=n.items?r:[]);var i=n.items.filter((function(e){return e.enabled}));if(1===i.length&&i[0].id&&t.name){var o=i[0].id;O((function(e){return(0,a.__assign)((0,a.__assign)({},e),{region:o})}))}}))];case 3:return s.sent(),[3,5];case 4:return i=s.sent(),o=void 0,(0,b.G)(i)&&(o=null===(l=i.response)||void 0===l?void 0:l.data.reason),I(e("common.something_went_wrong"),m.AlertVariant.danger,o),[3,5];case 5:return[2]}}))}))};(0,r.useEffect)((function(){var e=c.filter((function(e){return e.enabled}));e.length>0&&e[0].name&&(O((0,a.__assign)((0,a.__assign)({},V),{cloud_provider:e[0].name})),J(e[0]))}),[c]);var $,W,X,Q,ee,te,ne,ae=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,i,l,c,f,v;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=function(){var t=!0,n=V.name,a=V.region;return n&&""!==n.trim()?/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(n.trim())||(t=!1,M({fieldState:"error",message:e("common.input_filed_invalid_helper_text")})):(t=!1,M({fieldState:"error",message:e("common.this_is_a_required_field")})),n.length>T.JB&&(t=!1,M({fieldState:"error",message:e("length_is_greater_than_expected",{maxLength:T.JB})})),a&&""!==a.trim()||(t=!1,R({fieldState:"error",message:e("common.this_is_a_required_field")})),t}(),[4,null==d?void 0:d.getToken()];case 1:return n=a.sent(),t?[3,2]:(Z(!1),[3,7]);case 2:if(!(0,C.wu)(n))return[3,7];a.label=3;case 3:return a.trys.push([3,5,,6]),r=new E.M2({accessToken:n,basePath:k}),s(),j(!0),[4,r.createKafka(!0,V).then((function(e){q(),o(!1),u()}))];case 4:return a.sent(),[3,6];case 5:return i=a.sent(),l=void 0,c=!0,(0,b.G)(i)&&((null===(f=i.response)||void 0===f?void 0:f.data.code)===C.SM.DUPLICATE_INSTANCE_NAME?(Z(!1),c=!1,M({fieldState:"error",message:e("the_name_already_exists_please_enter_a_unique_name",{name:V.name})})):l=null===(v=i.response)||void 0===v?void 0:v.data.reason),c&&I(e("common.something_went_wrong"),m.AlertVariant.danger,l,"toastCreateKafka-failed"),[3,6];case 6:j(!1),a.label=7;case 7:return[2]}}))}))},re=function(t){var n=!0;void 0===t||""===t.trim()?n=!0:t&&!/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(t.trim())&&(n=!1),O((0,a.__assign)((0,a.__assign)({},V),{name:t||""})),t&&t.length>T.JB?M({fieldState:"error",message:e("length_is_greater_than_expected",{maxLength:T.JB})}):n?("error"===N.fieldState&&"error"!==B.fieldState&&Z(!0),"error"===N.fieldState&&M({fieldState:"default",message:""})):M({fieldState:"error",message:e("common.input_filed_invalid_helper_text")})},ie=function(e){var t=e;"please_select"===e&&(t=""),"error"===B.fieldState&&"error"!==N.fieldState&&Z(!0),"error"===B.fieldState&&R({fieldState:"default",message:""}),O((0,a.__assign)((0,a.__assign)({},V),{region:t}))},oe=function(e){switch(null==e?void 0:e.toLowerCase()){case"aws":return i().createElement(v.ZP,{size:"lg",color:"black",className:"mk--create-instance__tile--icon"});default:return}},le=function(e,t){if(e){var n=t.currentTarget.id;O((0,a.__assign)((0,a.__assign)({},V),{multi_az:"multi"===n}))}},se=function(e){e.preventDefault(),ae()};return i().createElement(S.a,{isModalOpen:n,title:e("create_a_kafka_instance"),handleModalToggle:function(){q(),o(!n)},onCreate:ae,isFormValid:Y,primaryButtonTitle:e("create_instance"),isCreationInProgress:H,dataTestIdSubmit:"modalCreateKafka-buttonSubmit",dataTestIdCancel:"modalCreateKafka-buttonCancel"},i().createElement(m.Alert,{className:"pf-u-mb-md",variant:"info",title:"Your preview instance will expire after 48 hours.","aria-live":"polite",isInline:!0}),i().createElement(m.Flex,{direction:{default:"column",lg:"row"}},i().createElement(m.FlexItem,{flex:{default:"flex_2"}},($=N.message,W=N.fieldState,X=V.name,Q=V.cloud_provider,ee=V.multi_az,te=V.region,ne=ee,i().createElement(m.Form,{onSubmit:se},!Y&&i().createElement(m.FormAlert,null,i().createElement(m.Alert,{variant:"danger",title:e("common.form_invalid_alert"),"aria-live":"polite",isInline:!0})),i().createElement(m.FormGroup,{label:e("instance_name"),helperText:e("create_instance_name_helper_text"),helperTextInvalid:$,helperTextInvalidIcon:""!=$&&i().createElement(p.ZP,null),isRequired:!0,validated:W,fieldId:"form-instance-name"},i().createElement(m.TextInput,{isRequired:!0,validated:W,type:"text",id:"form-instance-name",name:"instance-name",value:X,onChange:re,autoFocus:!0})),i().createElement(m.FormGroup,{label:e("cloud_provider"),fieldId:"form-cloud-provider-name"},c.map((function(e){return e.enabled&&i().createElement(m.Tile,{key:"tile-"+e.name,title:(null==e?void 0:e.display_name)||"",icon:oe(null==e?void 0:e.name),isSelected:Q===e.name,onClick:function(){return(t=e).name&&O((0,a.__assign)((0,a.__assign)({},V),{cloud_provider:t.name})),void J(t);var t}})}))),i().createElement(m.FormGroup,{label:e("cloud_region"),helperTextInvalid:B.message,helperTextInvalidIcon:i().createElement(p.ZP,null),validated:B.fieldState,fieldId:"form-cloud-region-option"},i().createElement(m.FormSelect,{validated:B.fieldState,value:te,onChange:ie,id:"cloud-region-select",name:"cloud-region","aria-label":e("cloud_region")},G.map((function(t,n){return t.enabled&&i().createElement(m.FormSelectOption,{key:n,value:t.id,label:t.id?e(t.id):t.display_name||""})})))),i().createElement(m.FormGroup,{label:e("availabilty_zones"),fieldId:"availability-zones"},i().createElement(m.ToggleGroup,{"aria-label":e("availability_zone_selection")},i().createElement(m.ToggleGroupItem,{text:e("single"),value:"single",isDisabled:!0,buttonId:"single",isSelected:ne,onChange:le}),i().createElement(m.ToggleGroupItem,{text:e("multi"),value:"multi",buttonId:"multi",isSelected:ne,onChange:le})))))),i().createElement(m.Divider,{isVertical:!0}),i().createElement(m.FlexItem,{flex:{default:"flex_1"},className:"mk--create-instance-modal__sidebar--content"},i().createElement(x,null))))},L=n(73727),V=n(68403),O=n(48784),D=n(35451),N=n(41942),M=function(e){var t,n=e.status,a=e.instanceName,r=(0,l.useTranslation)().t,o=function(){switch(null==n?void 0:n.toLowerCase()){case T.hm[0].value:return i().createElement(D.ZP,{className:"mk--instances__table--icon--completed"});case T.hm[1].value:return i().createElement(p.ZP,{className:"mk--instances__table--icon--failed"});case T.hm[2].value:return i().createElement(N.ZP,null);case T.hm[3].value:case T.hm[4].value:return i().createElement(m.Spinner,{size:"md","aria-label":a,"aria-valuetext":"Creation in progress"});case T.hm[5].value:case T.hm[6].value:return;default:return i().createElement(N.ZP,null)}}();return i().createElement(m.Flex,null,o&&i().createElement(m.FlexItem,{spacer:{default:"spacerSm"}},o),i().createElement(m.FlexItem,null,1===(t=T.hm.filter((function(e){return e.value===(null==n?void 0:n.toLowerCase())}))).length?r(t[0].value):r("creation_pending")))},A=function(e){var t=e.isModalOpen,n=e.title,o=e.confirmButtonProps,s=e.cancelButtonProps,c=e.handleModalToggle,u=e.textProps,d=e.instanceStatus,f=e.selectedItemData,v=(0,l.useTranslation)().t,p=null==f?void 0:f.name,_=(0,r.useState)(),g=_[0],E=_[1],h=function(){return d===C.Od.READY&&(null==g?void 0:g.toLowerCase())!==(null==p?void 0:p.toLowerCase())};return i().createElement(O.AX,{isModalOpen:t,title:n,confirmButtonProps:(0,a.__assign)({isDisabled:h(),"data-testid":"modalDeleteKafka-buttonDelete"},o),cancelButtonProps:s,handleModalToggle:function(){E(""),c&&c()},textProps:u},d===C.Od.READY&&i().createElement(i().Fragment,null,i().createElement("label",{htmlFor:"instance-name-input",dangerouslySetInnerHTML:{__html:v("instance_name_label",{name:p})}}),i().createElement(m.TextInput,{id:"mk--instance-name__input",name:"instance-name-input",type:"text",value:g,onChange:function(e){E(e)},onKeyPress:function(e){"Enter"!==e.key||h()||(null==o?void 0:o.onClick)&&o.onClick(f)},autoFocus:!0})))},B=n(71070),R=n(8755),F=function(e){var t,n,a,o=e.setFilterSelected,s=e.filterSelected,c=void 0===s?"name":s,u=e.total,d=e.page,f=e.perPage,v=e.filteredValue,p=e.setFilteredValue,_=e.isDisabledCreateButton,g=e.buttonTooltipContent,E=w(),h=E.isModalOpen,b=E.setIsModalOpen,T=(0,l.useTranslation)().t,x=(0,r.useState)(!1),S=x[0],k=x[1],I=(0,r.useState)(!1),y=I[0],P=I[1],L=(0,r.useState)(!1),V=L[0],D=L[1],N=(0,r.useState)(!1),M=N[0],A=N[1],F=(0,r.useState)(),G=F[0],K=F[1],z=(0,r.useState)(),Y=z[0],Z=z[1],U=(0,r.useState)(!0),H=U[0],j=U[1],q=(0,r.useState)(!0),J=q[0],$=q[1],W=(0,r.useState)(!1),X=W[0],Q=W[1],ee=(0,r.useRef)(),te=(0,r.useRef)(),ne=[{label:T("name"),value:"name",disabled:!1},{label:T("cloud_provider"),value:"cloud_provider",disabled:!1},{label:T("region"),value:"region",disabled:!1},{label:T("owner"),value:"owner",disabled:!1},{label:T("status"),value:"status",disabled:!1}];(0,r.useEffect)((function(){ve()}),[v]);var ae=C.bv.map((function(e){return{label:T(e.value),value:e.value,disabled:!1}})),re=C.Bh.map((function(e){return{label:T(e.value),value:e.value,disabled:!1}})),ie=C.hm.filter((function(e){return"preparing"!==e.value})).map((function(e){return{label:T(e.value),value:e.value,disabled:!1}})),oe=function(e,t,n){var a=Object.assign([],v),r=a.findIndex((function(t){return t.filterKey===e}));if(r>-1){var i=a[r];if(i.filterValue&&i.filterValue.length>0){var o=i.filterValue.findIndex((function(e){return e.value===t.value}));if(o>-1){if(!n)return;i.filterValue.splice(o,1)}else a[r].filterValue.push(t)}else a[r].filterValue=[t]}else a.push({filterKey:e,filterValue:[t]});p(a)},le=function(e){return!e||/^([a-zA-Z0-9-_%]*[a-zA-Z0-9-_%])?$/.test(e.trim())},se=function(e){"name"===e&&G&&""!=G.trim()?le(G)?(oe("name",{value:G,isExact:!1},!1),K("")):j(!1):"owner"===e&&Y&&""!=Y.trim()&&(le(Y)?(oe("owner",{value:Y,isExact:!1},!1),Z("")):$(!1))},ce=function(e){var t=Object.assign([],v),n=t.findIndex((function(t){return t.filterKey===e}));n>=0&&t.splice(n,1),p(t),"name"===e&&K(""),"owner"===e&&Z(""),"cloud_provider"===e&&A(!1),"region"===e&&D(!1),"status"===e&&A(!1)},ue=function(e){var t;if("Enter"===e.key&&!X){var n=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.name;se(n)}},de=function(e){var t=v.filter((function(t){return t.filterKey===e}));if(t.length>0)return t[0].filterValue.map((function(e){return e.value}))},me=function(e,t,n){var a,r,i=Object.assign([],v),o=i.findIndex((function(t){return t.filterKey===e})),l=Object.assign([],null===(a=i[o])||void 0===a?void 0:a.filterValue),s=t.toString();n&&(null==n?void 0:n.length)>0&&(s=null===(r=null==n?void 0:n.find((function(e){return e.label===t.toString()})))||void 0===r?void 0:r.value);var c=l.findIndex((function(e){return e.value===s}));c>=0&&(i[o].filterValue.splice(c,1),p(i))},fe=function(e){var t=Object.assign([],v),n=t.findIndex((function(t){return t.filterKey===e}));n>=0&&(t.splice(n,1),p(t))},ve=function(){var e=0;null==v||v.forEach((function(t){var n=t.filterValue,a="status"===t.filterKey&&(null==n?void 0:n.filter((function(e){return"provisioning"===e.value})));(null==a?void 0:a.length)>0?e+=(null==n?void 0:n.length)+1:e+=null==n?void 0:n.length})),e>=C.pf?Q(!0):Q(!1)},pe=function(e,t){var n,a=null==v?void 0:v.filter((function(t){return t.filterKey===e}));if(a&&(null==a?void 0:a.length)>0){var r=a[0].filterValue;n=null==r?void 0:r.find((function(e){return e.value===t}))}return!n},_e=function(e){return X?i().createElement("div",null,T("max_filter_message")):i().createElement("div",null,T("input_field_invalid_message",{name:e}))},ge=i().createElement(i().Fragment,null,i().createElement(m.ToolbarGroup,{variant:"filter-group"},i().createElement(m.Select,{variant:m.SelectVariant.single,"aria-label":"Select filter",onToggle:function(){k(!S)},selections:c,isOpen:S,onSelect:function(e,t){k(!S),o(null==t?void 0:t.toString())}},ne.map((function(e,t){return i().createElement(m.SelectOption,{isDisabled:e.disabled,key:t,value:e.value},e.label)}))),i().createElement(m.ToolbarFilter,{chips:de("name"),deleteChip:function(e,t){return me("name",t)},deleteChipGroup:function(){return fe("name")},categoryName:T("name"),showToolbarItem:"name"===(null==c?void 0:c.toLowerCase())},"name"===(null==c?void 0:c.toLowerCase())&&i().createElement(m.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},i().createElement(m.TextInput,{name:"name",id:"filterText",type:"search","aria-label":"Search filter input",validated:!H||X?m.ValidatedOptions.error:m.ValidatedOptions.default,placeholder:T("filter_by_name_lower"),onChange:function(e){K(e),!H&&j(!0)},onKeyPress:ue,value:G,ref:ee}),i().createElement(m.Button,{variant:m.ButtonVariant.control,isDisabled:!H||X,onClick:function(){return se("name")},"aria-label":"Search instances"},i().createElement(B.ZP,null)),(!H||X)&&i().createElement(m.Tooltip,{isVisible:X||!H,content:_e("name"),reference:ee}))),i().createElement(m.ToolbarFilter,{chips:null===(t=de("cloud_provider"))||void 0===t?void 0:t.map((function(e){return T(e)})),deleteChip:function(e,t){return me("cloud_provider",t,ae)},deleteChipGroup:function(){return fe("cloud_provider")},categoryName:T("cloud_provider"),showToolbarItem:"cloud_provider"===c},"cloud_provider"===c&&i().createElement(m.Select,{id:"cloud-provider-select",variant:m.SelectVariant.checkbox,"aria-label":"Select cloud provider",onToggle:function(){P(!y)},selections:de("cloud_provider"),isOpen:y,onSelect:function(e,t,n){n&&ce("cloud_provider"),oe("cloud_provider",{value:t.toString(),isExact:!0},!0),C.bv.length<2&&P(!1)},placeholderText:T("filter_by_cloud_provider")},ae.map((function(e,t){return i().createElement(m.SelectOption,{isDisabled:e.disabled||X&&pe("cloud_provider",e.value),key:t,value:e.value},X&&i().createElement(m.Tooltip,{isVisible:X,content:_e(),reference:function(){return document.getElementById("cloud-provider-select")}}),e.label)})))),i().createElement(m.ToolbarFilter,{chips:null===(n=de("region"))||void 0===n?void 0:n.map((function(e){return T(e)})),deleteChip:function(e,t){return me("region",t,re)},deleteChipGroup:function(){return fe("region")},categoryName:T("region"),showToolbarItem:"region"===c},"region"===c&&i().createElement(m.Select,{id:"region-select",variant:m.SelectVariant.checkbox,"aria-label":"Select region",onToggle:function(){D(!V)},selections:de("region"),isOpen:V,onSelect:function(e,t,n){n&&ce("region"),oe("region",{value:t.toString(),isExact:!0},!0),re.length<2&&D(!1)},placeholderText:T("filter_by_region")},re.map((function(e,t){return i().createElement(m.SelectOption,{isDisabled:e.disabled||X&&pe("region",e.value),key:t,value:e.value},X&&i().createElement(m.Tooltip,{isVisible:X,content:_e(),reference:function(){return document.getElementById("region-select")}}),e.label)})))),i().createElement(m.ToolbarFilter,{chips:de("owner"),deleteChip:function(e,t){return me("owner",t)},deleteChipGroup:function(){return fe("owner")},categoryName:T("owner"),showToolbarItem:"owner"===(null==c?void 0:c.toLowerCase())},"owner"===c.toLowerCase()&&i().createElement(m.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},i().createElement(m.TextInput,{name:"owner",id:"filterOwners",type:"search","aria-label":"Search filter input",placeholder:T("filter_by_owner"),validated:!J||X?m.ValidatedOptions.error:m.ValidatedOptions.default,onChange:function(e){Z(e),!J&&$(!0)},onKeyPress:ue,value:Y,ref:te}),i().createElement(m.Button,{isDisabled:!J||X,variant:m.ButtonVariant.control,onClick:function(){return se("owner")},"aria-label":"Search owners"},i().createElement(B.ZP,null)),(!J||X)&&i().createElement(m.Tooltip,{isVisible:X||!J,content:_e("owner"),reference:te}))),i().createElement(m.ToolbarFilter,{chips:null===(a=de("status"))||void 0===a?void 0:a.map((function(e){return T(e)})),deleteChip:function(e,t){return me("status",t,ie)},deleteChipGroup:function(){return fe("status")},categoryName:T("status"),showToolbarItem:"status"===c},"status"===c&&i().createElement(m.Select,{id:"status-select",variant:m.SelectVariant.checkbox,"aria-label":"Select status",onToggle:function(){A(!M)},selections:de("status"),isOpen:M,onSelect:function(e,t,n){n&&ce("status"),oe("status",{value:t.toString(),isExact:!0},!0)},placeholderText:T("filter_by_status")},ie.map((function(e,t){return i().createElement(m.SelectOption,{isDisabled:e.disabled||X&&pe("status",e.value),key:t,value:e.value},X&&i().createElement(m.Tooltip,{isVisible:X,content:_e(),reference:function(){return document.getElementById("status-select")}}),e.label)})))))),Ee=[{item:_?i().createElement(m.Tooltip,{content:g},i().createElement(m.Button,{variant:"primary",onClick:function(){return b(!h)},"data-testid":"tableStreams-buttonCreateKafka",isAriaDisabled:_},T("create_kafka_instance"))):i().createElement(m.Button,{variant:"primary",onClick:function(){return b(!h)},"data-testid":"tableStreams-buttonCreateKafka"},T("create_kafka_instance"))}];return u&&u>0&&1===Ee.length&&Ee.push({item:i().createElement(O.wu,{widgetId:"pagination-options-menu-top",itemCount:u,page:d,perPage:f,isCompact:!0,titles:{paginationTitle:T("minimal_pagination"),perPageSuffix:T("per_page_suffix"),toFirstPage:T("to_first_page"),toPreviousPage:T("to_previous_page"),toLastPage:T("to_last_page"),toNextPage:T("to_next_page"),optionsToggle:T("options_toggle"),currPage:T("curr_page")}}),variant:"pagination",alignment:{default:"alignRight"}}),i().createElement(O.L5,{toolbarProps:{id:"instance-toolbar",clearAllFilters:function(){p([]),Q(!1)},collapseListedFiltersBreakpoint:"md",inset:{lg:"insetLg"}},toggleGroupProps:{toggleIcon:i().createElement(R.ZP,null),breakpoint:"md"},toggleGroupItems:ge,toolbarItems:Ee})},G=function(e){var t=e.mainToggle,n=e.kafkaInstanceItems,s=e.onViewInstance,c=e.onViewConnection,u=e.onConnectToRoute,d=e.getConnectToRoutePath,f=e.refresh,v=e.page,p=e.perPage,b=e.total,T=e.kafkaDataLoaded,x=e.onDelete,S=e.expectedTotal,k=e.filteredValue,I=e.setFilteredValue,w=e.setFilterSelected,y=e.filterSelected,D=e.orderBy,N=e.setOrderBy,B=e.isDrawerOpen,R=e.isMaxCapacityReached,G=e.buttonTooltipContent,K=e.isDisabledCreateButton,z=e.loggedInUser,Y=(0,r.useContext)(g.V),Z=(0,r.useContext)(h.G).basePath,U=(0,l.useTranslation)().t,H=(0,r.useState)(!1),j=H[0],q=H[1],J=(0,r.useState)({}),$=J[0],W=J[1],X=(0,r.useState)(),Q=X[0],ee=X[1],te=(0,r.useState)([]),ne=te[0],ae=te[1],re=[{title:U("name"),transforms:[V.sortable]},{title:U("cloud_provider"),transforms:[V.sortable]},{title:U("region"),transforms:[V.sortable]},{title:U("owner"),transforms:[V.sortable]},{title:U("status"),transforms:[V.sortable]},{title:U("time_created"),transforms:[V.sortable]}],ie=(0,r.useState)([]),oe=ie[0],le=ie[1],se=new URLSearchParams(location.search),ce=(0,o.k6)(),ue=(0,_.Z7)().addAlert,de=(0,r.useCallback)((function(e,t){se.set(e,t.toString())}),[se]);(0,r.useEffect)((function(){B||ee("")}),[B]);var me=function(){var e=n.filter((function(e){return e.status===C.Od.DEPROVISION})).filter((function(e){return ne.findIndex((function(t){return t===e.name}))<0})).map((function(e){return e.name||""})),t=(0,a.__spreadArray)((0,a.__spreadArray)([],ne),e);ae(t),t.forEach((function(e){n.findIndex((function(t){return t.name===e}))<0&&(!function(e){var t=ne.findIndex((function(t){return t===e}));if(t>-1){var n=Object.assign([],ne);n.splice(t,1),ae(n)}}(e),ue(U("kafka_successfully_deleted",{name:e}),m.AlertVariant.success))}))};(0,r.useEffect)((function(){v>1&&0===n.length&&(de("page",(v-1).toString()),de("perPage",p.toString()),ce.push({search:se.toString()})),me(),function(){var e=JSON.parse(JSON.stringify(oe));if(oe&&oe.length>0){var t=Object.assign([],n).filter((function(e){return e.status===C.Od.READY||e.status===C.Od.FAILED}));e.forEach((function(e){var n,a,r=t.filter((function(t){return e.id===t.id}));r&&r.length>0&&(r[0].status===C.Od.READY?ue(U("kafka_successfully_created"),m.AlertVariant.success,i().createElement("span",{dangerouslySetInnerHTML:{__html:U("kafka_success_message",{name:null===(n=r[0])||void 0===n?void 0:n.name})}}),"toastCreateKafka-success"):r[0].status===C.Od.FAILED&&ue(U("kafka_not_created"),m.AlertVariant.danger,i().createElement("span",{dangerouslySetInnerHTML:{__html:U("kafka_failed_message",{name:null===(a=r[0])||void 0===a?void 0:a.name})}}),"toastCreateKafka-failed"))}))}var a=Object.assign([],null==n?void 0:n.filter((function(e){return e.status===C.Od.PROVISIONING||e.status===C.Od.ACCEPTED})));le(a)}()}),[v,p,n]);var fe=function(e,t,n){var a,r,i,o;"view-instance"===n?(s(t),ee(null==t?void 0:t.name)):"connect-instance"===n?(c(t),ee(null==t?void 0:t.name)):"delete-instance"===n&&pe(t),null===(o=null===(i=null===(r=null===(a=null==e?void 0:e.target)||void 0===a?void 0:a.parentElement)||void 0===r?void 0:r.parentElement)||void 0===i?void 0:i.previousSibling)||void 0===o||o.focus()},ve=function(e){var n=e.name,a=e.row;return i().createElement(i().Fragment,null,t?i().createElement("a",{href:"http://uxd-mk-data-plane-cmolloy.apps.uxd-os-research.shz4.p1.openshiftapps.com/openshiftstreams"},n):i().createElement(L.Link,{to:function(){return d(a,"kafkas/"+(null==a?void 0:a.id))},onClick:function(e){e.preventDefault(),u(a,"kafkas/"+(null==a?void 0:a.id))},"data-testid":"tableStreams-linkKafka"},n))},pe=function(e){var t=e.status;W(e),t===C.Od.FAILED?_e(e):q(!j)},_e=function(e){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,i,o,l;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(void 0===(t=(null==$?void 0:$.id)||(null==e?void 0:e.id)))throw new Error("kafka instance id is not set");return[4,null==Y?void 0:Y.getToken()];case 1:n=a.sent(),r=new E.M2({accessToken:n,basePath:Z}),x(),q(!1),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,r.deleteKafkaById(t,!0).then((function(){ee(void 0),f()}))];case 3:return a.sent(),[3,5];case 4:return i=a.sent(),o=void 0,(0,C.G6)(i)&&(o=null===(l=i.response)||void 0===l?void 0:l.data.reason),ue(U("common.something_went_wrong"),m.AlertVariant.danger,o),[3,5];case 5:return[2]}}))}))},ge=function(e,t,n,a){var r={title:"",confirmActionLabel:"",description:""},i=a?" You might not be able to create a new instance because all of them are currently provisioned by other users.":"";return t===C.Od.READY?(r.title=e("delete_instance")+"?",r.confirmActionLabel=e("delete"),r.description=e("delete_instance_status_complete",{instanceName:n})+i):t!==C.Od.ACCEPTED&&t!==C.Od.PROVISIONING&&t!==C.Od.PREPARING||(r.title=e("delete_instance")+"?",r.confirmActionLabel=e("delete"),r.description=e("delete_instance_status_accepted_or_provisioning",{instanceName:n})+i),r}(U,null==$?void 0:$.status,null==$?void 0:$.name,R),Ee=ge.title,he=ge.confirmActionLabel,be=ge.description,Te=function(e){switch(e.toLowerCase()){case"name":return 0;case"cloud_provider":return 1;case"region":return 2;case"owner":return 3;case"status":return 4;case"created_at":return 5;default:return}},xe=function(){var e=(null==D?void 0:D.split(" "))||[];if(e.length>1)return{index:Te(e[0]),direction:e[1]===V.SortByDirection.asc?V.SortByDirection.asc:V.SortByDirection.desc}};return i().createElement(i().Fragment,null,i().createElement(F,{mainToggle:t,filterSelected:y,setFilterSelected:w,total:b,page:v,perPage:p,filteredValue:k,setFilteredValue:I,isDisabledCreateButton:K,buttonTooltipContent:G}),i().createElement(O.wR,{tableProps:{cells:re,rows:function(){var e=[],t=(0,C.o8)(v,p,S);if(!T){for(var a=[],r=0;r<re.length;r++)a.push({title:i().createElement(m.Skeleton,null)});for(r=0;r<t;r++)e.push({cells:a});return e}return n.forEach((function(t){var n=t.name,a=t.cloud_provider,r=t.region,o=t.created_at,l=t.status,s=t.owner,c=U(a),u=U(r);e.push({cells:[{title:l===C.Od.DEPROVISION||l!==C.Od.READY?n:ve({name:n,row:t})},c,u,s,{title:i().createElement(M,{status:l,instanceName:n})},{title:(0,C.L0)(o,U("ago"))}],originalData:t})})),e}(),"aria-label":U("cluster_instance_list"),actionResolver:function(e,t){return function(e,t){var n,r,i;if(!T)return[];var o=e.originalData;if(o.status===C.Od.DEPROVISION)return[];var l,s=o.owner===z;return s||(l={tooltip:!0,isDisabled:!0,style:{pointerEvents:"auto",cursor:"default"}}),[(0,a.__assign)((0,a.__assign)((n={title:U("view_details"),id:"view-instance"},n["data-testid"]="tableStreams-actionDetails",n.onClick=function(e){return s&&fe(e,o,"view-instance")},n),l),{tooltipProps:{position:"left",content:U("no_permission_to_view_kafka")}}),(0,a.__assign)((0,a.__assign)((r={title:U("view_connection_information"),id:"connect-instance"},r["data-testid"]="tableStreams-actionConnection",r.onClick=function(e){return s&&fe(e,o,"connect-instance")},r),l),{tooltipProps:{position:"left",content:U("no_permission_to_connect_kafka")}}),(0,a.__assign)((0,a.__assign)((i={title:U("delete_instance"),id:"delete-instance"},i["data-testid"]="tableStreams-actionDelete",i.onClick=function(e){return s&&fe(e,o,"delete-instance")},i),l),{tooltipProps:{position:"left",content:U("no_permission_to_delete_kafka")}})]}(e)},onSort:function(e,t,n,a){var r,i=n;(null===(r=xe())||void 0===r?void 0:r.index)!==t&&"time-created"===a.property&&(i="desc"),N(function(e){switch(e){case 0:return"name";case 1:return"cloud_provider";case 2:return"region";case 3:return"owner";case 4:return"status";case 5:return"created_at";default:return""}}(t)+" "+i)},sortBy:xe(),hasDefaultCustomRowWrapper:!0},activeRow:Q,onRowClick:function(e,t,n){var a,r,i=n.originalData,o=null===(a=null==e?void 0:e.target)||void 0===a?void 0:a.type,l=null===(r=null==e?void 0:e.target)||void 0===r?void 0:r.tagName;"button"!==o&&"a"!==(null==l?void 0:l.toLowerCase())&&(s(i),ee(null==i?void 0:i.name))},rowDataTestId:"tableStreams-row",loggedInUser:z}),n.length<1&&T&&i().createElement(O.C0,{emptyStateProps:{variant:O.jU.NoResult},titleProps:{title:U("no_results_found")},emptyStateBodyProps:{body:U("adjust_your_filters_and_try_again")}}),b>0&&i().createElement(O.wu,{widgetId:"pagination-options-menu-bottom",itemCount:b,variant:m.PaginationVariant.bottom,page:v,perPage:p,titles:{paginationTitle:U("full_pagination"),perPageSuffix:U("per_page_suffix"),toFirstPage:U("to_first_page"),toPreviousPage:U("to_previous_page"),toLastPage:U("to_last_page"),toNextPage:U("to_next_page"),optionsToggle:U("options_toggle"),currPage:U("curr_page")}}),i().createElement(A,{isModalOpen:j,instanceStatus:null==$?void 0:$.status,selectedItemData:$,handleModalToggle:function(){return q(!j)},title:Ee,confirmButtonProps:{onClick:_e,label:he},textProps:{description:be}}),i().createElement(P,null))},K=(n(46795),n(34046)),z=n(86153),Y=(n(89403),n(65746),n(26992),function(e){var t=e.mainToggle,n=e.externalServer,a=e.instance,o=void 0===a?{}:a,s=e.isKafkaPending,c=e.onConnectToRoute,u=e.getConnectToRoutePath,d=e.tokenEndPointUrl,f=(0,l.useTranslation)().t,v=(0,r.useState)(!1),p=v[0],_=v[1];return i().createElement("div",{className:"mas--details__drawer--tab-content"},i().createElement(m.TextContent,{className:"pf-u-pb-sm"},i().createElement(m.Text,{component:m.TextVariants.small},f("drawer_resource_tab_body_description_1")),i().createElement(m.Text,{component:m.TextVariants.h3,className:"pf-u-mt-lg"},f("bootstrap_server")),i().createElement(m.Text,{component:m.TextVariants.small},f("bootstrap_server_description"))),s?i().createElement(m.Skeleton,{fontSize:"2xl"}):i().createElement(m.ClipboardCopy,{"data-testid":"drawerStreams-copyBootstrapURL",textAriaLabel:f("bootstrap_server")},n),i().createElement(m.TextContent,{className:"pf-u-pb-sm"},i().createElement(m.Text,{component:m.TextVariants.h3,className:"pf-u-mt-xl"},f("serviceAccount.service_accounts_small")),i().createElement(m.Text,{component:m.TextVariants.small},f("serviceAccount.create_service_account_to_generate_credentials")," ",i().createElement(L.Link,{to:function(){return u(o,"service-accounts")},onClick:function(e){e.preventDefault(),c(o,"service-accounts")},"data-testid":"tableStreams-linkKafka"},f("serviceAccount.service_accounts"))," ",f("common.page"),".")),i().createElement(m.Button,{variant:"secondary",onClick:function(){return _(!0)},"data-testid":"drawerStreams-buttonCreateServiceAccount",isInline:!0},f("serviceAccount.create_service_account")),i().createElement(m.TextContent,{className:"pf-u-pb-sm"},i().createElement(m.Text,{component:m.TextVariants.h3,className:"pf-u-mt-xl"},f("common.authentication_method")),i().createElement(m.Text,{component:m.TextVariants.h4,className:"pf-u-mt-md"},f("common.sasl_oauthbearer")," ",i().createElement(m.Label,{color:"green"},f("common.recommended")),i().createElement(m.Popover,{"aria-label":f("common.sasl_oauthbearer"),bodyContent:i().createElement("div",null,f("serviceAccount.sasl_oauthbearer_popover_content"))},i().createElement(m.Button,{variant:m.ButtonVariant.plain,"aria-label":f("more_info_about_sasl_oauthbearer")},i().createElement(K.ZP,null)))),i().createElement(m.Text,{component:m.TextVariants.small},f("serviceAccount.sasl_oauthbearer_description")),i().createElement(m.Text,{component:m.TextVariants.h6,className:"pf-u-mt-md"},f("common.token_endpoint_url")),s?i().createElement(m.Skeleton,{fontSize:"2xl"}):i().createElement(m.ClipboardCopy,null,d)),i().createElement(m.TextContent,{className:"pf-u-pb-sm"},i().createElement(m.Text,{component:m.TextVariants.h4,className:"pf-u-mt-md"},f("common.sasl_plain")),i().createElement(m.Text,{component:m.TextVariants.small},f("serviceAccount.sasl_plain_description"))),t&&i().createElement(i().Fragment,null,i().createElement(m.TextContent,{className:"pf-u-pb-sm pf-u-pt-lg"},i().createElement(m.Text,{component:m.TextVariants.h5},"Producer endpoint and credentials"),i().createElement(m.Text,{component:m.TextVariants.small},f("drawer_resource_tab_body_description_3"))),i().createElement(m.ClipboardCopy,null,"https://:30123")),i().createElement(z.i,{isOpen:p,setIsOpen:_}))}),Z=n(10141),U=function(){var e=(0,l.useTranslation)().t;return i().createElement(i().Fragment,null,i().createElement("div",{className:"mas--details__drawer--tab-content"},i().createElement(m.TextContent,{className:"pf-u-pb-sm"},i().createElement(m.Text,{component:m.TextVariants.h5},e("sample_connection_code")),i().createElement(m.Text,{component:m.TextVariants.small},e("drawer_code_section_tab_body_description_1"),"<",e("brackets"),">.")),i().createElement("div",{className:"pf-c-code-editor pf-m-read-only"},i().createElement("div",{className:"pf-c-code-editor__header"},i().createElement("div",{className:"pf-c-code-editor__controls"},i().createElement(m.Button,{variant:"control","aria-label":"Action"},i().createElement(Z.ZP,null))),i().createElement("div",{className:"pf-c-code-editor__tab"},i().createElement("span",{className:"pf-c-code-editor__tab-text"},"Java"))),i().createElement("div",{className:"pf-c-code-editor__main"},i().createElement("div",{className:"pf-c-code-editor__code"},i().createElement("pre",{className:"pf-c-code-editor__code-pre"},"import java.util.Properties;")))),i().createElement(m.TextContent,{className:"pf-u-pb-sm pf-u-pt-lg"},i().createElement(m.Text,{component:m.TextVariants.h5},e("sample_connection_code")),i().createElement(m.Text,{component:m.TextVariants.small},e("drawer_code_section_tab_body_description_1"),"<",e("brackets"),">.")),i().createElement("div",{className:"pf-c-code-editor pf-m-read-only"},i().createElement("div",{className:"pf-c-code-editor__header"},i().createElement("div",{className:"pf-c-code-editor__controls"},i().createElement(m.Button,{variant:"control","aria-label":"Action"},i().createElement(Z.ZP,null)))),i().createElement("div",{className:"pf-c-code-editor__main"},i().createElement("div",{className:"pf-c-code-editor__code"},i().createElement("pre",{className:"pf-c-code-editor__code-pre"},"bootstrap.servers=es-1-4-0-ibm-es-proxy-route-bootstrap-es.apps.2019-4-1-demo-icp-mst.fyre.ibm.com:44 sasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username=â€œtoken"))))))},H=function(e){var t=e.onSelect,n=e.externalServer,a=e.instance,r=e.mainToggle,o=e.activeKey,s=e.isKafkaPending,c=e.onConnectToRoute,u=e.getConnectToRoutePath,d=e.tokenEndPointUrl,f=(0,l.useTranslation)().t;return i().createElement(i().Fragment,null,r?i().createElement("div",{className:"mas--details__drawer--tab-content pf-m-secondary"},i().createElement(m.Tabs,{activeKey:o,isSecondary:!0,onSelect:t},i().createElement(m.Tab,{eventKey:0,title:i().createElement(m.TabTitleText,null,f("resources"))},i().createElement(Y,{externalServer:n,instance:a,mainToggle:r,isKafkaPending:s,getConnectToRoutePath:u,onConnectToRoute:c,tokenEndPointUrl:d})),i().createElement(m.Tab,{eventKey:1,title:i().createElement(m.TabTitleText,null,f("sample_code"))},i().createElement(U,null)))):i().createElement(Y,{externalServer:n,instance:a,mainToggle:r,isKafkaPending:s,getConnectToRoutePath:u,onConnectToRoute:c,tokenEndPointUrl:d}))},j=function(e){var t=e.mainToggle,n=e.instanceDetail;d().extend(c());var a=(0,l.useTranslation)().t,r=n||{},o=r.id,s=r.owner,u=r.created_at,f=r.updated_at,v=function(e,t){return i().createElement(i().Fragment,null,t&&i().createElement(i().Fragment,null,i().createElement(m.TextListItem,{component:m.TextListItemVariants.dt},e),i().createElement(m.TextListItem,{component:m.TextListItemVariants.dd},t)))};return i().createElement(i().Fragment,null,i().createElement("div",{className:"mas--details__drawer--tab-content"},t&&i().createElement(m.Grid,{className:"mas--details__drawer--grid"},i().createElement(m.GridItem,{span:6,className:"mas--details__drawer--grid--column-one"},i().createElement(m.Card,{isFlat:!0},i().createElement(m.CardBody,null,i().createElement(m.TextContent,null,i().createElement(m.Text,{component:m.TextVariants.small,className:"pf-u-mb-0"},a("topics")),i().createElement(m.Text,{component:m.TextVariants.h3,className:"pf-u-mt-0"},"10"))))),i().createElement(m.GridItem,{span:6},i().createElement(m.Card,{isFlat:!0},i().createElement(m.CardBody,null,i().createElement(m.TextContent,null,i().createElement(m.Text,{component:m.TextVariants.small,className:"pf-u-mb-0"},a("consumer_groups")),i().createElement(m.Text,{component:m.TextVariants.h3,className:"pf-u-mt-0"},"8")))))),i().createElement(m.TextContent,null,i().createElement(m.TextList,{component:m.TextListVariants.dl},v(a("cloud_provider"),a("amazon_web_services")),v(a("region"),a("us_east_north_virginia")),v(a("id"),o),v(a("owner"),s),v(a("created"),d()(u).format("LLLL")),v(a("updated"),d()(f).format("LLLL"))))))},q=function(e){var t=e.mainToggle,n=e.onClose,a=e.activeTab,o=e.instanceDetail,s=e.isExpanded,u=e.isLoading,f=e.children,v=e["data-ouia-app-id"],p=e.getConnectToRoutePath,_=e.onConnectToRoute,g=e.tokenEndPointUrl,E=e.notRequiredDrawerContentBackground;d().extend(c());var h=(0,l.useTranslation)().t,b=o||{},T=b.name,x=b.status,S=(0,r.useState)(0),k=S[0],I=S[1],w=(0,r.useState)(0),y=w[0],P=w[1];(0,r.useEffect)((function(){var e="details"===(null==a?void 0:a.toLowerCase())?0:1;I(e),P(0)}),[a]);var L,V=function(e,t){I(t)},D=function(e,t){P(t)},N=x===C.Od.ACCEPTED||x===C.Od.PREPARING;return i().createElement(O.D5,{isExpanded:s,isLoading:u,onClose:n,panelBodyContent:i().createElement(m.Tabs,{activeKey:k,onSelect:V},i().createElement(m.Tab,{eventKey:0,title:i().createElement(m.TabTitleText,null,h("details"))},i().createElement(j,{mainToggle:t,instanceDetail:o})),i().createElement(m.Tab,{eventKey:1,title:i().createElement(m.TabTitleText,null,h("connection")),"data-testid":"drawerStreams-tabConnect"},i().createElement(H,{mainToggle:t,activeKey:y,instance:o,externalServer:(L=(o||{}).bootstrapServerHost,(null==L?void 0:L.endsWith(":443"))?L:L+":443"),onSelect:D,isKafkaPending:N,getConnectToRoutePath:p,onConnectToRoute:_,tokenEndPointUrl:g}))),drawerHeaderProps:{text:{label:h("instance_name")},title:{value:T,headingLevel:"h1"}},"data-ouia-app-id":v,inlineAlertMessage:N?i().createElement(m.Alert,{isInline:!0,variant:m.AlertVariant.info,title:h("kafka_instance_not_ready_inline_message"),className:"pf-u-mt-sm"}):i().createElement(i().Fragment,null),notRequiredDrawerContentBackground:E},f)};function J(e,t){var n=(0,r.useRef)();(0,r.useEffect)((function(){n.current=e}),[e]),(0,r.useEffect)((function(){if(null!==t){var e=setTimeout((function(){n.current()}),t);return function(){clearInterval(e)}}}),[e,t])}function $(){return!document[(e=document,void 0!==e.hidden?"hidden":void 0!==e.msHidden?"msHidden":void 0!==e.webkitHidden?"webkitHidden":"")];var e}function W(){var e=(0,r.useState)($()),t=e[0],n=e[1],a=function(){return n($())};return(0,r.useEffect)((function(){var e,t=void 0!==(e=document).hidden?"visibilitychange":void 0!==e.msHidden?"msvisibilitychange":void 0!==e.webkitHidden?"webkitvisibilitychange":"";return document.addEventListener(t,a,!1),function(){document.removeEventListener(t,a)}})),{isVisible:t,setIsVisible:n}}var X=function(e){var t=e.onConnectToRoute,n=e.getConnectToRoutePath,s=e.preCreateInstance,u=e.createDialogOpen,f=e.tokenEndPointUrl;d().extend(c());var v=(0,r.useContext)(g.V),p=(0,r.useContext)(h.G).basePath,b=W().isVisible,T=(0,o.TH)(),x=new URLSearchParams(T.search),S=parseInt(x.get("page")||"",10)||1,k=parseInt(x.get("perPage")||"",10)||10,w=x.has("user-testing"),y=(0,l.useTranslation)().t,L=(0,_.Z7)().addAlert,V=(0,r.useState)(u()),D=V[0],N=V[1],M=(0,r.useState)(),A=M[0],B=M[1],R=(0,r.useState)(),F=R[0],K=R[1],z=(0,r.useState)({}),Y=z[0],Z=z[1],U=(0,r.useState)([]),H=U[0],j=U[1],$=(0,r.useState)(!1),X=$[0],Q=$[1],ee=(0,r.useState)("created_at desc"),te=ee[0],ne=ee[1],ae=(0,r.useState)(),re=ae[0],ie=ae[1],oe=(0,r.useState)(0),le=oe[0],se=oe[1],ce=(0,r.useState)(void 0),ue=ce[0],de=ce[1],me=(0,r.useState)("name"),fe=me[0],ve=me[1],pe=(0,r.useState)([]),_e=pe[0],ge=pe[1],Ee=(0,r.useState)(!1),he=Ee[0],be=Ee[1];(0,r.useEffect)((function(){!function(){if(A&&(null==A?void 0:A.length)>0){var e=null==A?void 0:A.filter((function(e){var t;return(null==e?void 0:e.id)===(null===(t=null==re?void 0:re.instanceDetail)||void 0===t?void 0:t.id)}))[0],t=(0,a.__assign)((0,a.__assign)({},re),{instanceDetail:e});e&&ie(t)}}()}),[A]);var Te=(0,r.useState)(void 0),xe=Te[0],Ce=Te[1],Se=(0,r.useState)(void 0),ke=Se[0],Ie=Se[1];(0,r.useEffect)((function(){null==v||v.getUsername().then((function(e){return Ie(e)}))}),[]),(0,r.useEffect)((function(){we()}),[]);var we=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,null==v?void 0:v.getToken()];case 1:if(!(e=n.sent()))return[3,5];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,new E.M2({accessToken:e,basePath:p}).serviceStatus().then((function(e){var t,n,a=(null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.kafkas)||void 0===n?void 0:n.max_capacity_reached)||w;Ce(a)}))];case 3:return n.sent(),[3,5];case 4:return t=n.sent(),Ne(t),[3,5];case 5:return[2]}}))}))},ye=function(e){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return e?[4,s(e)]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return N(e),[2]}}))}))},Pe=re||{},Le=Pe.activeTab,Ve=Pe.instanceDetail,Oe=function(e){ie({instanceDetail:e,activeTab:"Details"})},De=function(e){ie({instanceDetail:e,activeTab:"Connection"})},Ne=function(e){var t,n,a,r,i;(0,C.G6)(e)&&(r=null===(t=e.response)||void 0===t?void 0:t.data.reason,i=null===(a=null===(n=e.response)||void 0===n?void 0:n.data)||void 0===a?void 0:a.code),i===C.SM.UNAUTHORIZED_USER?be(!0):L(y("common.something_went_wrong"),m.AlertVariant.danger,r)},Me=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,null==v?void 0:v.getToken()];case 1:if(!(e=a.sent())||!b)return[3,7];a.label=2;case 2:return a.trys.push([2,6,,7]),[4,(t=new E.M2({accessToken:e,basePath:p})).listKafkas(null==S?void 0:S.toString(),null==k?void 0:k.toString(),te,(r=[],_e.forEach((function(e){var t=e.filterKey,n=e.filterValue;n&&n.length>0&&r.push(n.map((function(e){var n=e.value.trim();return"provisioning"===n?t+" = preparing or "+t+" = provisioning":""!==n?t+" "+(!0===e.isExact?"= "+n:"like %"+n+"%"):""})).join(" or "))})),r.join(" or "))).then((function(e){var t=e.data,n=null==t?void 0:t.items;Z(t),B(n),void 0!==(null==Y?void 0:Y.total)&&Y.total>le&&se(Y.total),Q(!0)}))];case 3:return a.sent(),A&&0!==(null==A?void 0:A.length)?[3,5]:[4,t.listKafkas("1","1").then((function(e){var t,n,a=null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.items)||void 0===n?void 0:n.length;de(!a||a<1)}))];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return n=a.sent(),Ne(n),[3,7];case 7:return[2]}var r}))}))},Ae=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,null==v?void 0:v.getToken()];case 1:if(e=a.sent(),t=ke?"owner = "+ke:"",!e||!b)return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,new E.M2({accessToken:e,basePath:p}).listKafkas("1","1","",t).then((function(e){var t=e.data;K(t.items)}))];case 3:return a.sent(),[3,5];case 4:return n=a.sent(),Ne(n),[3,5];case 5:return[2]}}))}))};(0,r.useEffect)((function(){Q(!1),Me()}),[v,S,k,_e,te]),(0,r.useEffect)((function(){(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n,r;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,null==v?void 0:v.getToken()];case 1:if(void 0===(e=a.sent())||""===e)return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,new E.M2({accessToken:e,basePath:p}).listCloudProviders().then((function(e){var t=e.data;j(t.items)}))];case 3:return a.sent(),[3,5];case 4:return t=a.sent(),n=void 0,(0,C.G6)(t)&&(n=null===(r=t.response)||void 0===r?void 0:r.data.reason),L(y("common.something_went_wrong"),m.AlertVariant.danger,n),[3,5];case 5:return[2]}}))})),Me()}),[]),(0,r.useEffect)((function(){Ae()}),[]),J((function(){return Ae()}),C.md),J((function(){return Me()}),C.md);var Be=function(){A&&1===(null==A?void 0:A.length)?Q(!0):Q(!1),Me()},Re=function(){Q(!1),se(Y.total-1)};if(he)return i().createElement(O.nW,{titleProps:{title:y("access_permissions_needed"),headingLevel:"h2"},emptyStateBodyProps:{body:y("to_access_kafka_instances_contact_your_organization_administrators")}});var Fe,Ge,Ke=function(){var e=null==A?void 0:A.filter((function(e){return e.owner===ke}))[0];return e||(e=null==F?void 0:F.filter((function(e){return e.owner===ke}))[0]),e},ze=function(){var e=void 0!==Ke(),t="";return(e||xe)&&(t=xe&&e?"You can deploy 1 instance at a time.":xe?"Instances are currently unavailable for creation.":"You can deploy 1 instance at a time."),t};return i().createElement(i().Fragment,null,i().createElement(_.uZ,null,i().createElement(I,{value:{isModalOpen:D,setIsModalOpen:ye,onCreate:function(){se(Y.total+1)},cloudProviders:H,mainToggle:w,refresh:Be,loggedInUser:ke}},i().createElement(q,{mainToggle:w,isExpanded:null!=re,activeTab:Le,isLoading:void 0===Ve,instanceDetail:Ve,onClose:function(){ie(null)},"data-ouia-app-id":"controlPlane-streams",getConnectToRoutePath:n,onConnectToRoute:t,tokenEndPointUrl:f,notRequiredDrawerContentBackground:ue},i().createElement(i().Fragment,null,A&&i().createElement(m.Banner,{isSticky:!0,variant:xe?"warning":"info"},(Ge=void 0!==Ke(),xe?Ge?"Instances are currently unavailable for creation.":i().createElement(i().Fragment,null,"Instances are currently unavailable for creation, so check back later to see if any become available. In the meantime,"," ",i().createElement(m.Button,{variant:m.ButtonVariant.link,isSmall:!0,isInline:!0,"data-testid":"bannerStreams-actionTour",className:"mk--openstreams__banner"},"take a tour")," ","to learn more about the service."):Ge?"Instances are available for creation. You can deploy 1 instance at a time.":i().createElement(i().Fragment,null,"Instances are available for creation. For help getting started, access the"," ",i().createElement(m.Button,{variant:m.ButtonVariant.link,isSmall:!0,isInline:!0,className:"mk--openstreams__banner"},"quick start guide."))))),i().createElement(m.PageSection,{variant:m.PageSectionVariants.light},i().createElement(m.Level,null,i().createElement(m.LevelItem,null,i().createElement(m.TextContent,null,i().createElement(m.Text,{component:"h1"},y("kafka_instances")))))),void 0===A?i().createElement(m.PageSection,{variant:m.PageSectionVariants.light,padding:{default:"noPadding"}},i().createElement(O.yR,null)):ue?i().createElement(m.PageSection,{padding:{default:"noPadding"},isFilled:!0},i().createElement(O.C0,{emptyStateProps:{variant:O.jU.NoItems},emptyStateBodyProps:{body:y("create_a_kafka_instance_to_get_started")},titleProps:{title:y("no_kafka_instances_yet")}},function(){var e=void 0!==Ke()||xe;if(e){var t=ze();return i().createElement(m.Tooltip,{content:t},i().createElement(m.Button,{"data-testid":"emptyStateStreams-buttonCreateKafka",variant:m.ButtonVariant.primary,onClick:function(){return ye(!D)},isAriaDisabled:e},y("create_kafka_instance")))}return i().createElement(m.Button,{"data-testid":"emptyStateStreams-buttonCreateKafka",variant:m.ButtonVariant.primary,onClick:function(){return ye(!D)}},y("create_kafka_instance"))}()),i().createElement(P,null)):A&&void 0!==ue?i().createElement(m.PageSection,{className:"mk--main-page__page-section--table",variant:m.PageSectionVariants.light,padding:{default:"noPadding"}},(Fe=Ke())?i().createElement(m.Alert,{variant:"info",isInline:!0,title:(null==Fe?void 0:Fe.name)+" was created on "+d()(null==Fe?void 0:Fe.created_at).format("LLLL")},"This instance will expire 48 hours after creation"):i().createElement(i().Fragment,null),i().createElement(G,{kafkaInstanceItems:A,mainToggle:w,onViewConnection:De,onViewInstance:Oe,onConnectToRoute:t,getConnectToRoutePath:n,refresh:Be,kafkaDataLoaded:X,onDelete:Re,page:S,perPage:k,total:null==Y?void 0:Y.total,expectedTotal:le,filteredValue:_e,setFilteredValue:ge,setFilterSelected:ve,filterSelected:fe,orderBy:te,setOrderBy:ne,isDrawerOpen:null!==re,loggedInUser:ke,isMaxCapacityReached:xe,buttonTooltipContent:ze(),isDisabledCreateButton:void 0!==Ke()||xe})):i().createElement(i().Fragment,null)))))}}}]);
//# sourceMappingURL=122.6dbc1c42.js.map