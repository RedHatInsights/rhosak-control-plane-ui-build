{"version":3,"file":"8613.2f6fab30.js","mappings":"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","sources":["webpack://kas-ui/./src/app/common/MASErrorBoundary/MASErrorBoundary.tsx","webpack://kas-ui/./src/app/common/MASLoading/MASLoading.tsx","webpack://kas-ui/./src/app/common/MASDrawer/MASDrawer.tsx","webpack://kas-ui/./src/app/contexts/federated.ts","webpack://kas-ui/./src/app/modules/InstanceDrawer/InstanceDrawerContent.tsx","webpack://kas-ui/./src/app/modules/InstanceDrawer/InstanceDrawer.tsx","webpack://kas-ui/./src/app/modules/InstanceDrawer/contexts/InstanceDrawerContext.tsx","webpack://kas-ui/./src/app/modules/OpenshiftStreams/OpenshiftStreamsFederated.tsx","webpack://kas-ui/./src/app/modules/OpenshiftStreams/components/StreamsTableConnected/useKafkaInstances.ts"],"sourcesContent":["import { Component, ErrorInfo, ReactNode } from \"react\";\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\nimport { withTranslation, WithTranslation } from \"react-i18next\";\nimport { PageSection, Button } from \"@patternfly/react-core\";\nimport { MASEmptyState, MASEmptyStateVariant } from \"@app/common\";\nimport \"./MASErrorBoundary.css\";\n\ntype Props = WithTranslation &\n  RouteComponentProps & {\n    children?: ReactNode;\n  };\n\ntype State = {\n  hasError?: boolean;\n};\n\nclass MASErrorBoundary extends Component<Props, State> {\n  state: State = {\n    hasError: false,\n  };\n\n  static getDerivedStateFromError(): State {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error(\"error:\", error, errorInfo);\n  }\n\n  onClickButton = () => {\n    const { history } = this.props;\n    this.setState({ hasError: false });\n    history && history.push(\"/\");\n  };\n\n  render() {\n    const { t } = this.props;\n    const { hasError } = this.state;\n\n    if (hasError) {\n      return (\n        <PageSection padding={{ default: \"noPadding\" }} isFilled>\n          <MASEmptyState\n            emptyStateProps={{\n              variant: MASEmptyStateVariant.UnexpectedError,\n            }}\n            emptyStateIconProps={{\n              className: \"icon-color\",\n            }}\n            titleProps={{\n              title: t(\"common.something_went_wrong\"),\n            }}\n            emptyStateBodyProps={{\n              body: t(\"unexpected_error\"),\n            }}\n          >\n            <Button onClick={this.onClickButton}>\n              {t(\"go_to_kafka_instances\")}\n            </Button>\n          </MASEmptyState>\n        </PageSection>\n      );\n    }\n    return this.props.children;\n  }\n}\n\nconst MASErrorBoundaryComponent = withRouter(\n  withTranslation()(MASErrorBoundary)\n);\nexport { MASErrorBoundaryComponent as MASErrorBoundary };\n","import { FunctionComponent } from \"react\";\nimport {\n  Bullseye,\n  BullseyeProps,\n  Spinner,\n  SpinnerProps,\n} from \"@patternfly/react-core\";\n\nexport type MASLoadingProps = {\n  bullseyeProps?: Omit<BullseyeProps, \"children\">;\n  spinnerProps?: SpinnerProps;\n};\n\nexport const MASLoading: FunctionComponent<MASLoadingProps> = ({\n  bullseyeProps,\n  spinnerProps,\n}: MASLoadingProps) => (\n  <Bullseye {...bullseyeProps}>\n    <Spinner {...spinnerProps} />\n  </Bullseye>\n);\n","import { ReactNode, FC } from \"react\";\nimport {\n  Drawer,\n  DrawerProps,\n  DrawerContent,\n  DrawerPanelContent,\n  DrawerHead,\n  DrawerPanelBody,\n  DrawerActions,\n  DrawerCloseButton,\n  TextContent,\n  Text,\n  TextVariants,\n  Title,\n  TitleSizes,\n  DrawerPanelContentProps,\n  TextProps,\n  TitleProps,\n  DrawerContentBody,\n} from \"@patternfly/react-core\";\nimport { MASLoading } from \"@app/common\";\nimport \"./MASDrawer.css\";\n\nexport type MASDrawerProps = DrawerProps & {\n  children: ReactNode;\n  panelBodyContent?: ReactNode;\n  onClose: () => void;\n  drawerData?: unknown;\n  isLoading?: boolean;\n  drawerPanelContentProps?: Omit<DrawerPanelContentProps, \"children\">;\n  drawerHeaderProps?: {\n    text?: Omit<TextProps, \"children\" | \"ref\"> & {\n      label: string | undefined;\n    };\n    title?: Omit<TitleProps, \"children\"> & {\n      value: string | undefined;\n    };\n  };\n  [\"data-ouia-app-id\"]?: string;\n  notRequiredDrawerContentBackground?: boolean | undefined;\n  inlineAlertMessage?: ReactNode;\n};\n\nexport const MASDrawer: FC<MASDrawerProps> = ({\n  onClose,\n  isLoading = true,\n  drawerPanelContentProps,\n  drawerHeaderProps,\n  isExpanded,\n  children,\n  panelBodyContent,\n  onExpand,\n  notRequiredDrawerContentBackground,\n  \"data-ouia-app-id\": dataOuiaAppId,\n  inlineAlertMessage,\n}: MASDrawerProps) => {\n  const { widths, ...restDrawerPanelContentProps } =\n    drawerPanelContentProps || {};\n  const { text, title } = drawerHeaderProps || {};\n\n  const panelContent = (\n    <DrawerPanelContent\n      widths={widths || { default: \"width_50\" }}\n      {...restDrawerPanelContentProps}\n    >\n      {isLoading ? (\n        <MASLoading />\n      ) : (\n        <>\n          <DrawerHead>\n            <TextContent>\n              {text?.label && (\n                <Text\n                  component={text?.component || TextVariants.small}\n                  className={text?.className || \"pf-u-mb-0\"}\n                >\n                  {text?.label}\n                </Text>\n              )}\n              {title?.value && (\n                <Title\n                  headingLevel={title?.headingLevel || \"h2\"}\n                  size={title?.size || TitleSizes[\"xl\"]}\n                  className={title?.className || \"pf-u-mt-0\"}\n                >\n                  {title?.value}\n                </Title>\n              )}\n            </TextContent>\n            <DrawerActions>\n              <DrawerCloseButton onClick={onClose} />\n            </DrawerActions>\n          </DrawerHead>\n          <DrawerPanelBody>\n            {inlineAlertMessage}\n            {panelBodyContent}\n          </DrawerPanelBody>\n        </>\n      )}\n    </DrawerPanelContent>\n  );\n\n  return (\n    <Drawer\n      isExpanded={isExpanded}\n      onExpand={onExpand}\n      data-ouia-app-id={dataOuiaAppId}\n      data-testid=\"mk--instance__drawer\"\n      className=\"kas-drawer\"\n    >\n      <DrawerContent\n        panelContent={panelContent}\n        className={\n          notRequiredDrawerContentBackground ? \"pf-m-no-background\" : \"\"\n        }\n      >\n        <DrawerContentBody className=\"pf-u-display-flex pf-u-flex-direction-column\">\n          {\" \"}\n          {children}\n        </DrawerContentBody>\n      </DrawerContent>\n    </Drawer>\n  );\n};\n\nexport default MASDrawer;\n","import { createContext, useContext } from \"react\";\nimport { Principal } from \"@rhoas/app-services-ui-shared\";\n\nexport type FederatedProps = {\n  preCreateInstance?: (isOpen: boolean) => Promise<boolean>;\n  shouldOpenCreateModal: () => Promise<boolean>;\n  getAllUserAccounts?: () => Principal[];\n};\n\nexport const FederatedContext = createContext<FederatedProps>(\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  null!\n);\nexport const useFederated = (): FederatedProps => useContext(FederatedContext);\n","import { FunctionComponent, lazy, Suspense, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { parseISO } from \"date-fns\";\nimport { InstanceStatus } from \"@app/utils\";\nimport { MASLoading } from \"@app/common\";\nimport { Tab, Tabs, TabTitleText } from \"@patternfly/react-core\";\nimport { InstanceDrawerTab } from \"@app/modules/InstanceDrawer/tabs\";\nimport { KafkaDetailsTab } from \"@rhoas/app-services-ui-components\";\nimport { InstanceDrawerContextProps } from \"@app/modules/InstanceDrawer/contexts/InstanceDrawerContext\";\nimport { useEnrichedKafkaInstance } from \"@app/modules/OpenshiftStreams/components/StreamsTableConnected/useKafkaInstances\";\nimport { KafkaRequest, SupportedKafkaSize } from \"@rhoas/kafka-management-sdk\";\n\nexport type KafkaRequestWithSize = KafkaRequest & {\n  size: SupportedKafkaSize;\n};\nexport const ResourcesTab = lazy(() => import(\"./ConnectionTab\"));\n\nexport type InstanceDrawerContentProps = {\n  instance: NonNullable<InstanceDrawerContextProps[\"drawerInstance\"]>;\n  activeTab: InstanceDrawerTab;\n  setActiveTab: (tab: InstanceDrawerTab) => void;\n  tokenEndPointUrl: string;\n};\n\nexport const InstanceDrawerContent: FunctionComponent<\n  InstanceDrawerContentProps\n> = ({ instance, ...props }) => {\n  const { kafkaRequestToKafkaInstance } = useEnrichedKafkaInstance();\n\n  const [enrichedInstance, setEnrichedInstance] = useState(\n    instance.request ? instance : undefined\n  );\n\n  useEffect(() => {\n    async function enrichInstance() {\n      const enrichedInstance = await kafkaRequestToKafkaInstance(\n        instance as unknown as KafkaRequestWithSize\n      );\n      setEnrichedInstance(enrichedInstance);\n    }\n    if (!enrichedInstance) {\n      void enrichInstance();\n    }\n  }, [enrichedInstance, instance, kafkaRequestToKafkaInstance]);\n\n  if (enrichedInstance) {\n    return (\n      <InstanceDrawerContentConnected instance={enrichedInstance} {...props} />\n    );\n  }\n\n  return <MASLoading />;\n};\nexport const InstanceDrawerContentConnected: FunctionComponent<\n  InstanceDrawerContentProps\n> = ({ instance, activeTab, setActiveTab, tokenEndPointUrl }) => {\n  const { t } = useTranslation([\"kasTemporaryFixMe\"]);\n\n  const getExternalServer = () => {\n    const { bootstrap_server_host } = instance.request;\n    return bootstrap_server_host?.endsWith(\":443\")\n      ? bootstrap_server_host\n      : `${bootstrap_server_host}:443`;\n  };\n\n  const getAdminServerUrl = () => {\n    const { admin_api_server_url } = instance.request;\n    return admin_api_server_url ? `${admin_api_server_url}/openapi` : undefined;\n  };\n\n  const isKafkaPending =\n    instance.status === InstanceStatus.ACCEPTED ||\n    instance.status === InstanceStatus.PREPARING;\n\n  return (\n    <Suspense fallback={<MASLoading />}>\n      <Tabs\n        activeKey={activeTab}\n        onSelect={(_, tab) => setActiveTab(tab as InstanceDrawerTab)}\n      >\n        <Tab\n          eventKey={InstanceDrawerTab.DETAILS}\n          title={<TabTitleText>{t(\"details\")}</TabTitleText>}\n        >\n          <KafkaDetailsTab\n            id={instance.id}\n            owner={instance.owner}\n            createdAt={parseISO(instance.createdAt)}\n            updatedAt={parseISO(instance.updatedAt)}\n            expiryDate={\n              instance.expiryDate ? parseISO(instance.expiryDate) : undefined\n            }\n            size={instance.size}\n            ingress={instance.ingress}\n            egress={instance.egress}\n            storage={instance.storage}\n            maxPartitions={instance.maxPartitions}\n            connections={instance.connections}\n            connectionRate={instance.connectionRate}\n            messageSize={instance.messageSize}\n            region={t(instance.region)}\n            instanceType={instance.plan === \"standard\" ? \"standard\" : \"eval\"}\n            billing={instance.billing}\n            kafkaVersion={instance.request.version || \"\"}\n          />\n        </Tab>\n        <Tab\n          eventKey={InstanceDrawerTab.CONNECTION.toString()}\n          title={<TabTitleText>{t(\"connection\")}</TabTitleText>}\n          data-testid=\"drawerStreams-tabConnect\"\n        >\n          <ResourcesTab\n            externalServer={getExternalServer()}\n            adminServerUrl={getAdminServerUrl()}\n            isKafkaPending={isKafkaPending}\n            tokenEndPointUrl={tokenEndPointUrl}\n            instanceId={instance.id}\n          />\n        </Tab>\n      </Tabs>\n    </Suspense>\n  );\n};\n","import { FunctionComponent } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { InstanceDrawerContent } from \"@app/modules/InstanceDrawer/InstanceDrawerContent\";\n\nimport \"./InstanceDrawer.css\";\nimport { MASDrawer } from \"@app/common\";\nimport { InstanceDrawerTab } from \"@app/modules/InstanceDrawer/tabs\";\nimport { InstanceDrawerContextProps } from \"@app/modules/InstanceDrawer/contexts/InstanceDrawerContext\";\n\nexport type InstanceDrawerProps = {\n  \"data-ouia-app-id\": string;\n} & InstanceDrawerContextProps;\n\nexport const InstanceDrawer: FunctionComponent<InstanceDrawerProps> = ({\n  \"data-ouia-app-id\": dataOuiaAppId,\n  isDrawerOpen,\n  drawerInstance,\n  setDrawerActiveTab,\n  drawerActiveTab,\n  closeDrawer,\n  tokenEndPointUrl,\n  children,\n}) => {\n  const { t } = useTranslation([\"kasTemporaryFixMe\"]);\n\n  return (\n    <MASDrawer\n      isExpanded={isDrawerOpen}\n      isLoading={drawerInstance === undefined}\n      onClose={closeDrawer}\n      panelBodyContent={\n        drawerInstance && (\n          <InstanceDrawerContent\n            tokenEndPointUrl={tokenEndPointUrl}\n            activeTab={drawerActiveTab || InstanceDrawerTab.DETAILS}\n            instance={drawerInstance}\n            setActiveTab={setDrawerActiveTab}\n          />\n        )\n      }\n      drawerHeaderProps={{\n        text: { label: t(\"instance_name\") },\n        title: { value: drawerInstance?.name, headingLevel: \"h1\" },\n      }}\n      data-ouia-app-id={dataOuiaAppId}\n      notRequiredDrawerContentBackground={drawerInstance === undefined}\n    >\n      {children}\n    </MASDrawer>\n  );\n};\n","import { createContext, FunctionComponent, useContext } from \"react\";\nimport { InstanceDrawerTab } from \"@app/modules/InstanceDrawer/tabs\";\nimport { KafkaInstanceEnhanced } from \"@app/modules/OpenshiftStreams/components/StreamsTableConnected/useKafkaInstances\";\n\nexport type InstanceDrawerContextProps = {\n  isDrawerOpen: boolean;\n  drawerInstance: KafkaInstanceEnhanced | undefined;\n  setDrawerInstance: (instance: KafkaInstanceEnhanced) => void;\n  drawerActiveTab: InstanceDrawerTab | undefined;\n  setDrawerActiveTab: (tab: InstanceDrawerTab) => void;\n  openDrawer: (tab?: InstanceDrawerTab) => void;\n  closeDrawer: () => void;\n  tokenEndPointUrl: string;\n};\n\nexport const InstanceDrawerContext = createContext<\n  InstanceDrawerContextProps | undefined\n>(undefined);\n\nexport const useInstanceDrawer = (): InstanceDrawerContextProps => {\n  const answer = useContext(InstanceDrawerContext);\n  if (answer === undefined) {\n    throw new Error(\"must be used inside a InstanceDrawerContext provider\");\n  }\n  return answer;\n};\n\nexport const InstanceDrawerContextProvider: FunctionComponent<\n  InstanceDrawerContextProps\n> = ({ children, ...props }) => {\n  return (\n    <InstanceDrawerContext.Provider value={props}>\n      {children}\n    </InstanceDrawerContext.Provider>\n  );\n};\n","import { FunctionComponent } from \"react\";\nimport { PaginationProvider } from \"@app/common\";\nimport { FederatedContext, FederatedProps } from \"@app/contexts\";\nimport { ModalProvider } from \"@rhoas/app-services-ui-components\";\nimport { KasModalLoader } from \"@app/modals\";\nimport { KasLayout } from \"@app/modules/OpenshiftStreams/components\";\nimport { StreamsTableProps } from \"@app/modules/OpenshiftStreams/components/StreamsTableConnected\";\nimport { InstanceDrawer } from \"@app/modules/InstanceDrawer\";\nimport {\n  InstanceDrawerContextProps,\n  InstanceDrawerContextProvider,\n} from \"@app/modules/InstanceDrawer/contexts/InstanceDrawerContext\";\nimport { StreamsTableConnectedWithAuth } from \"@app/modules/OpenshiftStreams/StreamsTableConnectedWithAuth\";\n// Version of OpenshiftStreams for federation\ntype OpenshiftStreamsFederatedProps = StreamsTableProps &\n  InstanceDrawerContextProps &\n  FederatedProps;\n\nconst OpenshiftStreamsFederated: FunctionComponent<\n  OpenshiftStreamsFederatedProps\n> = ({\n  preCreateInstance,\n  shouldOpenCreateModal,\n  getAllUserAccounts,\n  ...drawerProps\n}) => {\n  return (\n    <FederatedContext.Provider\n      value={{\n        preCreateInstance,\n        shouldOpenCreateModal,\n        getAllUserAccounts,\n      }}\n    >\n      <ModalProvider>\n        <PaginationProvider>\n          <InstanceDrawerContextProvider {...drawerProps}>\n            <InstanceDrawer\n              data-ouia-app-id=\"dataPlane-streams\"\n              {...drawerProps}\n            >\n              <KasLayout data-ouia-app-id={\"TODO\"}>\n                <StreamsTableConnectedWithAuth\n                  preCreateInstance={preCreateInstance}\n                />\n              </KasLayout>\n            </InstanceDrawer>\n          </InstanceDrawerContextProvider>\n        </PaginationProvider>\n        <KasModalLoader />\n      </ModalProvider>\n    </FederatedContext.Provider>\n  );\n};\n\nexport default OpenshiftStreamsFederated;\n","import { useKms } from \"@app/api\";\nimport { useCallback } from \"react\";\nimport type {\n  CloudProvider,\n  KafkaInstance,\n  KafkaInstancesProps,\n  Plan,\n  Status,\n} from \"@rhoas/app-services-ui-components\";\nimport { SimplifiedStatuses } from \"@rhoas/app-services-ui-components\";\nimport { KafkaRequest } from \"@rhoas/kafka-management-sdk\";\nimport { AxiosCacheRequestConfig } from \"axios-simple-cache-adapter\";\nimport {\n  useGetSizes,\n  useStandardQuota,\n} from \"@app/modules/OpenshiftStreams/dialogs/CreateInstance/hooks\";\n\nexport type KafkaInstanceEnhanced = Required<KafkaInstance> & {\n  request: KafkaRequest;\n};\n\nexport function useKafkaInstances() {\n  const getKms = useKms();\n  const { kafkaRequestToKafkaInstance } = useEnrichedKafkaInstance();\n  return useCallback<\n    KafkaInstancesProps<KafkaInstanceEnhanced>[\"getInstances\"]\n  >(\n    async (page, perPage, query, sort, direction) => {\n      // const filterQuery = getFilterQuery();\n      const apisService = getKms();\n\n      type columns = NonNullable<typeof sort>;\n      const uiColumnMapping: { [key in columns]: string } = {\n        name: \"name\",\n        owner: \"owner\",\n        provider: \"cloud_provider\",\n        region: \"region\",\n        createdAt: \"created_at\",\n      };\n\n      try {\n        const { name, status, owner } = query;\n\n        const querystring = [\n          valuesToQuery(\"name\", name, \"%\"),\n          valuesToQuery(\"owner\", owner, \"%\"),\n          valuesToQuery(\n            \"status\",\n            status.flatMap((s) => SimplifiedStatuses[s]),\n            \"=\"\n          ),\n        ]\n          .filter(Boolean)\n          .map((q) => `(${q})`)\n          .join(\" and \");\n\n        const res = await apisService.getKafkas(\n          page.toString(10),\n          perPage.toString(10),\n          sort ? `${uiColumnMapping[sort]} ${direction}` : undefined,\n          querystring,\n          {\n            cache: false,\n          } as AxiosCacheRequestConfig\n        );\n        const rawInstances = res.data.items;\n        const count = res.data.total;\n        const instances = await Promise.all(\n          rawInstances.map(kafkaRequestToKafkaInstance)\n        );\n        return {\n          instances,\n          count,\n        };\n      } catch (error) {\n        // handleServerError(error);\n        return {\n          instances: [],\n          count: 0,\n        };\n      }\n    },\n    [getKms, kafkaRequestToKafkaInstance]\n  );\n}\n\nexport function useEnrichedKafkaInstance() {\n  const getQuota = useStandardQuota();\n  const getDeveloperSizes = useGetSizes(\"developer\");\n  const getStandardSizes = useGetSizes(\"standard\");\n\n  const kafkaRequestToKafkaInstance = useCallback(\n    async (data: KafkaRequest): Promise<KafkaInstanceEnhanced> => {\n      const d = data as Required<KafkaRequest>;\n\n      const { marketplaceSubscriptions } = await getQuota();\n\n      const enhancedInstance: KafkaInstanceEnhanced = {\n        billing: undefined,\n        connectionRate: 0,\n        connections: 0,\n        createdAt: d.created_at,\n        egress: 0,\n        expiryDate: d.expires_at as string | undefined,\n        id: d.id,\n        ingress: 0,\n        maxPartitions: 0,\n        messageSize: 0,\n        name: d.name,\n        owner: d.owner,\n        plan: d.billing_model as Plan,\n        provider: d.cloud_provider as CloudProvider,\n        region: d.region,\n        size: \"1\",\n        status: apiStatusToUIStatus(d.status),\n        storage: 0,\n        updatedAt: d.updated_at,\n        request: d,\n      };\n\n      // update the billing info\n      try {\n        const marketplaceForBilling = marketplaceSubscriptions.find((ms) =>\n          ms.subscriptions.find((s) => s === d.billing_cloud_account_id)\n        )?.marketplace;\n\n        const billing: KafkaInstanceEnhanced[\"billing\"] =\n          d.billing_model === \"standard\"\n            ? \"prepaid\"\n            : marketplaceForBilling\n            ? {\n                marketplace: marketplaceForBilling,\n                subscription: d.billing_cloud_account_id,\n              }\n            : undefined;\n        enhancedInstance.billing = billing;\n      } catch (e) {\n        console.warn(\n          \"kafkaRequestToKafkaInstance\",\n          `couldn't retrieve the billing info for`,\n          d\n        );\n      }\n\n      // update the limits\n      try {\n        const limits =\n          d.instance_type === \"developer\"\n            ? await getDeveloperSizes(\n                d.cloud_provider as CloudProvider,\n                d.region\n              )\n            : await getStandardSizes(\n                d.cloud_provider as CloudProvider,\n                d.region\n              );\n        const thisInstanceLimits = limits.find((l) => l.id === d.size_id);\n        if (thisInstanceLimits) {\n          enhancedInstance.size = thisInstanceLimits.displayName;\n          enhancedInstance.ingress = thisInstanceLimits.ingress;\n          enhancedInstance.egress = thisInstanceLimits.egress;\n          enhancedInstance.storage = d.max_data_retention_size.bytes;\n          enhancedInstance.connections = thisInstanceLimits.connections;\n          enhancedInstance.connectionRate = thisInstanceLimits.connectionRate;\n          enhancedInstance.maxPartitions = thisInstanceLimits.maxPartitions;\n          enhancedInstance.messageSize = thisInstanceLimits.messageSize;\n        }\n      } catch (e) {\n        console.warn(\n          \"kafkaRequestToKafkaInstance\",\n          `couldn't retrieve the limits info for`,\n          d\n        );\n      }\n\n      return enhancedInstance;\n    },\n    [getDeveloperSizes, getQuota, getStandardSizes]\n  );\n\n  return {\n    kafkaRequestToKafkaInstance,\n  };\n}\n\nfunction valuesToQuery(\n  field: string,\n  values: string[],\n  comparison: \"%\" | \"=\"\n): string | undefined {\n  return values\n    .map((v) =>\n      comparison === \"%\"\n        ? `${field} like %${v.trim()}%`\n        : `${field} = ${v.trim()}`\n    )\n    .join(\" or \");\n}\n\nfunction apiStatusToUIStatus(status: string): Status {\n  const mapping: { [key: string]: Status } = {\n    accepted: \"accepted\",\n    preparing: \"preparing\",\n    provisioning: \"provisioning\",\n    ready: \"ready\",\n    failed: \"degraded\",\n    deprovision: \"deprovision\",\n    deleting: \"deleting\",\n  };\n  return mapping[status] || \"degraded\";\n}\n"],"names":["Component","state","hasError","onClickButton","history","this","props","setState","push","static","componentDidCatch","error","errorInfo","console","render","t","PageSection","padding","default","isFilled","MASEmptyState","emptyStateProps","variant","emptyStateIconProps","className","titleProps","title","emptyStateBodyProps","body","Button","onClick","children","withRouter","withTranslation","MASLoading","bullseyeProps","spinnerProps","Bullseye","Spinner","onClose","isLoading","drawerPanelContentProps","drawerHeaderProps","isExpanded","panelBodyContent","onExpand","notRequiredDrawerContentBackground","dataOuiaAppId","inlineAlertMessage","widths","restDrawerPanelContentProps","text","panelContent","DrawerPanelContent","DrawerHead","TextContent","label","Text","component","TextVariants","value","Title","headingLevel","size","TitleSizes","DrawerActions","DrawerCloseButton","DrawerPanelBody","Drawer","DrawerContent","DrawerContentBody","FederatedContext","createContext","useFederated","useContext","ResourcesTab","lazy","InstanceDrawerContent","instance","kafkaRequestToKafkaInstance","enrichedInstance","setEnrichedInstance","useState","request","undefined","useEffect","enrichInstance","InstanceDrawerContentConnected","activeTab","setActiveTab","tokenEndPointUrl","useTranslation","isKafkaPending","status","Suspense","fallback","Tabs","activeKey","onSelect","_","tab","Tab","eventKey","TabTitleText","KafkaDetailsTab","id","owner","createdAt","parseISO","updatedAt","expiryDate","ingress","egress","storage","maxPartitions","connections","connectionRate","messageSize","region","instanceType","plan","billing","kafkaVersion","version","externalServer","bootstrap_server_host","endsWith","getExternalServer","adminServerUrl","admin_api_server_url","getAdminServerUrl","instanceId","InstanceDrawer","isDrawerOpen","drawerInstance","setDrawerActiveTab","drawerActiveTab","closeDrawer","name","InstanceDrawerContext","useInstanceDrawer","answer","Error","InstanceDrawerContextProvider","Provider","preCreateInstance","shouldOpenCreateModal","getAllUserAccounts","drawerProps","ModalProvider","StreamsTableConnectedWithAuth","useKafkaInstances","getKms","useEnrichedKafkaInstance","useCallback","page","perPage","query","sort","direction","apisService","uiColumnMapping","provider","querystring","valuesToQuery","flatMap","s","SimplifiedStatuses","filter","Boolean","map","q","join","res","getKafkas","toString","cache","rawInstances","data","items","count","total","instances","Promise","all","getQuota","getDeveloperSizes","getStandardSizes","d","marketplaceSubscriptions","enhancedInstance","created_at","expires_at","billing_model","cloud_provider","apiStatusToUIStatus","updated_at","marketplaceForBilling","find","ms","subscriptions","billing_cloud_account_id","marketplace","subscription","e","warn","thisInstanceLimits","instance_type","l","size_id","displayName","max_data_retention_size","bytes","field","values","comparison","v","trim","accepted","preparing","provisioning","ready","failed","deprovision","deleting"],"sourceRoot":""}