/*! For license information please see 8224.7f018a90.js.LICENSE.txt */
"use strict";(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[8224,5183,655,1230,5512,7066,3489],{35183:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createIcon=t.getSize=t.IconSize=void 0;const i=n(70655),a=i.__importStar(n(75418));var r;!function(e){e.sm="sm",e.md="md",e.lg="lg",e.xl="xl"}(r=t.IconSize||(t.IconSize={}));t.getSize=e=>{switch(e){case r.sm:return"1em";case r.md:return"1.5em";case r.lg:return"2em";case r.xl:return"3em";default:return"1em"}};let o=0;t.createIcon=function({name:e,xOffset:n=0,yOffset:s=0,width:c,height:l,svgPath:u}){var d;return d=class extends a.Component{constructor(){super(...arguments),this.id="icon-title-"+o++}render(){const e=this.props,{size:r,color:o,title:d,noVerticalAlign:p}=e,h=i.__rest(e,["size","color","title","noVerticalAlign"]),f=Boolean(d),m=t.getSize(r),g=-.125*Number.parseFloat(m),v=p?null:{verticalAlign:`${g}em`},y=[n,s,c,l].join(" ");return a.createElement("svg",Object.assign({style:v,fill:o,height:m,width:m,viewBox:y,"aria-labelledby":f?this.id:null,"aria-hidden":!f||null,role:"img"},h),f&&a.createElement("title",{id:this.id},d),a.createElement("path",{d:u}))}},d.displayName=e,d.defaultProps={color:"currentColor",size:r.sm,noVerticalAlign:!1},d}},8755:(e,t,n)=>{t._t={name:"FilterIcon",height:512,width:512,svgPath:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z",yOffset:0,xOffset:0},t.k1=n(35183).createIcon(t._t),t.ZP=t.k1},55795:(e,t,n)=>{t.sN={name:"OutlinedQuestionCircleIcon",height:512,width:512,svgPath:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z",yOffset:0,xOffset:0},t.iC=n(35183).createIcon(t.sN),t.ZP=t.iC},9914:(e,t)=>{t.VQ={name:"--pf-chart-color-black-500",value:"#6a6e73",var:"var(--pf-chart-color-black-500)"},t.ZP=t.VQ},84076:(e,t)=>{t.iY={name:"--pf-chart-color-blue-300",value:"#06c",var:"var(--pf-chart-color-blue-300)"},t.ZP=t.iY},72021:(e,t)=>{t.R0={name:"--pf-chart-color-green-300",value:"#4cb140",var:"var(--pf-chart-color-green-300)"},t.ZP=t.R0},82874:(e,t)=>{t.g9={name:"--pf-chart-color-orange-300",value:"#ec7a08",var:"var(--pf-chart-color-orange-300)"},t.ZP=t.g9},38224:(e,t,n)=>{n.r(t),n.d(t,{AlertProvider:()=>l,AppServicesAlertToastGroup:()=>s,AppServicesDrawer:()=>u,AppServicesLoading:()=>d,AppServicesPagination:()=>g,AppServicesTable:()=>E,AppServicesToolbar:()=>w,DurationOptions:()=>I,Metrics:()=>Pt,MetricsI18n:()=>T,ModalProvider:()=>f});var i=n(75418),a=n.n(i),r=n(70655),o=n(84669);const s=({alerts:e,onCloseAlert:t})=>a().createElement(o.AlertGroup,{isToast:!0},e.map((e=>{var{id:n,variant:i,title:s,description:c,dataTestId:l}=e,u=(0,r.__rest)(e,["id","variant","title","description","dataTestId"]);return a().createElement(o.Alert,Object.assign({key:n,isLiveRegion:!0,variant:o.AlertVariant[i],variantLabel:"",title:s,actionClose:a().createElement(o.AlertActionCloseButton,{title:s,onClose:()=>t(n)}),"data-testid":l},u),c)})));var c=n(46332);const l=({children:e})=>{const[t,n]=(0,i.useState)([]),[r,o]=(0,i.useState)([]);(0,i.useEffect)((()=>{const e=r.map((e=>e.key)),n=t.filter((t=>!e.includes(null==t?void 0:t.id))).map((e=>{const{id:t=""}=e,n=setTimeout((()=>l(t)),8e3);return{key:e.id,timeOut:n}}));return o([...r,...n]),()=>r.forEach((e=>(null==e?void 0:e.timeOut)&&clearTimeout(e.timeOut)))}),[t]);const l=e=>{n((t=>[...t.filter((t=>t.id!==e))])),o((t=>[...t.filter((t=>t.key===e))]))};return a().createElement(c.AlertContext.Provider,{value:{addAlert:e=>{const i=(new Date).getTime().toString();n([...t,Object.assign(Object.assign({},e),{id:i})])}}},a().createElement(s,{alerts:t,onCloseAlert:l}),e)},u=({onClose:e,isLoading:t=!1,drawerPanelContentProps:n,drawerHeaderProps:i,isExpanded:s,children:c,panelBodyContent:l,onExpand:u,notRequiredDrawerContentBackground:p,"data-ouia-app-id":h,inlineAlertMessage:f})=>{const m=n||{},{widths:g}=m,v=(0,r.__rest)(m,["widths"]),{text:y,title:_}=i||{},b=a().createElement(o.DrawerPanelContent,Object.assign({widths:g||{default:"width_50"}},v),t?a().createElement(d,null):a().createElement(a().Fragment,null,a().createElement(o.DrawerHead,null,a().createElement(o.TextContent,null,(null==y?void 0:y.label)&&a().createElement(o.Text,{component:(null==y?void 0:y.component)||o.TextVariants.small,className:(null==y?void 0:y.className)||"kafka-ui-appServices-drawer__top-label"},null==y?void 0:y.label),(null==_?void 0:_.value)&&a().createElement(o.Title,{headingLevel:(null==_?void 0:_.headingLevel)||"h2",size:(null==_?void 0:_.size)||o.TitleSizes.xl,className:(null==_?void 0:_.className)||"kafka-ui-appServices-drawer__title"},null==_?void 0:_.value)),a().createElement(o.DrawerActions,null,a().createElement(o.DrawerCloseButton,{onClick:e}))),a().createElement(o.DrawerPanelBody,null,f,l)));return a().createElement(o.Drawer,{isExpanded:s,onExpand:u,"data-ouia-app-id":h},a().createElement(o.DrawerContent,{panelContent:b,className:p?"pf-m-no-background":""},a().createElement(o.DrawerContentBody,{className:"kafka-ui-appServices-drawer__drawer-content-body"},c)))},d=({bullseyeProps:e,spinnerProps:t})=>a().createElement(o.Bullseye,Object.assign({},e),a().createElement(o.Spinner,Object.assign({},t))),p=({variant:e,hideModal:t,title:n})=>i.createElement(o.Modal,{id:"fallback-modal",variant:e,isOpen:!0,"aria-label":"fallback modal",showClose:!0,"aria-describedby":"modal-message",onClose:t,title:n,children:i.createElement(d,{bullseyeProps:{className:"pf-u-p-xl"}})}),h=({activeModal:e,hideModal:t,modalRegistry:n})=>{if(void 0===e)return i.createElement(i.Fragment,null);const a=n.current[e.modalType],r=a.lazyComponent;return i.createElement(i.Suspense,{fallback:i.createElement(p,{hideModal:t,variant:a.variant,title:a.title})},i.createElement(r,Object.assign({hideModal:t,title:a.title,variant:a.variant},e.modalProps)))},f=({children:e})=>{const[t,n]=(0,i.useState)(),a=(0,i.useRef)({}),r={registerModals:e=>{a.current=Object.assign(Object.assign({},a),e)},hideModal:()=>{n(void 0)},showModal:(e,t)=>{n({modalType:e,modalProps:t})}};return i.createElement(i.Fragment,null,i.createElement(h,{activeModal:t,hideModal:r.hideModal,modalRegistry:a}),i.createElement(c.ModalContext.Provider,{value:r},e))};var m=n(98068);const g=e=>{var{page:t,perPage:n=10,itemCount:s,variant:c=o.PaginationVariant.top,isCompact:l,titles:u}=e,d=(0,r.__rest)(e,["page","perPage","itemCount","variant","isCompact","titles"]);const p=(0,m.useHistory)(),h=(0,m.useLocation)(),f=new URLSearchParams(h.search),g=(0,i.useCallback)(((e,t)=>{f.set(e,t.toString())}),[f]),v=(0,i.useCallback)(((e,t)=>{g("page",t.toString()),p.push({search:f.toString()})}),[g,p,f]),y=(0,i.useCallback)(((e,t)=>{g("page","1"),g("perPage",t.toString()),p.push({search:f.toString()})}),[g,p,f]);return a().createElement(o.Pagination,Object.assign({itemCount:s,perPage:n,page:t,onSetPage:v,variant:c,onPerPageSelect:y,isCompact:l},d,{titles:u}))};var v=n(27577),y=n(52530);const _=(0,i.createContext)({activeRow:"",onRowClick:()=>"",loggedInUser:""}),b=_.Provider,S=e=>{const{activeRow:t,onRowClick:n,rowDataTestId:o}=(0,i.useContext)(_),s=e||{},{trRef:c,className:l,rowProps:u,row:d}=s,p=(0,r.__rest)(s,["trRef","className","rowProps","row"]),{rowIndex:h}=u||{rowIndex:1},{isExpanded:f,originalData:m}=d||{};return a().createElement("tr",Object.assign({"data-testid":o,tabIndex:0,ref:c,className:(0,y.css)(l,"pf-c-table-row__item",t&&t===(null==m?void 0:m.rowId)&&"pf-m-selected pf-m-selectable"),hidden:void 0!==f&&!f,onClick:e=>n&&n(e,h,d)},p))},E=({tableProps:e,tableHeaderProps:t,tableBodyProps:n,children:i,activeRow:o,onRowClick:s,rowDataTestId:c,loggedInUser:l})=>{const{cells:u,rows:d,actionResolver:p,onSort:h,sortBy:f,"aria-label":m,variant:g,className:_,shouldDefaultCustomRowWrapper:E=!1}=e,w=(0,r.__rest)(e,["cells","rows","actionResolver","onSort","sortBy","aria-label","variant","className","shouldDefaultCustomRowWrapper"]);return a().createElement(b,{value:{activeRow:o,onRowClick:s,rowDataTestId:c,loggedInUser:l}},a().createElement(v.Table,Object.assign({className:(0,y.css)(E&&"appServices--table-view__table",_),cells:u,variant:g,rows:d,"aria-label":m,actionResolver:p,onSort:h,sortBy:f,rowWrapper:E?e=>a().createElement(S,Object.assign({},e)):void 0},w),a().createElement(v.TableHeader,Object.assign({},t)),a().createElement(v.TableBody,Object.assign({},n)),i))},w=({toolbarProps:e,toggleGroupProps:t,toolbarItems:n,toggleGroupItems:i})=>{const{id:s,clearAllFilters:c,collapseListedFiltersBreakpoint:l="md",inset:u}=e,d=(0,r.__rest)(e,["id","clearAllFilters","collapseListedFiltersBreakpoint","inset"]);return a().createElement(a().Fragment,null,a().createElement(o.Toolbar,Object.assign({id:s,clearAllFilters:c,inset:u,collapseListedFiltersBreakpoint:l},d),a().createElement(o.ToolbarContent,null,t&&a().createElement(o.ToolbarToggleGroup,Object.assign({},t),i),null==n?void 0:n.map(((e,t)=>{const{key:n="appServices",variant:i,className:s,id:c,alignment:l,item:u}=e,d=(0,r.__rest)(e,["key","variant","className","id","alignment","item"]);return a().createElement(o.ToolbarItem,Object.assign({key:`${n}-${t}`,variant:i,className:s,id:c,alignment:l},d),u)})))))},T=JSON.parse('{"metrics":{"axis-label-bytes":"Bytes","axis-label-time":"Time","axis-label-time-full":"Time (HH:mm MM/dd)","used_disk_space":"Used disk space","used_disk_space_popover_header":"Used disk space","used_disk_space_help_text":"Used disk space is the amount of disk space used by the Kafka broker in the instance. This metric enables you to assess available disk space relative to the limit. To reduce used disk space, you can adjust topic retention time or other topic properties as needed.","client_connections":"Client connections","client_connections_helper_text":"Client connections are the total connections across all clients over time. Clients can make multiple connections to multiple brokers in the Kafka instance. This metric enables you to review client activity in the instance and to assess available connections relative to the limit.","client_connections_y_axis":"Connections","connection_attempt_rate":"Connection attempt rate","connection_attempt_rate_help_text":"Connection attempt rate is the number of attempted client connections per second for the Kafka instance over time. This metric enables you to review client activity spikes in the instance and to assess available connections per second relative to the limit.","connection_attempt_rate_yaxis":"Connections/second","log_size_per_partition":"Log size per partition","log_size_per_partition_help_text":"Topic partition size is the log size for each partition in a selected topic. This metric enables you to assess the amount of data used in one or more topic partitions. To reduce the topic partition size, you can decrease the retention time or the retention size, or modify the cleanup policy as needed. You can also increase the number of partitions for the topic.","all_topics":"all topics","incoming_bytes":"Incoming bytes ({{topic}})","outgoing_bytes":"Outgoing bytes ({{topic}})","total_bytes":"Bytes incoming and outgoing","kafka_instance_metrics":"Kafka instance metrics","topic_partition_size":"Topic partition size","topic_metrics":"Topic metrics","total_bytes_popover_header":"Bytes incoming and outgoing","topic_metrics_help_text":"Bytes incoming and outgoing are the total bytes for all topics or total bytes for a selected topic in the Kafka instance. This metric enables you to assess data transfer in and out of your Kafka instance. To modify incoming and outgoing bytes, you can adjust topic message size or other topic properties as needed.","topic_partition_size_popover_header":"Topic partition size","topic_partition_size_help_text":"Topic partition size is the log size for each partition in a selected topic. This metric enables you to assess the amount of data used in one or more topic partitions. To reduce the topic partition size, you can decrease the retention time or the retention size, or modify the cleanup policy as needed. You can also increase the number of partitions for the topic.","topic_incoming_message_rate":"Incoming message rate","topic_incoming_message_rate_y_axis":"Messages/seconds","topic_incoming_message_rate_popover_header":"Incoming messages","topic_incoming_message_rate_help_text":"Incoming message rate is the number of messages per second received by one or more topics in the Kafka instance over time. This metric enables you to verify that messages are produced to topics and that producers are functioning properly. To modify the incoming messages per topic, you can adjust the corresponding producer as needed.","empty_state_no_data_body":"We’re setting up your monitoring instance. Your metrics will appear shortly.","empty_state_no_data_title":"No metrics data","empty_state_no_metrics_data_body":"Adjust your filters and try again.","empty_state_no_metrics_data_title":"No data","empty_state_no_topics_body":"Data will appear shortly after you start using topics.","empty_state_no_topics_title":"No topic data","empty_state_no_topics_create_topic":"Create topic","empty_state_no_filter_body":"In the filter dropdown select a topic to see log size per topic partition.","empty_state_no_filter_title":"Filter by Topic","topics_filter_by_time":"Filter topic metrics by time range","topics_filter_by_topic":"Filter topic metrics by topic name","kafka_instance_filter_by_time":"Filter Kafka instance metrics by time range","metric_not_available":"Data unavailable","metric_kpi_topics_name":"Topics","metric_kpi_topics_description":"Topics are event logs in a Kafka instance. This metric shows the total number of topics in the Kafka instance.","metric_kpi_topicPartitions_name":"Topic partitions","metric_kpi_topicPartitions_description":"Topic partitions are divisions in a topic that are used for data sharding and replication. This metric shows the total number of partitions in the Kafka instance.","metric_kpi_consumerGroup_name":"Consumer groups","metric_kpi_consumerGroup_description":"Consumer groups are sets of consumers that share a data stream generated by producers. This metric shows the total number of consumer groups in the Kafka instance.","refreshing":"Getting data","last-refresh":"Last update","last-refresh-distance":"{{distance}} ago"}}'),C=()=>a().createElement(o.EmptyState,{variant:o.EmptyStateVariant.xs},a().createElement(o.EmptyStateBody,{"data-chromatic":"ignore"},a().createElement(d,null)));var k=n(70251),x=n(31521);const D=()=>{const{t:e}=(0,x.useTranslation)();return a().createElement(o.EmptyState,{variant:o.EmptyStateVariant.xs},a().createElement(o.EmptyStateIcon,{icon:k.TachometerAltIcon}),a().createElement(o.Title,{headingLevel:"h3",size:"lg"},e("metrics.empty_state_no_data_title")),a().createElement(o.EmptyStateBody,null,e("metrics.empty_state_no_data_body")))},O=({topicsKpi:e,topicPartitionsKpi:t,consumerGroupKpi:n,diskSpaceMetrics:i,topicMetrics:r})=>a().createElement(o.PageSection,null,a().createElement(o.Grid,{hasGutter:!0},a().createElement(o.GridItem,{sm:4},e),a().createElement(o.GridItem,{sm:4},t),a().createElement(o.GridItem,{sm:4},n),a().createElement(o.GridItem,{lg:6},i),a().createElement(o.GridItem,{lg:6},r))),M=()=>a().createElement(o.CardBody,null,a().createElement(o.Bullseye,null,a().createElement(o.Spinner,{isSVG:!0,"data-chromatic":"ignore"})));var I,L=n(62482),P=n(9914),A=n(84076);!function(e){e[e.Last5minutes=5]="Last5minutes",e[e.Last15minutes=15]="Last15minutes",e[e.Last30minutes=30]="Last30minutes",e[e.Last1hour=60]="Last1hour",e[e.Last3hours=180]="Last3hours",e[e.Last6hours=360]="Last6hours",e[e.Last12hours=720]="Last12hours",e[e.Last24hours=1440]="Last24hours",e[e.Last2days=2880]="Last2days",e[e.Last7days=10080]="Last7days"}(I||(I={}));const N={[I.Last5minutes]:{interval:60,ticks:6,showDate:!1},[I.Last15minutes]:{interval:180,ticks:6,showDate:!1},[I.Last30minutes]:{interval:300,ticks:7,showDate:!1},[I.Last1hour]:{interval:600,ticks:6,showDate:!1},[I.Last3hours]:{interval:1800,ticks:7,showDate:!1},[I.Last6hours]:{interval:3600,ticks:7,showDate:!1},[I.Last12hours]:{interval:7200,ticks:7,showDate:!1},[I.Last24hours]:{interval:14400,ticks:7,showDate:!0},[I.Last2days]:{interval:28800,ticks:7,showDate:!0},[I.Last7days]:{interval:86400,ticks:8,showDate:!0}},j=350,F={bottom:110,left:120,right:40,top:10},R=()=>a().createElement(o.Flex,{direction:{default:"column"},"data-chromatic":"ignore"},a().createElement(o.FlexItem,null,a().createElement(o.Skeleton,{height:j-F.bottom+"px"})),a().createElement(o.FlexItem,null,a().createElement(o.Skeleton,{height:F.bottom/2-12.5+"px",width:"20%"})),a().createElement(o.FlexItem,null,a().createElement(o.Skeleton,{height:F.bottom/2-12.5+"px",width:"40%"})));function V(){const e=(0,i.useRef)(null),[t,n]=(0,i.useState)(0),a=()=>e.current&&n(e.current.clientWidth);return(0,i.useEffect)((()=>{a()})),(0,i.useEffect)((()=>(window.addEventListener("resize",a),()=>window.removeEventListener("resize",a))),[]),[e,t]}var Z=n(84103),z=n.n(Z),U=n(52170),B=n(39030),Y=n(95639);function $(e,t,n){var i=function(e,t,n){if(n&&!n.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}(e,n.timeZone,n.locale);return i.formatToParts?function(e,t){var n=e.formatToParts(t);return n[n.length-1].value}(i,t):function(e,t){var n=e.format(t).replace(/\u200E/g,""),i=/ [\w-+ ]+$/.exec(n);return i?i[0].substr(1):""}(i,t)}function G(e,t){var n=function(e){if(!J[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n="06/25/2014, 00:00:00"===t||"‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00"===t;J[e]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return J[e]}(t);return n.formatToParts?function(e,t){for(var n=e.formatToParts(t),i=[],a=0;a<n.length;a++){var r=H[n[a].type];r>=0&&(i[r]=parseInt(n[a].value,10))}return i}(n,e):function(e,t){var n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[i[3],i[1],i[2],i[4],i[5],i[6]]}(n,e)}var H={year:0,month:1,day:2,hour:3,minute:4,second:5};var J={};var K=36e5,W={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-])(\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function X(e,t,n){var i,a,r;if(i=W.timezoneZ.exec(e))return 0;if(i=W.timezoneHH.exec(e))return Q(r=parseInt(i[2],10))?(a=r*K,"+"===i[1]?-a:a):NaN;if(i=W.timezoneHHMM.exec(e)){r=parseInt(i[2],10);var o=parseInt(i[3],10);return Q(r,o)?(a=r*K+6e4*o,"+"===i[1]?-a:a):NaN}if(function(e){try{return Intl.DateTimeFormat(void 0,{timeZone:e}),!0}catch(e){return!1}}(e)){t=new Date(t||Date.now());var s=n?t:function(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))}(t),c=q(s,e),l=n?c:function(e,t,n){var i=e.getTime()-t,a=q(new Date(i),n);if(t===a)return t;i-=a-t;var r=q(new Date(i),n);if(a===r)return a;return Math.max(a,r)}(t,c,e);return-l}return 0}function q(e,t){var n=G(e,t),i=Date.UTC(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5]),a=e.getTime(),r=a%1e3;return i-(a-=r>=0?r:1e3+r)}function Q(e,t){return null==t||!(t<0||t>59)}var ee=6e4;function te(e,t){for(var n=e<0?"-":"",i=Math.abs(e).toString();i.length<t;)i="0"+i;return n+i}function ne(e,t){var n=t||"",i=e>0?"-":"+",a=Math.abs(e);return i+te(Math.floor(a/60),2)+n+te(a%60,2)}function ie(e,t){return e%60==0?(e>0?"-":"+")+te(Math.abs(e)/60,2):ne(e,t)}const ae={X:function(e,t,n,i){var a=i._originalDate||e,r=i.timeZone?X(i.timeZone,a)/ee:a.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return ie(r);case"XXXX":case"XX":return ne(r);default:return ne(r,":")}},x:function(e,t,n,i){var a=i._originalDate||e,r=i.timeZone?X(i.timeZone,a)/ee:a.getTimezoneOffset();switch(t){case"x":return ie(r);case"xxxx":case"xx":return ne(r);default:return ne(r,":")}},O:function(e,t,n,i){var a=i._originalDate||e,r=i.timeZone?X(i.timeZone,a)/ee:a.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+function(e,t){var n=e>0?"-":"+",i=Math.abs(e),a=Math.floor(i/60),r=i%60;if(0===r)return n+String(a);var o=t||"";return n+String(a)+o+te(r,2)}(r,":");default:return"GMT"+ne(r,":")}},z:function(e,t,n,i){var a=i._originalDate||e;switch(t){case"z":case"zz":case"zzz":return $("short",a,i);default:return $("long",a,i)}}};var re=n(83946),oe=n(24262),se=36e5,ce={dateTimeDelimeter:/[T ]/,plainTime:/:/,timeZoneDelimeter:/[Z ]/i,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timezone:/([Z+-].*| UTC|(?:[a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?))$/};function le(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var n=t||{},i=null==n.additionalDigits?2:(0,re.Z)(n.additionalDigits);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var a=ue(e),r=de(a.date,i),o=r.year,s=r.restDateString,c=pe(s,o);if(isNaN(c))return new Date(NaN);if(c){var l,u=c.getTime(),d=0;if(a.time&&(d=he(a.time),isNaN(d)))return new Date(NaN);if(a.timezone||n.timeZone){if(l=X(a.timezone||n.timeZone,new Date(u+d)),isNaN(l))return new Date(NaN)}else l=(0,oe.Z)(new Date(u+d)),l=(0,oe.Z)(new Date(u+d+l));return new Date(u+d+l)}return new Date(NaN)}function ue(e){var t,n={},i=e.split(ce.dateTimeDelimeter);if(ce.plainTime.test(i[0])?(n.date=null,t=i[0]):(n.date=i[0],t=i[1],n.timezone=i[2],ce.timeZoneDelimeter.test(n.date)&&(n.date=e.split(ce.timeZoneDelimeter)[0],t=e.substr(n.date.length,e.length))),t){var a=ce.timezone.exec(t);a?(n.time=t.replace(a[1],""),n.timezone=a[1]):n.time=t}return n}function de(e,t){var n,i=ce.YYY[t],a=ce.YYYYY[t];if(n=ce.YYYY.exec(e)||a.exec(e)){var r=n[1];return{year:parseInt(r,10),restDateString:e.slice(r.length)}}if(n=ce.YY.exec(e)||i.exec(e)){var o=n[1];return{year:100*parseInt(o,10),restDateString:e.slice(o.length)}}return{year:null}}function pe(e,t){if(null===t)return null;var n,i,a,r;if(0===e.length)return(i=new Date(0)).setUTCFullYear(t),i;if(n=ce.MM.exec(e))return i=new Date(0),ye(t,a=parseInt(n[1],10)-1)?(i.setUTCFullYear(t,a),i):new Date(NaN);if(n=ce.DDD.exec(e)){i=new Date(0);var o=parseInt(n[1],10);return function(e,t){if(t<1)return!1;var n=ve(e);if(n&&t>366)return!1;if(!n&&t>365)return!1;return!0}(t,o)?(i.setUTCFullYear(t,0,o),i):new Date(NaN)}if(n=ce.MMDD.exec(e)){i=new Date(0),a=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return ye(t,a,s)?(i.setUTCFullYear(t,a,s),i):new Date(NaN)}if(n=ce.Www.exec(e))return _e(t,r=parseInt(n[1],10)-1)?fe(t,r):new Date(NaN);if(n=ce.WwwD.exec(e)){r=parseInt(n[1],10)-1;var c=parseInt(n[2],10)-1;return _e(t,r,c)?fe(t,r,c):new Date(NaN)}return null}function he(e){var t,n,i;if(t=ce.HH.exec(e))return be(n=parseFloat(t[1].replace(",",".")))?n%24*se:NaN;if(t=ce.HHMM.exec(e))return be(n=parseInt(t[1],10),i=parseFloat(t[2].replace(",",".")))?n%24*se+6e4*i:NaN;if(t=ce.HHMMSS.exec(e)){n=parseInt(t[1],10),i=parseInt(t[2],10);var a=parseFloat(t[3].replace(",","."));return be(n,i,a)?n%24*se+6e4*i+1e3*a:NaN}return null}function fe(e,t,n){t=t||0,n=n||0;var i=new Date(0);i.setUTCFullYear(e,0,4);var a=7*t+n+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+a),i}var me=[31,28,31,30,31,30,31,31,30,31,30,31],ge=[31,29,31,30,31,30,31,31,30,31,30,31];function ve(e){return e%400==0||e%4==0&&e%100!=0}function ye(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;var i=ve(e);if(i&&n>ge[t])return!1;if(!i&&n>me[t])return!1}return!0}function _e(e,t,n){return!(t<0||t>52)&&(null==n||!(n<0||n>6))}function be(e,t,n){return(null==e||!(e<0||e>=25))&&((null==t||!(t<0||t>=60))&&(null==n||!(n<0||n>=60)))}var Se=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function Ee(e){return z()(e,{units:"iec"}).toString()}const we=e=>N[e].showDate,Te=(e,{showDate:t}={showDate:!1})=>function(e,t,n){var i=String(t),a=n||{},r=i.match(Se);if(r){var o=le(e,a);i=r.reduce((function(e,t){return"'"===t[0]?e:e.replace(t,"'"+ae[t[0]](o,t,null,a)+"'")}),i)}return(0,Y.Z)(e,i,a)}(function(e,t,n){var i=le(e,n),a=X(t,i,!0)||0,r=new Date(i.getTime()-a);return new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())}((0,B.Z)(e/1e3),"utc"),t?"HH:mm'\n'MM/dd":"HH:mm");function Ce(e,t){const n=[...e];n.sort();const i=parseInt(n[n.length-1])||Date.now();return new Array(Math.max(N[t].ticks,n.length)).fill(i).map(((e,n)=>(0,U.Z)(new Date(e),{seconds:N[t].interval*n}).getTime()))}const ke=({metrics:e,duration:t,chartName:n,xLabel:i,yLabel:r,usageLimit:o,formatValue:s=(e=>`${e}`),isLoading:c,emptyState:l})=>{const{t:u}=(0,x.useTranslation)(),[d,p]=V(),h=p&&p>650?6:3,{chartData:f,legendData:m,tickValues:g}=function(e,t,n,i,a){const r=[a?{name:i,symbol:{fill:P.ZP.value,type:"threshold"}}:void 0,{name:n,symbol:{fill:A.ZP.value}}].filter((e=>!!e)),o=A.ZP.value,s=P.ZP.value,c=[],l=[],u=[];Object.entries(e).map((([e,t])=>{l.push({name:n,x:parseInt(e,10),y:t})})),c.push({areaColor:o,softLimitColor:s,area:l,softLimit:u});const d=Ce(Object.keys(e),t);a&&d.forEach((e=>u.push({name:i,x:e,y:a})));return{legendData:r,chartData:c,tickValues:d}}(e,t,n,u("Limit"),o),v=Object.keys(e).length>0,y=we(t);switch(!0){case c:return a().createElement(R,null);case!v:return l;default:return a().createElement("div",{ref:d},a().createElement(L.Chart,{ariaTitle:u("metrics.used_disk_space"),containerComponent:a().createElement(L.ChartVoronoiContainer,{labels:({datum:e})=>`${e.name}: ${s(e.y)}`,constrainToVisibleArea:!0}),legendPosition:"bottom-left",legendComponent:a().createElement(L.ChartLegend,{orientation:"horizontal",data:m,itemsPerRow:h}),height:j,padding:F,themeColor:L.ChartThemeColor.multiUnordered,width:p,legendAllowWrap:!0},a().createElement(L.ChartAxis,{label:"\n"+u(i||y?"metrics.axis-label-time-full":"metrics.axis-label-time"),tickValues:g,tickFormat:e=>Te(e,{showDate:y})}),a().createElement(L.ChartAxis,{label:"\n\n\n\n\n"+(r||n),dependentAxis:!0,tickFormat:s}),a().createElement(L.ChartGroup,null,f.map(((e,t)=>a().createElement(L.ChartArea,{key:`chart-area-${t}`,data:e.area,style:{data:{}}})))),a().createElement(L.ChartThreshold,{key:"chart-softlimit",data:f[0].softLimit,style:{data:{stroke:f[0].softLimitColor}}})))}return null};const xe=[n(72021).ZP.value,A.ZP.value],De=({partitions:e,topic:t,duration:n,isLoading:i,emptyState:r})=>{const{t:o}=(0,x.useTranslation)(),[s,c]=V(),l=c&&c>650?6:3,{chartData:u,legendData:d,tickValues:p}=function(e,t,n){const i=[],a=[];Object.entries(e).map((([e,n],r)=>{const o=`${t}: ${e}`,s=xe[r];i.push({name:o});const c=[];Object.entries(n).map((([e,t])=>{c.push({name:o,x:parseInt(e,10),y:t})})),a.push({color:s,area:c})}));const r=Ce(Array.from(new Set(Object.values(e).flatMap((e=>Object.keys(e))))),n);return{legendData:i,chartData:a,tickValues:r}}(e,t,n),h=Object.keys(e).length>0,f=we(n);switch(!0){case i:return a().createElement(R,null);case!h:return r;default:return a().createElement("div",{ref:s},a().createElement(L.Chart,{ariaTitle:o("metrics.log_size_per_partition"),containerComponent:a().createElement(L.ChartVoronoiContainer,{labels:({datum:e})=>`${e.name}: ${Ee(e.y)}`,constrainToVisibleArea:!0}),legendPosition:"bottom-left",legendComponent:a().createElement(L.ChartLegend,{data:d,itemsPerRow:l}),height:j,padding:F,themeColor:L.ChartThemeColor.multiUnordered,width:c,legendAllowWrap:!0},a().createElement(L.ChartAxis,{label:"\n"+o(f?"metrics.axis-label-time-full":"metrics.axis-label-time"),tickValues:p,tickFormat:e=>Te(e,{showDate:f})}),a().createElement(L.ChartAxis,{label:"\n\n\n\n\n"+o("metrics.axis-label-bytes"),dependentAxis:!0,tickFormat:Ee}),a().createElement(L.ChartGroup,null,u.map(((e,t)=>a().createElement(L.ChartArea,{key:`chart-area-${t}`,data:e.area}))))))}};var Oe=n(55795);const Me=({title:e,description:t})=>a().createElement(o.Popover,{"aria-label":"Basic popover",headerContent:a().createElement("div",null,e),bodyContent:a().createElement("div",null,t)},a().createElement(Oe.ZP,null));var Ie=n(82874);const Le=({incomingTopicsData:e,outgoingTopicsData:t,selectedTopic:n,duration:i,isLoading:r,emptyState:o})=>{const{t:s}=(0,x.useTranslation)(),[c,l]=V(),u=l&&l>650?6:3,{chartData:d,legendData:p,tickValues:h}=function(e,t,n,i,a){const r=[],o=[],s=Pe(e,i);if(s.length>0){const e=A.ZP.value;o.push({color:e,line:s}),r.push({name:i,symbol:{fill:e}})}const c=Pe(t,a);if(c.length>0){const e=Ie.ZP.value;o.push({color:e,line:c}),r.push({name:a,symbol:{fill:e}})}const l=Ce(Array.from(new Set([...Object.keys(e),...Object.keys(t)])),n);return{legendData:r,chartData:o,tickValues:l}}(e,t,i,s("metrics.incoming_bytes",{topic:n||s("metrics.all_topics")}),s("metrics.outgoing_bytes",{topic:n||s("metrics.all_topics")})),f=Object.keys(e).length>0||Object.keys(t).length>0,m=we(i);switch(!0){case r:return a().createElement(R,null);case!f:return o;default:return a().createElement("div",{ref:c},a().createElement(L.Chart,{ariaTitle:s("metrics.total_bytes"),containerComponent:a().createElement(L.ChartVoronoiContainer,{labels:({datum:e})=>`${e.name}: ${Ee(e.y)}`,constrainToVisibleArea:!0}),legendAllowWrap:!0,legendPosition:"bottom-left",legendComponent:a().createElement(L.ChartLegend,{data:p,itemsPerRow:u}),height:j,padding:F,themeColor:L.ChartThemeColor.multiUnordered,width:l},a().createElement(L.ChartAxis,{label:"\n"+s(m?"metrics.axis-label-time-full":"metrics.axis-label-time"),tickValues:h,tickCount:N[i].ticks,tickFormat:e=>Te(e,{showDate:m})}),a().createElement(L.ChartAxis,{label:"\n\n\n\n\n"+s("metrics.axis-label-bytes"),dependentAxis:!0,tickFormat:Ee}),a().createElement(L.ChartGroup,null,d.map(((e,t)=>a().createElement(L.ChartLine,{key:`chart-line-${t}`,data:e.line,style:{data:{stroke:e.color}}}))))))}};function Pe(e,t){const n=[];return Object.entries(e).map((([e,i])=>{n.push({name:t,x:parseInt(e,10),y:i})})),n}const Ae=()=>{const{t:e}=(0,x.useTranslation)();return a().createElement(o.EmptyState,{variant:o.EmptyStateVariant.xs},a().createElement(o.EmptyStateIcon,{icon:k.ExclamationTriangleIcon,color:"var(--pf-global--warning-color--100)"}),a().createElement(o.Title,{headingLevel:"h3",size:"md"},e("metrics.metric_not_available")))},Ne=()=>{const{t:e}=(0,x.useTranslation)();return a().createElement(o.EmptyState,{variant:o.EmptyStateVariant.xs},a().createElement(o.EmptyStateIcon,{icon:k.SearchIcon}),a().createElement(o.Title,{headingLevel:"h3",size:"lg"},e("metrics.empty_state_no_metrics_data_title")),a().createElement(o.EmptyStateBody,null,e("metrics.empty_state_no_metrics_data_body")))},je=({onCreateTopic:e})=>{const{t}=(0,x.useTranslation)();return a().createElement(o.EmptyState,{variant:o.EmptyStateVariant.xs},a().createElement(o.EmptyStateIcon,{icon:k.WrenchIcon}),a().createElement(o.Title,{headingLevel:"h3",size:"lg"},t("metrics.empty_state_no_topics_title")),a().createElement(o.EmptyStateBody,null,t("metrics.empty_state_no_topics_body")),e&&a().createElement(o.Button,{variant:"primary",onClick:e},t("metrics.empty_state_no_topics_create_topic")))},Fe=()=>{const{t:e}=(0,x.useTranslation)();return a().createElement(o.EmptyState,{variant:o.EmptyStateVariant.xs},a().createElement(o.EmptyStateIcon,{icon:k.FilterIcon}),a().createElement(o.Title,{headingLevel:"h3",size:"lg"},e("metrics.empty_state_no_filter_title")),a().createElement(o.EmptyStateBody,null,e("metrics.empty_state_no_filter_body")))},Re={[I.Last5minutes]:"Last 5 minutes",[I.Last15minutes]:"Last 15 minutes",[I.Last30minutes]:"Last 30 minutes",[I.Last1hour]:"Last 1 hour",[I.Last3hours]:"Last 3 hours",[I.Last6hours]:"Last 6 hours",[I.Last12hours]:"Last 12 hours",[I.Last24hours]:"Last 24 hours",[I.Last2days]:"Last 2 days",[I.Last7days]:"Last 7 days"},Ve=({duration:e,keyText:t,ariaLabel:n,disableToolbar:r,onDurationChange:s})=>{const[c,l]=(0,i.useState)(!1),u=`filter-by-time-${Date.now()}`;return a().createElement(o.ToolbarItem,null,a().createElement("label",{hidden:!0,id:u},n),a().createElement(o.Select,{variant:o.SelectVariant.single,"aria-labelledby":u,onToggle:e=>{l(e)},onSelect:(e,t)=>{const n=Object.entries(Re).find((([e,n])=>n===t));n&&s(parseInt(n[0],10)),l(!1)},selections:Re[e],isOpen:c,isDisabled:r},(e=>[a().createElement(o.SelectGroup,{label:"Relative time ranges",key:`${e}-group`},Object.values(Re).map(((t,n)=>a().createElement(o.SelectOption,{key:`${e}-${n}`,value:t}))))])(t)))};var Ze=n(8755);const ze={default:"150px",sm:"150px",md:"150px",lg:"200px",xl:"200px","2xl":"200px"},Ue=({selectedTopic:e,topicList:t=[],disableToolbar:n,ariaLabel:r,onSetSelectedTopic:s})=>{const{t:c}=(0,x.useTranslation)(),[l,u]=(0,i.useState)(!1),[d,p]=(0,i.useState)(Math.random());(0,i.useEffect)((()=>p(Math.random())),[t]);const h=c("All topics"),f=e=>[a().createElement(o.SelectOption,{key:"topic-filter-0",value:h}),a().createElement(o.SelectGroup,{label:"Filter by topic",key:"topic-filter-group"},e.map(((e,t)=>a().createElement(o.SelectOption,{key:`topic-filter-${t+1}`,value:e}))))],m=n||0===t.length,g=`filter-by-topic-${Date.now()}`;return a().createElement(o.ToolbarItem,{widths:ze},a().createElement("label",{hidden:!0,id:g},r),a().createElement(o.Select,{key:d,variant:o.SelectVariant.single,onToggle:e=>{u(e)},onSelect:(e,t)=>{s("All topics"!==t?t:void 0),u(!1)},selections:e||h,isOpen:l,placeholderText:a().createElement(a().Fragment,null,a().createElement(Ze.ZP,null)," All topics"),"aria-labelledby":g,onFilter:(e,n)=>{const i=t.filter((e=>-1!=e.indexOf(n)))||[];return f(i)},isGrouped:!0,hasInlineFilter:!0,isDisabled:m,style:{width:"100%"}},f(t)))};var Be=n(28655);const Ye=({isRefreshing:e,lastUpdated:t=Date.now(),onRefresh:n})=>{const{t:r}=(0,x.useTranslation)(),[s,c]=(0,i.useState)("");return(0,i.useEffect)((()=>{function e(){c((0,Be.formatDistanceToNow)(t))}const n=setInterval(e,5e3);return e(),()=>clearInterval(n)}),[t]),a().createElement(a().Fragment,null,a().createElement(o.ToolbarItem,null,a().createElement(o.Button,{variant:"plain","aria-label":"sync",onClick:n},e?a().createElement("span",{className:"pf-c-button__progress"},a().createElement(o.Spinner,{size:"md"})):a().createElement(k.SyncAltIcon,null))),a().createElement(o.ToolbarItem,{alignment:{default:"alignRight"},style:{color:"var(--pf-global--Color--200)"}},a().createElement("div",{className:"pf-u-font-size-xs"},e?r("metrics.refreshing"):a().createElement(a().Fragment,null,r("metrics.last-refresh"),a().createElement("br",null),r("metrics.last-refresh-distance",{distance:s})))))},$e=({title:e,selectedTopic:t,topicList:n,duration:i,isDisabled:r,isRefreshing:s,lastUpdated:c,onSetTimeDuration:l,onRefresh:u,onSetSelectedTopic:d})=>{const{t:p}=(0,x.useTranslation)();return a().createElement(a().Fragment,null,a().createElement(o.CardHeader,null,a().createElement(o.CardTitle,{component:"h2"},e)),a().createElement(o.Divider,null),a().createElement(o.Toolbar,null,a().createElement(o.ToolbarContent,null,a().createElement(Ue,{ariaLabel:p("metrics.topics_filter_by_topic"),selectedTopic:t,onSetSelectedTopic:d,topicList:n,disableToolbar:r}),a().createElement(Ve,{ariaLabel:p("metrics.topics_filter_by_time"),duration:i,onDurationChange:l,disableToolbar:r,keyText:"topic-metrics-time-filter"}),a().createElement(Ye,{isRefreshing:s,lastUpdated:c,onRefresh:u}))),a().createElement(o.Divider,null))},Ge=({topics:e,incomingTopicsData:t,outgoingTopicsData:n,incomingMessageRate:i,selectedTopic:r,duration:s,partitions:c,backendUnavailable:l,isInitialLoading:u,isLoading:d,isRefreshing:p,isJustCreated:h,lastUpdated:f,onCreateTopic:m,onRefresh:g,onSelectedTopic:v,onDurationChange:y})=>{const{t:_}=(0,x.useTranslation)(),b=0===e.length,S=void 0!==r&&void 0===e.find((e=>e===r)),E=S?a().createElement(Ne,null):a().createElement(Ae,null);return a().createElement(o.Card,{"data-testid":"metrics-topics"},a().createElement($e,{title:_("metrics.topic_metrics"),duration:s,onSetTimeDuration:y,isDisabled:l||h||b||d,isRefreshing:p,selectedTopic:r,onSetSelectedTopic:v,onRefresh:g,topicList:e,lastUpdated:f}),(()=>{switch(!0){case u:return a().createElement(M,null);case l:return a().createElement(o.CardBody,null,a().createElement(Ae,null));case h&&!1===b:return a().createElement(o.CardBody,null,a().createElement(je,null));case h&&!0===b:return a().createElement(o.CardBody,null,a().createElement(je,{onCreateTopic:m}));case void 0!==r:return a().createElement(a().Fragment,null,a().createElement(He,null),a().createElement(o.CardBody,null,a().createElement(Le,{incomingTopicsData:t,outgoingTopicsData:n,selectedTopic:r,duration:s,isLoading:d,emptyState:E})),a().createElement(o.Divider,null),a().createElement(Ke,null),a().createElement(o.CardBody,null,a().createElement(ke,{chartName:_("metrics.topic_incoming_message_rate"),yLabel:_("metrics.topic_incoming_message_rate_y_axis"),metrics:i,duration:s,isLoading:d,emptyState:E})),a().createElement(o.Divider,null),a().createElement(Je,null),a().createElement(o.CardBody,null,a().createElement(De,{partitions:c,topic:r,duration:s,isLoading:d,emptyState:E})));default:return a().createElement(a().Fragment,null,a().createElement(He,null),a().createElement(o.CardBody,null,a().createElement(Le,{incomingTopicsData:t,outgoingTopicsData:n,selectedTopic:r,duration:s,isLoading:d,emptyState:E})),a().createElement(o.Divider,null),a().createElement(Ke,null),a().createElement(o.CardBody,null,a().createElement(ke,{chartName:_("metrics.topic_incoming_message_rate"),yLabel:_("metrics.topic_incoming_message_rate_y_axis"),metrics:i,duration:s,isLoading:d,emptyState:E})),a().createElement(o.Divider,null),a().createElement(Je,null),a().createElement(o.CardBody,null,a().createElement(Fe,null)))}})())},He=()=>{const{t:e}=(0,x.useTranslation)();return a().createElement(o.CardTitle,{component:"h3"},e("metrics.total_bytes")," ",a().createElement(Me,{title:e("metrics.total_bytes_popover_header"),description:e("metrics.topic_metrics_help_text")}))},Je=()=>{const{t:e}=(0,x.useTranslation)();return a().createElement(o.CardTitle,{component:"h3"},e("metrics.topic_partition_size")," ",a().createElement(Me,{title:e("metrics.topic_partition_size_popover_header"),description:e("metrics.topic_partition_size_help_text")}))},Ke=()=>{const{t:e}=(0,x.useTranslation)();return a().createElement(o.CardTitle,{component:"h3"},e("metrics.topic_incoming_message_rate")," ",a().createElement(Me,{title:e("metrics.topic_incoming_message_rate_popover_header"),description:e("metrics.topic_incoming_message_rate_help_text")}))},We=({title:e,isDisabled:t,isRefreshing:n,lastUpdated:i,duration:r,onSetTimeDuration:s,onRefresh:c})=>{const{t:l}=(0,x.useTranslation)();return a().createElement(a().Fragment,null,a().createElement(o.CardHeader,null,a().createElement(o.CardTitle,{component:"h2"},e)),a().createElement(o.Divider,null),a().createElement(o.Toolbar,null,a().createElement(o.ToolbarContent,null,a().createElement(Ve,{ariaLabel:l("metrics.kafka_instance_filter_by_time"),duration:r,onDurationChange:s,keyText:"kafka-metrics-time-filter",disableToolbar:t}),a().createElement(Ye,{isRefreshing:n,lastUpdated:i,onRefresh:c}))),a().createElement(o.Divider,null))},Xe=({usedDiskMetrics:e,clientConnectionsMetrics:t,connectionAttemptRateMetrics:n,duration:i,lastUpdated:r,backendUnavailable:s,isInitialLoading:c,isLoading:l,isRefreshing:u,isJustCreated:d,onRefresh:p,onDurationChange:h})=>{const{t:f}=(0,x.useTranslation)();return a().createElement(o.Card,{"data-testid":"metrics-kafka-instance"},a().createElement(We,{title:f("metrics.kafka_instance_metrics"),duration:i,lastUpdated:r,onSetTimeDuration:h,isDisabled:s||d||l,isRefreshing:u,onRefresh:p}),(()=>{switch(!0){case c:return a().createElement(M,null);case s:return a().createElement(o.CardBody,null,a().createElement(Ae,null));case d:return a().createElement(o.CardBody,null,a().createElement(D,null));default:return a().createElement(a().Fragment,null,a().createElement(qe,{title:"used_disk_space",helperText:"used_disk_space_help_text"}),a().createElement(o.CardBody,null,a().createElement(ke,{chartName:f("metrics.used_disk_space"),yLabel:f("metrics.axis-label-bytes"),metrics:e,duration:i,formatValue:Ee,usageLimit:1e3*Math.pow(1024,3),isLoading:l,emptyState:a().createElement(Ae,null)})),a().createElement(o.Divider,null),a().createElement(qe,{title:"client_connections",helperText:"client_connections_helper_text"}),a().createElement(o.CardBody,null,a().createElement(ke,{chartName:f("metrics.client_connections"),yLabel:f("metrics.client_connections_y_axis"),metrics:t,duration:i,usageLimit:100,isLoading:l,emptyState:a().createElement(Ae,null)})),a().createElement(o.Divider,null),a().createElement(qe,{title:"connection_attempt_rate",helperText:"connection_attempt_rate_help_text"}),a().createElement(o.CardBody,null,a().createElement(ke,{chartName:f("metrics.connection_attempt_rate"),yLabel:f("metrics.connection_attempt_rate_yaxis"),metrics:n,duration:i,usageLimit:100,isLoading:l,emptyState:a().createElement(Ae,null)})))}})())},qe=({title:e,helperText:t})=>{const{t:n}=(0,x.useTranslation)();return a().createElement(o.CardTitle,{component:"h3"},n(`metrics.${e}`)," ",a().createElement(Me,{title:n(`metrics.${e}`),description:n(`metrics.${t}`)}))};var Qe=n(38801),et=n(66310);const tt=(0,et.createModel)({lastUpdated:void 0,duration:60,usedDiskSpaceMetrics:{},clientConnectionsMetrics:{},connectionAttemptRateMetrics:{},fetchFailures:0},{events:{fetchSuccess:e=>Object.assign({},e),fetchFail:()=>({}),refresh:()=>({}),selectTopic:e=>({selectedTopic:e}),selectDuration:e=>({duration:e})}}),nt=tt.assign({lastUpdated:()=>new Date}),it=tt.assign(((e,t)=>{const{usedDiskSpaceMetrics:n,clientConnectionsMetrics:i,connectionAttemptRateMetrics:a}=t;return{usedDiskSpaceMetrics:n,clientConnectionsMetrics:i,connectionAttemptRateMetrics:a}}),"fetchSuccess"),at=tt.assign({fetchFailures:e=>e.fetchFailures+1},"fetchFail"),rt=tt.assign({fetchFailures:()=>0},"refresh"),ot=tt.assign({duration:(e,t)=>t.duration,usedDiskSpaceMetrics:{},clientConnectionsMetrics:{},connectionAttemptRateMetrics:{}},"selectDuration"),st={initial:"loading",states:{loading:{invoke:{src:"api"},on:{fetchFail:{actions:at,target:"failure"}}},failure:{after:{1e3:[{cond:"canRetryFetching",target:"loading"},{target:"#kafkaInstanceMetrics.criticalFail"}]}}}},ct=tt.createMachine({id:"kafkaInstanceMetrics",context:tt.initialContext,initial:"initialLoading",states:{initialLoading:Object.assign(Object.assign({},st),{tags:"initialLoading",entry:nt,on:{fetchSuccess:[{cond:"isJustCreated",actions:it,target:"#kafkaInstanceMetrics.withResponse"},{actions:it,target:"justCreated"}]}}),callApi:Object.assign(Object.assign({},st),{tags:"loading",entry:nt,on:{fetchSuccess:{actions:it,target:"#kafkaInstanceMetrics.withResponse"}}}),criticalFail:{tags:"failed",on:{refresh:{actions:rt,target:"callApi"}}},justCreated:{tags:"justCreated",on:{refresh:{target:"initialLoading"}}},withResponse:{tags:"withResponse",on:{refresh:{target:"refreshing"},selectDuration:{actions:ot,target:"callApi"}}},refreshing:{tags:"refreshing",entry:nt,invoke:{src:"api"},on:{fetchSuccess:{actions:it,target:"withResponse"},fetchFail:{target:"withResponse"}}}}},{guards:{canRetryFetching:e=>e.fetchFailures<3,isJustCreated:(e,t)=>"fetchSuccess"===t.type&&(Object.keys(t.clientConnectionsMetrics).length>0||Object.keys(t.connectionAttemptRateMetrics).length>0||Object.keys(t.usedDiskSpaceMetrics).length>0)}}),lt=(0,et.createModel)({lastUpdated:void 0,selectedTopic:void 0,duration:60,kafkaTopics:[],metricsTopics:[],bytesOutgoing:{},bytesIncoming:{},bytesPerPartition:{},incomingMessageRate:{},fetchFailures:0},{events:{fetchSuccess:e=>Object.assign({},e),fetchFail:()=>({}),refresh:()=>({}),selectTopic:e=>({selectedTopic:e}),selectDuration:e=>({duration:e})}}),ut=lt.assign({lastUpdated:()=>new Date}),dt=lt.assign(((e,t)=>{const{kafkaTopics:n,metricsTopics:i,bytesPerPartition:a,bytesIncoming:r,bytesOutgoing:o,incomingMessageRate:s}=t;return{kafkaTopics:n,metricsTopics:i,bytesPerPartition:a,bytesIncoming:r,bytesOutgoing:o,incomingMessageRate:s}}),"fetchSuccess"),pt=lt.assign({fetchFailures:e=>e.fetchFailures+1},"fetchFail"),ht=lt.assign({fetchFailures:()=>0},"refresh"),ft=lt.assign({selectedTopic:(e,t)=>t.selectedTopic},"selectTopic"),mt=lt.assign({duration:(e,t)=>t.duration},"selectDuration"),gt={initial:"loading",states:{loading:{invoke:{src:"api"},on:{fetchFail:{actions:pt,target:"failure"}}},failure:{after:{1e3:[{cond:"canRetryFetching",target:"loading"},{target:"#topicsMetrics.criticalFail"}]}}}},vt=lt.createMachine({id:"topicsMetrics",context:lt.initialContext,initial:"initialLoading",states:{initialLoading:Object.assign(Object.assign({},gt),{tags:"initialLoading",entry:ut,on:{fetchSuccess:[{cond:"isJustCreated",actions:dt,target:"#topicsMetrics.withResponse"},{actions:dt,target:"justCreated"}]}}),callApi:Object.assign(Object.assign({},gt),{tags:"loading",entry:ut,on:{fetchSuccess:{actions:dt,target:"#topicsMetrics.withResponse"}}}),criticalFail:{tags:"failed",on:{refresh:{actions:ht,target:"callApi"}}},justCreated:{tags:"justCreated",on:{refresh:{target:"initialLoading"}}},withResponse:{tags:"withResponse",initial:"idle",states:{idle:{},refreshing:{tags:"refreshing",entry:ut,invoke:{src:"api"},on:{fetchSuccess:{actions:dt,target:"#topicsMetrics.withResponse"},fetchFail:{target:"#topicsMetrics.withResponse"}}}},on:{refresh:{target:"#topicsMetrics.withResponse.refreshing"},selectTopic:{actions:ft,target:"callApi"},selectDuration:{actions:mt,target:"callApi"}}}}},{guards:{canRetryFetching:e=>e.fetchFailures<3,isJustCreated:(e,t)=>"fetchSuccess"===t.type&&(Object.keys(t.bytesIncoming).length>0||Object.keys(t.bytesOutgoing).length>0||Object.keys(t.bytesPerPartition).length>0||Object.keys(t.incomingMessageRate).length>0)}}),yt=(0,et.createModel)({topics:void 0,topicPartitions:void 0,consumerGroups:void 0,fetchFailures:0},{events:{fetch:()=>({}),fetchSuccess:e=>Object.assign({},e),fetchFail:()=>({}),refresh:()=>({})}}),_t=yt.assign(((e,t)=>{const{topics:n,topicPartitions:i,consumerGroups:a}=t;return{topics:n,topicPartitions:i,consumerGroups:a}}),"fetchSuccess"),bt=yt.assign({fetchFailures:e=>e.fetchFailures+1},"fetchFail"),St=yt.assign({fetchFailures:()=>0},"refresh"),Et={initial:"loading",states:{loading:{invoke:{src:"api"},on:{fetchFail:{actions:bt,target:"failure"}}},failure:{after:{1e3:[{cond:"canRetryFetching",target:"loading"},{target:"#kpis.criticalFail"}]}}}},wt=yt.createMachine({id:"kpis",context:yt.initialContext,initial:"initialLoading",states:{initialLoading:Object.assign(Object.assign({},Et),{tags:"initialLoading",on:{fetchSuccess:[{cond:"isJustCreated",actions:_t,target:"#kpis.withResponse"},{actions:_t,target:"justCreated"}]}}),callApi:Object.assign(Object.assign({},Et),{tags:"loading",on:{fetchSuccess:{actions:_t,target:"#kpis.withResponse"}}}),criticalFail:{tags:"failed",on:{refresh:{actions:St,target:"callApi"}}},justCreated:{tags:"justCreated",on:{refresh:{target:"initialLoading"}}},withResponse:{tags:"withResponse",initial:"idle",states:{idle:{},refreshing:{tags:"refreshing",invoke:{src:"api"},on:{fetchSuccess:{actions:_t,target:"#kpis.withResponse"},fetchFail:{target:"#kpis.withResponse"}}}},on:{refresh:{target:"#kpis.withResponse.refreshing"}}}}},{guards:{canRetryFetching:e=>e.fetchFailures<3,isJustCreated:(e,t)=>"fetchSuccess"===t.type&&(void 0!==t.topics||void 0!==t.topicPartitions||void 0!==t.consumerGroups)}}),Tt=(0,i.createContext)(null),Ct=({children:e,getKafkaInstanceMetrics:t})=>{const n=function({getKafkaInstanceMetrics:e}){return(0,Qe.useInterpret)(ct.withConfig({services:{api:t=>n=>{e({duration:t.duration,interval:N[t.duration].interval}).then((e=>n(tt.events.fetchSuccess(e)))).catch((e=>{console.error("Failed fetching data",e),n(tt.events.fetchFail())}))}}}),{devTools:!0})}({getKafkaInstanceMetrics:t});return a().createElement(Tt.Provider,{value:{service:n}},e)};function kt(){const{service:e}=(0,i.useContext)(Tt),t=(0,i.useCallback)((e=>Object.assign(Object.assign({},e.context),{isInitialLoading:e.hasTag("initialLoading"),isRefreshing:e.hasTag("refreshing"),isLoading:e.hasTag("loading"),isFailed:e.hasTag("failed"),isJustCreated:e.hasTag("justCreated")})),[]),{usedDiskSpaceMetrics:n,clientConnectionsMetrics:a,connectionAttemptRateMetrics:r,duration:o,lastUpdated:s,isInitialLoading:c,isLoading:l,isRefreshing:u,isFailed:d,isJustCreated:p}=(0,Qe.useSelector)(e,t),h=(0,i.useCallback)((t=>e.send(tt.events.selectDuration(t))),[e]);return{usedDiskSpaceMetrics:n,clientConnectionsMetrics:a,connectionAttemptRateMetrics:r,lastUpdated:s,isInitialLoading:c,isLoading:l,isRefreshing:u,isFailed:d,isJustCreated:p,duration:o,onDurationChange:h,onRefresh:(0,i.useCallback)((()=>e.send(tt.events.refresh())),[e])}}const xt=(0,i.createContext)(null),Dt=({children:e,getTopicsMetrics:t})=>{const n=function({getTopicsMetrics:e}){return(0,Qe.useInterpret)(vt.withConfig({services:{api:t=>n=>{e({selectedTopic:t.selectedTopic,duration:t.duration,interval:N[t.duration].interval}).then((e=>n(lt.events.fetchSuccess(e)))).catch((e=>{console.error("Failed fetching data",e),n(lt.events.fetchFail())}))}}}),{devTools:!0})}({getTopicsMetrics:t});return a().createElement(xt.Provider,{value:{service:n}},e)};function Ot(){const{service:e}=(0,i.useContext)(xt),t=(0,i.useCallback)((e=>Object.assign(Object.assign({},e.context),{isInitialLoading:e.hasTag("initialLoading"),isRefreshing:e.hasTag("refreshing"),isLoading:e.hasTag("loading"),isFailed:e.hasTag("failed"),isJustCreated:e.hasTag("justCreated")})),[]),{selectedTopic:n,duration:a,kafkaTopics:r,metricsTopics:o,bytesIncoming:s,bytesOutgoing:c,bytesPerPartition:l,incomingMessageRate:u,isInitialLoading:d,isLoading:p,isRefreshing:h,isFailed:f,isJustCreated:m,lastUpdated:g}=(0,Qe.useSelector)(e,t),v=(0,i.useCallback)((t=>e.send(lt.events.selectTopic(t))),[e]),y=(0,i.useCallback)((t=>e.send(lt.events.selectDuration(t))),[e]),_=(0,i.useCallback)((()=>e.send(lt.events.refresh())),[e]);return{isInitialLoading:d,isLoading:p,isRefreshing:h,isFailed:f,isJustCreated:m,lastUpdated:g,topics:(0,i.useMemo)((()=>{const e=Array.from(new Set([...r,...o]));return e.sort(((e,t)=>e.localeCompare(t))),e}),[r,o]),selectedTopic:n,duration:a,bytesIncoming:s,bytesOutgoing:c,bytesPerPartition:l,incomingMessageRate:u,onTopicChange:v,onDurationChange:y,onRefresh:_}}const Mt=({metric:e,name:t,popover:n,isLoading:i})=>a().createElement(o.Card,{isFullHeight:!0},a().createElement(o.CardTitle,{component:"h3"},t," ",a().createElement(Me,{title:t,description:n})),a().createElement(o.CardBody,null,a().createElement(o.Bullseye,null,!i&&(void 0===e?a().createElement(Ae,null):a().createElement(o.Title,{headingLevel:"h3",size:"4xl"},e)),i&&a().createElement(o.Skeleton,{width:"50px",shape:"square"})))),It=(0,i.createContext)(null),Lt=({children:e,getMetricsKpi:t})=>{const n=function({getMetricsKpi:e}){return(0,Qe.useInterpret)(wt.withConfig({services:{api:()=>t=>{e().then((e=>t(yt.events.fetchSuccess(e)))).catch((e=>{console.error("Failed fetching data",e),t(yt.events.fetchFail())}))}}}),{devTools:!0})}({getMetricsKpi:t});return a().createElement(It.Provider,{value:{service:n}},e)};const Pt=({getKafkaInstanceMetrics:e,getTopicsMetrics:t,getMetricsKpi:n,onCreateTopic:i})=>a().createElement(Dt,{getTopicsMetrics:t},a().createElement(Ct,{getKafkaInstanceMetrics:e},a().createElement(Lt,{getMetricsKpi:n},a().createElement(At,{onCreateTopic:i})))),At=({onCreateTopic:e})=>{const{t}=(0,x.useTranslation)(),n=kt(),r=Ot(),o=function(){const{service:e}=(0,i.useContext)(It),t=(0,i.useCallback)((e=>Object.assign(Object.assign({},e.context),{isInitialLoading:e.hasTag("initialLoading"),isRefreshing:e.hasTag("refreshing"),isLoading:e.hasTag("loading"),isFailed:e.hasTag("failed"),isJustCreated:e.hasTag("justCreated")})),[]),{topics:n,topicPartitions:a,consumerGroups:r,isInitialLoading:o,isLoading:s,isRefreshing:c,isFailed:l,isJustCreated:u}=(0,Qe.useSelector)(e,t);return{isInitialLoading:o,isLoading:s,isRefreshing:c,isFailed:l,isJustCreated:u,topics:n,topicPartitions:a,consumerGroups:r,onRefresh:(0,i.useCallback)((()=>e.send(yt.events.refresh())),[e])}}();switch(!0){case n.isInitialLoading||r.isInitialLoading||o.isInitialLoading:return a().createElement(C,null);case n.isFailed&&r.isFailed&&r.isFailed:case n.isJustCreated&&r.isJustCreated&&o.isJustCreated:return a().createElement(D,null);default:return a().createElement(O,{topicsKpi:a().createElement(Mt,{metric:o.topics,isLoading:o.isInitialLoading||o.isLoading,name:t("metrics.metric_kpi_topics_name"),popover:t("metrics.metric_kpi_topics_description")}),topicPartitionsKpi:a().createElement(Mt,{metric:o.topicPartitions,isLoading:o.isInitialLoading||o.isLoading,name:t("metrics.metric_kpi_topicPartitions_name"),popover:t("metrics.metric_kpi_topicPartitions_description")}),consumerGroupKpi:a().createElement(Mt,{metric:o.consumerGroups,isLoading:o.isInitialLoading||o.isLoading,name:t("metrics.metric_kpi_consumerGroup_name"),popover:t("metrics.metric_kpi_consumerGroup_description")}),diskSpaceMetrics:a().createElement(Nt,null),topicMetrics:a().createElement(jt,{onCreateTopic:e})})}},Nt=()=>{const{isInitialLoading:e,isLoading:t,isRefreshing:n,isFailed:i,isJustCreated:r,duration:o,lastUpdated:s,usedDiskSpaceMetrics:c,clientConnectionsMetrics:l,connectionAttemptRateMetrics:u,onDurationChange:d,onRefresh:p}=kt();return a().createElement(Xe,{usedDiskMetrics:c,clientConnectionsMetrics:l,connectionAttemptRateMetrics:u,duration:o,backendUnavailable:i,isInitialLoading:e,isLoading:t,isRefreshing:n,isJustCreated:r,lastUpdated:s,onRefresh:p,onDurationChange:d})},jt=({onCreateTopic:e})=>{const{isInitialLoading:t,isLoading:n,isRefreshing:i,isFailed:r,isJustCreated:o,lastUpdated:s,selectedTopic:c,duration:l,topics:u,bytesIncoming:d,bytesOutgoing:p,bytesPerPartition:h,incomingMessageRate:f,onDurationChange:m,onTopicChange:g,onRefresh:v}=Ot();return a().createElement(Ge,{backendUnavailable:r,topics:u,incomingTopicsData:d,outgoingTopicsData:p,partitions:h,incomingMessageRate:f,duration:l,isInitialLoading:t,isLoading:n,isRefreshing:i,isJustCreated:o,lastUpdated:s,selectedTopic:c,onRefresh:v,onSelectedTopic:g,onDurationChange:m,onCreateTopic:e})}},25885:(e,t,n)=>{function i(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{Z:()=>i})},67820:(e,t,n)=>{function i(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,{Z:()=>i})},67861:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(67820),a=n(53906),r=n(25885);function o(e,t){(0,r.Z)(2,arguments);var n=(0,a.Z)(e),o=(0,i.Z)(t);return isNaN(o)?new Date(NaN):o?(n.setDate(n.getDate()+o),n):n}},35750:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(67820),a=n(53906),r=n(25885);function o(e,t){(0,r.Z)(2,arguments);var n=(0,a.Z)(e),o=(0,i.Z)(t);if(isNaN(o))return new Date(NaN);if(!o)return n;var s=n.getDate(),c=new Date(n.getTime());c.setMonth(n.getMonth()+o+1,0);var l=c.getDate();return s>=l?c:(n.setFullYear(c.getFullYear(),c.getMonth(),s),n)}},39030:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(53906),a=n(67820),r=n(25885);function o(e){(0,r.Z)(1,arguments);var t=(0,a.Z)(e);return(0,i.Z)(1e3*t)}},52170:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(88632),a=n(40641),r=n(25885),o=n(67820);function s(e,t){if((0,r.Z)(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var n=t.years?(0,o.Z)(t.years):0,s=t.months?(0,o.Z)(t.months):0,c=t.weeks?(0,o.Z)(t.weeks):0,l=t.days?(0,o.Z)(t.days):0,u=t.hours?(0,o.Z)(t.hours):0,d=t.minutes?(0,o.Z)(t.minutes):0,p=t.seconds?(0,o.Z)(t.seconds):0,h=(0,a.Z)(e,s+12*n),f=(0,i.Z)(h,l+7*c),m=d+60*u,g=p+60*m,v=1e3*g,y=new Date(f.getTime()-v);return y}},88632:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(67820),a=n(67861),r=n(25885);function o(e,t){(0,r.Z)(2,arguments);var n=(0,i.Z)(t);return(0,a.Z)(e,-n)}},40641:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(67820),a=n(35750),r=n(25885);function o(e,t){(0,r.Z)(2,arguments);var n=(0,i.Z)(t);return(0,a.Z)(e,-n)}},53906:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(25885);function a(e){(0,i.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}},70655:(e,t,n)=>{n.r(t),n.d(t,{__extends:()=>a,__assign:()=>r,__rest:()=>o,__decorate:()=>s,__param:()=>c,__metadata:()=>l,__awaiter:()=>u,__generator:()=>d,__createBinding:()=>p,__exportStar:()=>h,__values:()=>f,__read:()=>m,__spread:()=>g,__spreadArrays:()=>v,__spreadArray:()=>y,__await:()=>_,__asyncGenerator:()=>b,__asyncDelegator:()=>S,__asyncValues:()=>E,__makeTemplateObject:()=>w,__importStar:()=>C,__importDefault:()=>k,__classPrivateFieldGet:()=>x,__classPrivateFieldSet:()=>D});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var r=function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};function o(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}function s(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=Promise))((function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var p=Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]};function h(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||p(t,e,n)}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,a,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var r=arguments[t],o=0,s=r.length;o<s;o++,a++)i[a]=r[o];return i}function y(e,t,n){if(n||2===arguments.length)for(var i,a=0,r=t.length;a<r;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,a=n.apply(e,t||[]),r=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){a[e]&&(i[e]=function(t){return new Promise((function(n,i){r.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{(n=a[e](t)).value instanceof _?Promise.resolve(n.value.v).then(c,l):u(r[0][2],n)}catch(e){u(r[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),r.shift(),r.length&&s(r[0][0],r[0][1])}}function S(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,a){t[i]=e[i]?function(t){return(n=!n)?{value:_(e[i](t)),done:"return"===i}:a?a(t):t}:a}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,a){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,a,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var T=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&p(t,e,n);return T(t,e),t}function k(e){return e&&e.__esModule?e:{default:e}}function x(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function D(e,t,n,i,a){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?a.call(e,n):a?a.value=n:t.set(e,n),n}},35294:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(77944);t.Machine=function(e,t,n){return void 0===n&&(n=e.context),new i.StateNode(e,t,n)},t.createMachine=function(e,t){return new i.StateNode(e,t)}},17556:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(80552),a=n(39448),r=n(29660),o=n(50509),s=n(52119),c=n(41428);var l=function(){function e(e){var t,n=this;this.actions=[],this.activities=a.EMPTY_ACTIVITY_MAP,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||a.EMPTY_ACTIVITY_MAP,this.meta=s.getMeta(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=null!==(t=Array.isArray(e.tags)?new Set(e.tags):e.tags)&&void 0!==t?t:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return s.nextEvents(n.configuration)}})}return e.from=function(t,n){return t instanceof e?t.context!==n?new e({value:t.value,context:n,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t:new e({value:t,context:n,_event:c.initEvent,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,n){if(t instanceof e){if(!t.actions.length)return t;var i=c.initEvent;return new e({value:t.value,context:n,_event:i,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,n)},e.prototype.toStrings=function(e,t){var n=this;if(void 0===e&&(e=this.value),void 0===t&&(t="."),o.isString(e))return[e];var a=o.keys(e);return a.concat.apply(a,i.__spreadArray([],i.__read(a.map((function(i){return n.toStrings(e[i],t).map((function(e){return i+t+e}))}))),!1))},e.prototype.toJSON=function(){var e=this,t=(e.configuration,e.transitions,e.tags),n=(e.machine,i.__rest(e,["configuration","transitions","tags","machine"]));return i.__assign(i.__assign({},n),{tags:Array.from(t)})},e.prototype.matches=function(e){return o.matchesState(e,this.value)},e.prototype.hasTag=function(e){return this.tags.has(e)},e.prototype.can=function(e){var t;return r.IS_PRODUCTION&&o.warn(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false."),!!(null===(t=this.machine)||void 0===t?void 0:t.transition(this,e).changed)},e}();t.State=l,t.bindActionToState=function(e,t){var n=e.exec;return i.__assign(i.__assign({},e),{exec:void 0!==n?function(){return n(t.context,t.event,{action:e,state:t,_event:t._event})}:void 0})},t.isState=function(e){return!o.isString(e)&&("value"in e&&"history"in e)},t.stateValuesEqual=function e(t,n){if(t===n)return!0;if(void 0===t||void 0===n)return!1;if(o.isString(t)||o.isString(n))return t===n;var i=o.keys(t),a=o.keys(n);return i.length===a.length&&i.every((function(i){return e(t[i],n[i])}))}},77944:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(80552),a=n(39448),r=n(29660),o=n(50509),s=n(27108),c=n(52119),l=n(73487),u=n(41428),d=n(17556),p=n(70880),h=n(30290),f="",m="*",g={},v=function(e){return"#"===e[0]},y=function(){function e(t,n,s){var l,d=this;void 0===s&&(s="context"in t?t.context:void 0),this.config=t,this._context=s,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign({actions:{},guards:{},services:{},activities:{},delays:{}},n),this.parent=this.options._parent,this.key=this.config.key||this.options._key||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:a.STATE_DELIMITER),this.id=this.config.id||i.__spreadArray([this.machine.key],i.__read(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&o.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(l=this.config.schema)&&void 0!==l?l:{},this.description=this.config.description,r.IS_PRODUCTION||o.warn(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?o.mapValues(this.config.states,(function(t,n){var a,r=new e(t,{_parent:d,_key:n});return Object.assign(d.idMap,i.__assign(((a={})[r.id]=r,a),r.idMap)),r})):g;var p=0;!function e(t){var n,a;t.order=p++;try{for(var r=i.__values(c.getChildren(t)),o=r.next();!o.done;o=r.next()){e(o.value)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(a=r.return)&&a.call(r)}finally{if(n)throw n.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some((function(e){return e.event===f})):f in this.config.on),this.strict=!!this.config.strict,this.onEntry=o.toArray(this.config.entry||this.config.onEntry).map((function(e){return u.toActionObject(e)})),this.onExit=o.toArray(this.config.exit||this.config.onExit).map((function(e){return u.toActionObject(e)})),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=o.toArray(this.config.invoke).map((function(e,t){var n,a;if(o.isMachine(e))return d.machine.options.services=i.__assign(((n={})[e.id]=e,n),d.machine.options.services),h.toInvokeDefinition({src:e.id,id:e.id});if(o.isString(e.src))return h.toInvokeDefinition(i.__assign(i.__assign({},e),{id:e.id||e.src,src:e.src}));if(o.isMachine(e.src)||o.isFunction(e.src)){var r="".concat(d.id,":invocation[").concat(t,"]");return d.machine.options.services=i.__assign(((a={})[r]=e.src,a),d.machine.options.services),h.toInvokeDefinition(i.__assign(i.__assign({id:r},e),{src:r}))}var s=e.src;return h.toInvokeDefinition(i.__assign(i.__assign({id:s.type},e),{src:s}))})),this.activities=o.toArray(this.config.activities).concat(this.invoke).map((function(e){return u.toActivityDefinition(e)})),this.transition=this.transition.bind(this),this.tags=o.toArray(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||c.getAllStateNodes(this).forEach((function(e){return e.on}))},e.prototype.withConfig=function(t,n){var a=this.options,r=a.actions,o=a.activities,s=a.guards,c=a.services,l=a.delays;return new e(this.config,{actions:i.__assign(i.__assign({},r),t.actions),activities:i.__assign(i.__assign({},o),t.activities),guards:i.__assign(i.__assign({},s),t.guards),services:i.__assign(i.__assign({},c),t.services),delays:i.__assign(i.__assign({},l),t.delays)},null!=n?n:this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return o.isFunction(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:o.mapValues(this.states,(function(e){return e.definition})),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce((function(e,t){return e[t.eventType]=e[t.eventType]||[],e[t.eventType].push(t),e}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var t=e===f,n=this.transitions.filter((function(n){var i=n.eventType===e;return t?i:i||n.eventType===m}));return this.__cache.candidates[e]=n,n},e.prototype.getDelayedTransitions=function(){var e=this,t=this.config.after;if(!t)return[];var n=function(t,n){var i=o.isFunction(t)?"".concat(e.id,":delay[").concat(n,"]"):t,a=u.after(i,e.id);return e.onEntry.push(u.send(a,{delay:t})),e.onExit.push(u.cancel(a)),a};return(o.isArray(t)?t.map((function(e,t){var a=n(e.delay,t);return i.__assign(i.__assign({},e),{event:a})})):o.flatten(o.keys(t).map((function(e,a){var r=t[e],s=o.isString(r)?{target:r}:r,c=isNaN(+e)?e:+e,l=n(c,a);return o.toArray(s).map((function(e){return i.__assign(i.__assign({},e),{event:l,delay:c})}))})))).map((function(t){var n=t.delay;return i.__assign(i.__assign({},e.formatTransition(t)),{delay:n})}))},e.prototype.getStateNodes=function(e){var t,n=this;if(!e)return[];var i=e instanceof d.State?e.value:o.toStateValue(e,this.delimiter);if(o.isString(i)){var a=this.getStateNode(i).initial;return void 0!==a?this.getStateNodes(((t={})[i]=a,t)):[this,this.states[i]]}var r=o.keys(i),s=r.map((function(e){return n.getStateNode(e)}));return s.push(this),s.concat(r.reduce((function(e,t){var a=n.getStateNode(t).getStateNodes(i[t]);return e.concat(a)}),[]))},e.prototype.handles=function(e){var t=o.getEventType(e);return this.events.includes(t)},e.prototype.resolveState=function(e){var t=Array.from(c.getConfiguration([],this.getStateNodes(e.value)));return new d.State(i.__assign(i.__assign({},e),{value:this.resolve(e.value),configuration:t,done:c.isInFinalState(t,this),tags:c.getTagsFromConfiguration(t)}))},e.prototype.transitionLeafNode=function(e,t,n){var i=this.getStateNode(e).next(t,n);return i&&i.transitions.length?i:this.next(t,n)},e.prototype.transitionCompoundNode=function(e,t,n){var i=o.keys(e),a=this.getStateNode(i[0])._transition(e[i[0]],t,n);return a&&a.transitions.length?a:this.next(t,n)},e.prototype.transitionParallelNode=function(e,t,n){var a,r,s={};try{for(var c=i.__values(o.keys(e)),l=c.next();!l.done;l=c.next()){var u=l.value,d=e[u];if(d){var p=this.getStateNode(u)._transition(d,t,n);p&&(s[u]=p)}}}catch(e){a={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(a)throw a.error}}var h=o.keys(s).map((function(e){return s[e]})),f=o.flatten(h.map((function(e){return e.transitions})));if(!h.some((function(e){return e.transitions.length>0})))return this.next(t,n);var m=o.flatten(h.map((function(e){return e.entrySet}))),g=o.flatten(o.keys(s).map((function(e){return s[e].configuration})));return{transitions:f,entrySet:m,exitSet:o.flatten(h.map((function(e){return e.exitSet}))),configuration:g,source:t,actions:o.flatten(o.keys(s).map((function(e){return s[e].actions})))}},e.prototype._transition=function(e,t,n){return o.isString(e)?this.transitionLeafNode(e,t,n):1===o.keys(e).length?this.transitionCompoundNode(e,t,n):this.transitionParallelNode(e,t,n)},e.prototype.next=function(e,t){var n,a,r,s=this,c=t.name,l=[],u=[];try{for(var d=i.__values(this.getCandidates(c)),p=d.next();!p.done;p=d.next()){var h=p.value,f=h.cond,m=h.in,g=e.context,y=!m||(o.isString(m)&&v(m)?e.matches(o.toStateValue(this.getStateNodeById(m).path,this.delimiter)):o.matchesState(o.toStateValue(m,this.delimiter),o.path(this.path.slice(0,-2))(e.value))),_=!1;try{_=!f||o.evaluateGuard(this.machine,f,g,t,e)}catch(e){throw new Error("Unable to evaluate guard '".concat(f.name||f.type,"' in transition for event '").concat(c,"' in state node '").concat(this.id,"':\n").concat(e.message))}if(_&&y){void 0!==h.target&&(u=h.target),l.push.apply(l,i.__spreadArray([],i.__read(h.actions),!1)),r=h;break}}}catch(e){n={error:e}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}if(r){if(!u.length)return{transitions:[r],entrySet:[],exitSet:[],configuration:e.value?[this]:[],source:e,actions:l};var b=o.flatten(u.map((function(t){return s.getRelativeStateNodes(t,e.historyValue)}))),S=!!r.internal;return{transitions:[r],entrySet:S?[]:o.flatten(b.map((function(e){return s.nodesFromChild(e)}))),exitSet:S?[]:[this],configuration:b,source:e,actions:l}}},e.prototype.nodesFromChild=function(e){if(e.escapes(this))return[];for(var t=[],n=e;n&&n!==this;)t.push(n),n=n.parent;return t.push(this),t},e.prototype.escapes=function(e){if(this===e)return!1;for(var t=this.parent;t;){if(t===e)return!1;t=t.parent}return!0},e.prototype.getActions=function(e,t,n,a){var r,s,l,d,p=c.getConfiguration([],a?this.getStateNodes(a.value):[this]),h=e.configuration.length?c.getConfiguration(p,e.configuration):p;try{for(var f=i.__values(h),m=f.next();!m.done;m=f.next()){var g=m.value;c.has(p,g)||e.entrySet.push(g)}}catch(e){r={error:e}}finally{try{m&&!m.done&&(s=f.return)&&s.call(f)}finally{if(r)throw r.error}}try{for(var v=i.__values(p),y=v.next();!y.done;y=v.next()){g=y.value;c.has(h,g)&&!c.has(e.exitSet,g.parent)||e.exitSet.push(g)}}catch(e){l={error:e}}finally{try{y&&!y.done&&(d=v.return)&&d.call(v)}finally{if(l)throw l.error}}e.source||(e.exitSet=[],e.entrySet.push(this));var _=o.flatten(e.entrySet.map((function(i){var a=[];if("final"!==i.type)return a;var r=i.parent;if(!r.parent)return a;a.push(u.done(i.id,i.doneData),u.done(r.id,i.doneData?o.mapContext(i.doneData,t,n):void 0));var s=r.parent;return"parallel"===s.type&&c.getChildren(s).every((function(t){return c.isInFinalState(e.configuration,t)}))&&a.push(u.done(s.id)),a})));e.exitSet.sort((function(e,t){return t.order-e.order})),e.entrySet.sort((function(e,t){return e.order-t.order}));var b=new Set(e.entrySet),S=new Set(e.exitSet),E=i.__read([o.flatten(Array.from(b).map((function(e){return i.__spreadArray(i.__spreadArray([],i.__read(e.activities.map((function(e){return u.start(e)}))),!1),i.__read(e.onEntry),!1)}))).concat(_.map(u.raise)),o.flatten(Array.from(S).map((function(e){return i.__spreadArray(i.__spreadArray([],i.__read(e.onExit),!1),i.__read(e.activities.map((function(e){return u.stop(e)}))),!1)})))],2),w=E[0],T=E[1];return u.toActionObjects(T.concat(e.actions).concat(w),this.machine.options.actions)},e.prototype.transition=function(e,t,n){void 0===e&&(e=this.initialState);var a,s=o.toSCXMLEvent(t);if(e instanceof d.State)a=void 0===n?e:this.resolveState(d.State.from(e,n));else{var l=o.isString(e)?this.resolve(o.pathToStateValue(this.getResolvedPath(e))):this.resolve(e),u=null!=n?n:this.machine.context;a=this.resolveState(d.State.from(l,u))}if(!r.IS_PRODUCTION&&s.name===m)throw new Error("An event cannot have the wildcard type ('".concat(m,"')"));if(this.strict&&!this.events.includes(s.name)&&!o.isBuiltInEvent(s.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(s.name,"'"));var p=this._transition(a.value,a,s)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:a,actions:[]},h=c.getConfiguration([],this.getStateNodes(a.value)),f=p.configuration.length?c.getConfiguration(h,p.configuration):h;return p.configuration=i.__spreadArray([],i.__read(f),!1),this.resolveTransition(p,a,s)},e.prototype.resolveRaisedTransition=function(e,t,n){var a,r=e.actions;return(e=this.transition(e,t))._event=n,e.event=n.data,(a=e.actions).unshift.apply(a,i.__spreadArray([],i.__read(r),!1)),e},e.prototype.resolveTransition=function(e,t,n,a){var r,h,m=this;void 0===n&&(n=u.initEvent),void 0===a&&(a=this.machine.context);var g=e.configuration,v=!t||e.transitions.length>0,y=v?c.getValue(this.machine,g):void 0,_=t?t.historyValue?t.historyValue:e.source?this.machine.historyValue(t.value):void 0:void 0,b=t?t.context:a,S=this.getActions(e,b,n,t),E=t?i.__assign({},t.activities):{};try{for(var w=i.__values(S),T=w.next();!T.done;T=w.next()){var C=T.value;C.type===l.start?E[C.activity.id||C.activity.type]=C:C.type===l.stop&&(E[C.activity.id||C.activity.type]=!1)}}catch(e){r={error:e}}finally{try{T&&!T.done&&(h=w.return)&&h.call(w)}finally{if(r)throw r.error}}var k=i.__read(u.resolveActions(this,t,b,n,S,this.machine.config.preserveActionOrder),2),x=k[0],D=k[1],O=i.__read(o.partition(x,(function(e){return e.type===l.raise||e.type===l.send&&e.to===s.SpecialTargets.Internal})),2),M=O[0],I=O[1],L=x.filter((function(e){var t;return e.type===l.start&&(null===(t=e.activity)||void 0===t?void 0:t.type)===l.invoke})),P=L.reduce((function(e,t){return e[t.activity.id]=p.createInvocableActor(t.activity,m.machine,D,n),e}),t?i.__assign({},t.children):{}),A=y?e.configuration:t?t.configuration:[],N=c.isInFinalState(A,this),j=new d.State({value:y||t.value,context:D,_event:n,_sessionid:t?t._sessionid:null,historyValue:y?_?o.updateHistoryValue(_,y):void 0:t?t.historyValue:void 0,history:!y||e.source?t:void 0,actions:y?I:[],activities:y?E:t?t.activities:{},events:[],configuration:A,transitions:e.transitions,children:P,done:N,tags:null==t?void 0:t.tags,machine:this}),F=b!==D;j.changed=n.name===l.update||F;var R=j.history;R&&delete R.history;var V=!N&&(this._transient||g.some((function(e){return e._transient})));if(!(v||V&&n.name!==f))return j;var Z=j;if(!N)for(V&&(Z=this.resolveRaisedTransition(Z,{type:l.nullEvent},n));M.length;){var z=M.shift();Z=this.resolveRaisedTransition(Z,z._event,n)}var U=Z.changed||(R?!!Z.actions.length||F||typeof R.value!=typeof Z.value||!d.stateValuesEqual(Z.value,R.value):void 0);return Z.changed=U,Z.history=R,Z.tags=c.getTagsFromConfiguration(Z.configuration),Z},e.prototype.getStateNode=function(e){if(v(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var t=this.states[e];if(!t)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return t},e.prototype.getStateNodeById=function(e){var t=v(e)?e.slice("#".length):e;if(t===this.id)return this;var n=this.machine.idMap[t];if(!n)throw new Error("Child state node '#".concat(t,"' does not exist on machine '").concat(this.id,"'"));return n},e.prototype.getStateNodeByPath=function(e){if("string"==typeof e&&v(e))try{return this.getStateNodeById(e.slice(1))}catch(e){}for(var t=o.toStatePath(e,this.delimiter).slice(),n=this;t.length;){var i=t.shift();if(!i.length)break;n=n.getStateNode(i)}return n},e.prototype.resolve=function(e){var t,n=this;if(!e)return this.initialStateValue||g;switch(this.type){case"parallel":return o.mapValues(this.initialStateValue,(function(t,i){return t?n.getStateNode(i).resolve(e[i]||t):g}));case"compound":if(o.isString(e)){var i=this.getStateNode(e);return"parallel"===i.type||"compound"===i.type?((t={})[e]=i.initialStateValue,t):e}return o.keys(e).length?o.mapValues(e,(function(e,t){return e?n.getStateNode(t).resolve(e):g})):this.initialStateValue||{};default:return e||g}},e.prototype.getResolvedPath=function(e){if(v(e)){var t=this.machine.idMap[e.slice("#".length)];if(!t)throw new Error("Unable to find state node '".concat(e,"'"));return t.path}return o.toStatePath(e,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var e,t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)t=o.mapFilterValues(this.states,(function(e){return e.initialStateValue||g}),(function(e){return!("history"===e.type)}));else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));t=c.isLeafNode(this.states[this.initial])?this.initial:((e={})[this.initial]=this.states[this.initial].initialStateValue,e)}else t={};return this.__cache.initialStateValue=t,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(e,t){var n=this.getStateNodes(e);return this.resolveTransition({configuration:n,entrySet:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,void 0,t)},Object.defineProperty(e.prototype,"initialState",{get:function(){this._init();var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var e;if("history"===this.type){var t=this.config;e=o.isString(t.target)&&v(t.target)?o.pathToStateValue(this.machine.getStateNodeById(t.target).path.slice(this.path.length-1)):t.target}return e},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(e,t,n){return void 0===n&&(n=!0),n?"history"===e.type?e.resolveHistory(t):e.initialStateNodes:[e]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var e=this;if(c.isLeafNode(this))return[this];if("compound"===this.type&&!this.initial)return r.IS_PRODUCTION||o.warn(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var t=o.toStatePaths(this.initialStateValue);return o.flatten(t.map((function(t){return e.getFromRelativePath(t)})))},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var t=i.__read(e),n=t[0],a=t.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var r=this.getStateNode(n);if("history"===r.type)return r.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(a)},e.prototype.historyValue=function(e){if(o.keys(this.states).length)return{current:e||this.initialStateValue,states:o.mapFilterValues(this.states,(function(t,n){if(!e)return t.historyValue();var i=o.isString(e)?void 0:e[n];return t.historyValue(i||t.initialStateValue)}),(function(e){return!e.history}))}},e.prototype.resolveHistory=function(e){var t=this;if("history"!==this.type)return[this];var n=this.parent;if(!e){var i=this.target;return i?o.flatten(o.toStatePaths(i).map((function(e){return n.getFromRelativePath(e)}))):n.initialStateNodes}var a=o.nestedPath(n.path,"states")(e).current;return o.isString(a)?[n.getStateNode(a)]:o.flatten(o.toStatePaths(a).map((function(e){return"deep"===t.history?n.getFromRelativePath(e):[n.states[e[0]]]})))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var e=this,t=o.flatten(o.keys(this.states).map((function(t){return e.states[t].stateIds})));return[this.id].concat(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var e,t,n,a;if(this.__cache.events)return this.__cache.events;var r=this.states,s=new Set(this.ownEvents);if(r)try{for(var c=i.__values(o.keys(r)),l=c.next();!l.done;l=c.next()){var u=r[l.value];if(u.states)try{for(var d=(n=void 0,i.__values(u.events)),p=d.next();!p.done;p=d.next()){var h=p.value;s.add("".concat(h))}}catch(e){n={error:e}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(s)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter((function(e){return!(!e.target&&!e.actions.length&&e.internal)})).map((function(e){return e.eventType})));return Array.from(e)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(e){var t=this;if(void 0!==e)return e.map((function(e){if(!o.isString(e))return e;var n=e[0]===t.delimiter;if(n&&!t.parent)return t.getStateNodeByPath(e.slice(1));var i=n?t.key+e:e;if(!t.parent)return t.getStateNodeByPath(i);try{return t.parent.getStateNodeByPath(i)}catch(e){throw new Error("Invalid transition definition for state node '".concat(t.id,"':\n").concat(e.message))}}))},e.prototype.formatTransition=function(e){var t=this,n=o.normalizeTarget(e.target),a="internal"in e?e.internal:!n||n.some((function(e){return o.isString(e)&&e[0]===t.delimiter})),r=this.machine.options.guards,s=this.resolveTarget(n),c=i.__assign(i.__assign({},e),{actions:u.toActionObjects(o.toArray(e.actions)),cond:o.toGuard(e.cond,r),target:s,source:this,internal:a,eventType:e.event,toJSON:function(){return i.__assign(i.__assign({},c),{target:c.target?c.target.map((function(e){return"#".concat(e.id)})):void 0,source:"#".concat(t.id)})}});return c},e.prototype.formatTransitions=function(){var e,t,n,a=this;if(this.config.on)if(Array.isArray(this.config.on))n=this.config.on;else{var s=this.config.on,c=m,l=s[c],d=void 0===l?[]:l,p=i.__rest(s,["*"]);n=o.flatten(o.keys(p).map((function(e){r.IS_PRODUCTION||e!==f||o.warn(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(a.id,'".'));var t,n,i,s,c=o.toTransitionConfigArray(e,p[e]);return r.IS_PRODUCTION||(t=a,n=e,i=c.slice(0,-1).some((function(e){return!("cond"in e)&&!("in"in e)&&(o.isString(e.target)||o.isMachine(e.target))})),s=n===f?"the transient event":"event '".concat(n,"'"),o.warn(!i,"One or more transitions for ".concat(s," on state '").concat(t.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")),c})).concat(o.toTransitionConfigArray(m,d)))}else n=[];var h=this.config.always?o.toTransitionConfigArray("",this.config.always):[],g=this.config.onDone?o.toTransitionConfigArray(String(u.done(this.id)),this.config.onDone):[];r.IS_PRODUCTION||o.warn(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var v=o.flatten(this.invoke.map((function(e){var t=[];return e.onDone&&t.push.apply(t,i.__spreadArray([],i.__read(o.toTransitionConfigArray(String(u.doneInvoke(e.id)),e.onDone)),!1)),e.onError&&t.push.apply(t,i.__spreadArray([],i.__read(o.toTransitionConfigArray(String(u.error(e.id)),e.onError)),!1)),t}))),y=this.after,_=o.flatten(i.__spreadArray(i.__spreadArray(i.__spreadArray(i.__spreadArray([],i.__read(g),!1),i.__read(v),!1),i.__read(n),!1),i.__read(h),!1).map((function(e){return o.toArray(e).map((function(e){return a.formatTransition(e)}))})));try{for(var b=i.__values(y),S=b.next();!S.done;S=b.next()){var E=S.value;_.push(E)}}catch(t){e={error:t}}finally{try{S&&!S.done&&(t=b.return)&&t.call(b)}finally{if(e)throw e.error}}return _},e}();t.StateNode=y},41428:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(80552),a=n(29660),r=n(50509),o=n(27108),s=n(73487),c=r.toSCXMLEvent({type:s.init});function l(e,t){return t&&t[e]||void 0}function u(e,t){var n;if(r.isString(e)||"number"==typeof e){var a=l(e,t);n=r.isFunction(a)?{type:e,exec:a}:a||{type:e,exec:void 0}}else if(r.isFunction(e))n={type:e.name||e.toString(),exec:e};else{a=l(e.type,t);if(r.isFunction(a))n=i.__assign(i.__assign({},e),{exec:a});else if(a){var o=a.type||e.type;n=i.__assign(i.__assign(i.__assign({},a),e),{type:o})}else n=e}return n}var d=function(e,t){return e?(r.isArray(e)?e:[e]).map((function(e){return u(e,t)})):[]};function p(e){var t=u(e);return i.__assign(i.__assign({id:r.isString(e)?e:t.id},t),{type:t.type})}function h(e){return{type:s.raise,_event:r.toSCXMLEvent(e.event)}}function f(e,t){return{to:t?t.to:void 0,type:s.send,event:r.isFunction(e)?e:r.toEventObject(e),delay:t?t.delay:void 0,id:t&&void 0!==t.id?t.id:r.isFunction(e)?e.name:r.getEventType(e)}}function m(e,t,n,a){var o,s={_event:n},c=r.toSCXMLEvent(r.isFunction(e.event)?e.event(t,n.data,s):e.event);if(r.isString(e.delay)){var l=a&&a[e.delay];o=r.isFunction(l)?l(t,n.data,s):l}else o=r.isFunction(e.delay)?e.delay(t,n.data,s):e.delay;var u=r.isFunction(e.to)?e.to(t,n.data,s):e.to;return i.__assign(i.__assign({},e),{to:u,_event:c,event:c.data,delay:o})}function g(e,t){return f(e,i.__assign(i.__assign({},t),{to:o.SpecialTargets.Parent}))}var v=function(e,t){return{context:e,event:t}};var y=function(e,t,n){return i.__assign(i.__assign({},e),{value:r.isString(e.expr)?e.expr:e.expr(t,n.data,{_event:n})})};function _(e,t,n){var i=r.isFunction(e.activity)?e.activity(t,n.data):e.activity,a="string"==typeof i?{id:i}:i;return{type:o.ActionTypes.Stop,activity:a}}t.after=function(e,t){var n=t?"#".concat(t):"";return"".concat(o.ActionTypes.After,"(").concat(e,")").concat(n)},t.assign=function(e){return{type:s.assign,assignment:e}},t.cancel=function(e){return{type:s.cancel,sendId:e}},t.choose=function(e){return{type:o.ActionTypes.Choose,conds:e}},t.done=function(e,t){var n="".concat(o.ActionTypes.DoneState,".").concat(e),i={type:n,data:t,toString:function(){return n}};return i},t.doneInvoke=function(e,t){var n="".concat(o.ActionTypes.DoneInvoke,".").concat(e),i={type:n,data:t,toString:function(){return n}};return i},t.error=function(e,t){var n="".concat(o.ActionTypes.ErrorPlatform,".").concat(e),i={type:n,data:t,toString:function(){return n}};return i},t.escalate=function(e,t){return g((function(t,n,i){return{type:s.error,data:r.isFunction(e)?e(t,n,i):e}}),i.__assign(i.__assign({},t),{to:o.SpecialTargets.Parent}))},t.forwardTo=function(e,t){return f((function(e,t){return t}),i.__assign(i.__assign({},t),{to:e}))},t.getActionFunction=l,t.initEvent=c,t.log=function(e,t){return void 0===e&&(e=v),{type:s.log,label:t,expr:e}},t.pure=function(e){return{type:o.ActionTypes.Pure,get:e}},t.raise=function(e){return r.isString(e)?{type:s.raise,event:e}:f(e,{to:o.SpecialTargets.Internal})},t.resolveActions=function e(t,n,o,c,l,p){void 0===p&&(p=!1);var f=i.__read(p?[[],l]:r.partition(l,(function(e){return e.type===s.assign})),2),g=f[0],v=f[1],b=g.length?r.updateContext(o,c,g,n):o,S=p?[o]:void 0,E=r.flatten(v.map((function(o){var l;switch(o.type){case s.raise:return h(o);case s.send:var f=m(o,b,c,t.options.delays);return a.IS_PRODUCTION||r.warn(!r.isString(o.delay)||"number"==typeof f.delay,"No delay reference for delay expression '".concat(o.delay,"' was found on machine '").concat(t.id,"'")),f;case s.log:return y(o,b,c);case s.choose:if(!(w=null===(l=o.conds.find((function(e){var i=r.toGuard(e.cond,t.options.guards);return!i||r.evaluateGuard(t,i,b,c,n)})))||void 0===l?void 0:l.actions))return[];var g=i.__read(e(t,n,b,c,d(r.toArray(w),t.options.actions),p),2),v=g[0],E=g[1];return b=E,null==S||S.push(b),v;case s.pure:var w;if(!(w=o.get(b,c.data)))return[];var T=i.__read(e(t,n,b,c,d(r.toArray(w),t.options.actions),p),2),C=T[0],k=T[1];return b=k,null==S||S.push(b),C;case s.stop:return _(o,b,c);case s.assign:b=r.updateContext(b,c,[o],n),null==S||S.push(b);break;default:var x=u(o,t.options.actions),D=x.exec;if(D&&S){var O=S.length-1;x=i.__assign(i.__assign({},x),{exec:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];D.apply(void 0,i.__spreadArray([S[O]],i.__read(t),!1))}})}return x}})).filter((function(e){return!!e})));return[E,b]},t.resolveLog=y,t.resolveRaise=h,t.resolveSend=m,t.resolveStop=_,t.respond=function(e,t){return f(e,i.__assign(i.__assign({},t),{to:function(e,t,n){return n._event.origin}}))},t.send=f,t.sendParent=g,t.sendUpdate=function(){return g(s.update)},t.start=function(e){var t=p(e);return{type:o.ActionTypes.Start,activity:t,exec:void 0}},t.stop=function(e){var t=r.isFunction(e)?e:p(e);return{type:o.ActionTypes.Stop,activity:t,exec:void 0}},t.toActionObject=u,t.toActionObjects=d,t.toActivityDefinition=p},30290:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(80552);n(29660),n(50509),n(27108);var a=n(73487);function r(e){if("string"==typeof e){var t={type:e,toString:function(){return e}};return t}return e}t.toInvokeDefinition=function(e){return i.__assign(i.__assign({type:a.invoke},e),{toJSON:function(){e.onDone,e.onError;var t=i.__rest(e,["onDone","onError"]);return i.__assign(i.__assign({},t),{type:a.invoke,src:r(e.src)})}})},t.toInvokeSource=r},66310:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,a,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,a=0,r=t.length;a<r;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createModel=void 0;var o=n(41428),s=n(35294),c=n(50509);t.createModel=function(e,t){var n=null==t?void 0:t.events,l=null==t?void 0:t.actions,u={initialContext:e,assign:o.assign,events:n?(0,c.mapValues)(n,(function(e,t){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return i(i({},e.apply(void 0,r([],a(n),!1))),{type:t})}})):void 0,actions:l?(0,c.mapValues)(l,(function(e,t){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return i(i({},e.apply(void 0,r([],a(n),!1))),{type:t})}})):void 0,reset:function(){return(0,o.assign)(e)},createMachine:function(t,n){return(0,s.createMachine)("context"in t?t:i(i({},t),{context:e}),n)}};return u}},52119:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(80552),a=n(50509),r=function(e){return"atomic"===e.type||"final"===e.type};function o(e){return a.keys(e.states).map((function(t){return e.states[t]}))}function s(e,t){var n,a,r,s,c,u,d,p,h=l(new Set(e)),f=new Set(t);try{for(var m=i.__values(f),g=m.next();!g.done;g=m.next())for(var v=(k=g.value).parent;v&&!f.has(v);)f.add(v),v=v.parent}catch(e){n={error:e}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(n)throw n.error}}var y=l(f);try{for(var _=i.__values(f),b=_.next();!b.done;b=_.next()){if("compound"!==(k=b.value).type||y.get(k)&&y.get(k).length){if("parallel"===k.type)try{for(var S=(c=void 0,i.__values(o(k))),E=S.next();!E.done;E=S.next()){var w=E.value;"history"!==w.type&&(f.has(w)||(f.add(w),h.get(w)?h.get(w).forEach((function(e){return f.add(e)})):w.initialStateNodes.forEach((function(e){return f.add(e)}))))}}catch(e){c={error:e}}finally{try{E&&!E.done&&(u=S.return)&&u.call(S)}finally{if(c)throw c.error}}}else h.get(k)?h.get(k).forEach((function(e){return f.add(e)})):k.initialStateNodes.forEach((function(e){return f.add(e)}))}}catch(e){r={error:e}}finally{try{b&&!b.done&&(s=_.return)&&s.call(_)}finally{if(r)throw r.error}}try{for(var T=i.__values(f),C=T.next();!C.done;C=T.next()){var k;for(v=(k=C.value).parent;v&&!f.has(v);)f.add(v),v=v.parent}}catch(e){d={error:e}}finally{try{C&&!C.done&&(p=T.return)&&p.call(T)}finally{if(d)throw d.error}}return f}function c(e,t){var n=t.get(e);if(!n)return{};if("compound"===e.type){var i=n[0];if(!i)return{};if(r(i))return i.key}var a={};return n.forEach((function(e){a[e.key]=c(e,t)})),a}function l(e){var t,n,a=new Map;try{for(var r=i.__values(e),o=r.next();!o.done;o=r.next()){var s=o.value;a.has(s)||a.set(s,[]),s.parent&&(a.has(s.parent)||a.set(s.parent,[]),a.get(s.parent).push(s))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return a}function u(e,t){return Array.isArray(e)?e.some((function(e){return e===t})):e instanceof Set&&e.has(t)}t.getAdjList=l,t.getAllStateNodes=function e(t){var n=[t];return r(t)?n:n.concat(a.flatten(o(t).map(e)))},t.getChildren=o,t.getConfiguration=s,t.getMeta=function(e){return void 0===e&&(e=[]),e.reduce((function(e,t){return void 0!==t.meta&&(e[t.id]=t.meta),e}),{})},t.getTagsFromConfiguration=function(e){return new Set(a.flatten(e.map((function(e){return e.tags}))))},t.getValue=function(e,t){return c(e,l(s([e],t)))},t.has=u,t.isInFinalState=function e(t,n){return"compound"===n.type?o(n).some((function(e){return"final"===e.type&&u(t,e)})):"parallel"===n.type&&o(n).every((function(n){return e(t,n)}))},t.isLeafNode=r,t.nextEvents=function(e){return i.__spreadArray([],i.__read(new Set(a.flatten(i.__spreadArray([],i.__read(e.map((function(e){return e.ownEvents}))),!1)))),!1)}}}]);
