"use strict";(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[419],{49075:(e,t,a)=>{a.d(t,{g:()=>c});var n=a(75418),r=a.n(n),i=a(84669),o=a(58773),l=a(2112),s=a(8755),c=function(e){var t=e.title,a=e.body,n=e.noData,c=e.noTopics,u=e.noFilter,m=e.onCreateTopic;return r().createElement(i.EmptyState,{variant:i.EmptyStateVariant.xs},r().createElement(i.EmptyStateIcon,{icon:n?o.ZP:c?l.ZP:u?s.ZP:void 0}),r().createElement(i.Title,{headingLevel:"h3",size:"lg"},t),r().createElement(i.EmptyStateBody,null,a,r().createElement("br",null),r().createElement("br",null),c&&r().createElement(i.Button,{variant:"primary",onClick:m},"Create topic")))}},30419:(e,t,a)=>{a.d(t,{g2:()=>n.g,n9:()=>g,vB:()=>L,jo:()=>T,fo:()=>D,iG:()=>k});var n=a(49075),r=a(70655),i=a(75418),o=a.n(i),l=a(11593),s=a(80542),c=a(46332),u=a(75381),m=a(84669),d=a(34391),p=a(84076),f=a(9914),h=a(84103),v=a.n(h),_=function(e,t){var a="B";return e=e&&(e.sortedData?e.sortedData:e.data),t=t&&(t.sortedData?t.sortedData:t.data),e&&e.map((function(e){e.bytes.forEach((function(e){var t=v()(e).unit;"kiB"===t&&"B"===a&&(a="kiB"),"MiB"===t&&("B"!==a&&"kiB"!==a||(a="MiB")),"GiB"===t&&("B"!==a&&"kiB"!==a&&"MiB"!==a||(a="GiB"))}))})),t&&t.map((function(e){e.bytes.forEach((function(e){var t=v()(e).unit;"kiB"===t&&"B"===a&&(a="kiB"),"MiB"===t&&("B"!==a&&"kiB"!==a||(a="MiB")),"GiB"===t&&("B"!==a&&"kiB"!==a&&"MiB"!==a||(a="GiB"))}))})),a},E=function(e,t){return"B"===t?Math.round(10*e)/10:"kiB"===t?Math.round(e/1024*10)/10:"MiB"===t?Math.round(e/1024/1024*10)/10:"GiB"===t?Math.round(e/1024/1024/1024*10)/10:void 0},b=function(e){var t=6,a=60;switch(e){case"Last 5 minutes":t=5/60,a=1;break;case"Last 15 minutes":t=.25,a=3;break;case"Last 30 minutes":t=.5,a=5;break;case"Last 1 hour":t=1,a=10;break;case"Last 3 hours":t=3,a=30;break;case"Last 6 hours":t=6,a=60;break;case"Last 12 hours":t=12,a=120;break;case"Last 24 hours":t=24,a=240;break;case"Last 2 days":t=48,a=480;break;case"Last 7 days":t=168,a=1440}return{timeDuration:t,timeInterval:a}},y=a(55795),g=function(e){var t=e.title,a=e.description;return o().createElement(m.Popover,{"aria-label":"Basic popover",headerContent:o().createElement("div",null,t),bodyContent:o().createElement("div",null,a)},o().createElement(y.ZP,null))},k=function(e){var t=e.kafkaID,a=e.metricsDataUnavailable,h=e.setMetricsDataUnavailable,v=(0,i.useRef)(),_=(0,l.useTranslation)().t,b=(0,c.useAuth)(),y=(((0,c.useConfig)()||{}).kas||{}).apiBasePath,k=((0,c.useAlert)()||{}).addAlert,C=(0,i.useState)(),T=C[0],w=C[1],D=(0,i.useState)(),S=D[0],B=D[1],x=(0,i.useState)(),A=x[0],P=x[1],M=(0,i.useState)(!0),I=M[0],G=M[1],z=(0,i.useState)(),F=z[0],Z=z[1],O=(0,i.useState)(6),V=O[0],R=O[1],H=(0,i.useState)(60),U=H[0],W=H[1],K=function(){return v.current&&w(v.current.clientWidth)},Q=T&&T>650?6:3,X=function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,a,n,i,o,l,c,d;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,null==b?void 0:b.kas.getToken()];case 1:if(void 0===(e=r.sent())||""===e)return[3,5];r.label=2;case 2:return r.trys.push([2,4,,5]),a=new s.DefaultApi(new s.Configuration({accessToken:e,basePath:y})),t?[4,a.getMetricsByRangeQuery(t,60*V,60*U,["kubelet_volume_stats_used_bytes"])]:[2];case 3:return n=r.sent(),i={name:"Used disk space",data:[]},n.data.items?(h(!1),null===(c=n.data.items)||void 0===c||c.forEach((function(e,t){var a,n=e.metric;if(void 0===n)throw new Error("item.metric cannot be undefined");if(void 0===e.values)throw new Error("item.values cannot be undefined");"kubelet_volume_stats_used_bytes"===n.__name__&&(n.persistentvolumeclaim.includes("zookeeper")||null===(a=e.values)||void 0===a||a.forEach((function(e,a){if(null==e.timestamp)throw new Error("timestamp cannot be undefined");if(t>0){var n=i.data[a].usedSpaceAvg.concat(e.value);i.data[a].usedSpaceAvg=n}else i.data.push({timestamp:e.timestamp,usedSpaceAvg:[e.value]})})));j(i)}))):(h(!0),G(!1)),[3,5];case 4:return o=r.sent(),l=void 0,(0,u.G6)(o)&&(l=null===(d=o.response)||void 0===d?void 0:d.data.reason),k&&k({variant:m.AlertVariant.danger,title:_("common.something_went_wrong"),description:l}),[3,5];case 5:return[2]}}))}))};(0,i.useEffect)((function(){X(),K()}),[V,U]),(0,i.useEffect)((function(){K(),window.addEventListener("resize",K)}),[T]);var j=function(e){var t=[{name:"Limit",symbol:{fill:f.ZP.value,type:"threshold"}},{name:e.name,symbol:{fill:p.ZP.value}}],a=p.ZP.value,n=f.ZP.value,r=[],i=[],o=[],l=function(){return(e.data[e.data.length-1].timestamp-e.data[0].timestamp)/1e3/60},s=360-l(),c=(360-l())/5;if(s<=360&&V>=6)for(var u=0;u<c;u+=1){var m=e.data[0].timestamp-3e5*(c-u),d=new Date(m),h=d.getHours()+":"+d.getMinutes();i.push({name:e.name,x:h,y:0}),o.push({name:"Limit",x:h,y:60})}e.data.map((function(t){var a=new Date(t.timestamp),n=a.getHours()+":"+a.getMinutes(),r=t.usedSpaceAvg.reduce((function(e,t){return e+t}),0),l=E(r,"GiB");i.push({name:e.name,x:n,y:l}),o.push({name:"Limit",x:n,y:60})})),r.push({areaColor:a,softLimitColor:n,area:i,softLimit:o}),B(t),P(r),Z("GiB"),G(!1)};return o().createElement(m.Card,null,o().createElement(L,{showTopicFilter:!1,title:_("metrics.kafka_instance_metrics"),setTimeDuration:R,setTimeInterval:W,showKafkaToolbar:!a,onRefreshKafkaToolbar:function(){X()}}),o().createElement(m.CardTitle,{component:"h2"},_("metrics.used_disk_space")," ",o().createElement(g,{title:_("metrics.used_disk_space"),description:_("metrics.used_disk_space_help_text")})),o().createElement(m.CardBody,null,o().createElement("div",{ref:v},I?o().createElement(m.Bullseye,null,o().createElement(m.Spinner,{isSVG:!0})):a?o().createElement(n.g,{title:_("metrics.empty_state_no_data_title"),body:_("metrics.empty_state_no_data_body"),noData:!0}):A&&S&&F&&o().createElement(d.Chart,{ariaTitle:_("metrics.used_disk_space"),containerComponent:o().createElement(d.ChartVoronoiContainer,{labels:function(e){var t=e.datum;return t.name+": "+t.y},constrainToVisibleArea:!0}),legendPosition:"bottom-left",legendComponent:o().createElement(d.ChartLegend,{orientation:"horizontal",data:S,itemsPerRow:Q}),height:350,padding:{bottom:110,left:90,right:60,top:25},themeColor:d.ChartThemeColor.multiUnordered,width:T,minDomain:{y:0},legendAllowWrap:!0},o().createElement(d.ChartAxis,{label:"Time",tickCount:6}),o().createElement(d.ChartAxis,{dependentAxis:!0,tickFormat:function(e){return Math.round(e)+" "+F},tickCount:4}),o().createElement(d.ChartGroup,null,A.map((function(e,t){return o().createElement(d.ChartArea,{key:"chart-area-"+t,data:e.area,interpolation:"monotoneX",style:{data:{stroke:e.color}}})}))),o().createElement(d.ChartThreshold,{key:"chart-softlimit",data:A[0].softLimit,style:{data:{stroke:A[0].softLimitColor}}})))))},C=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}(0,r.__extends)(t,e),t.prototype.render=function(){var e=(0,d.createContainer)("voronoi","cursor"),t=[],a=[];return this.props.topics.forEach((function(e){t.push({name:e.name});var n=e.data.map((function(t){var a=new Date(t.timestamp);return{x:a.getHours()+":"+a.getMinutes(),y:t.count,name:e.name}}));a.push(n)})),o().createElement("div",{style:{height:"300x",width:"450px"}},o().createElement(d.Chart,{ariaTitle:"Messages in to a topic",containerComponent:o().createElement(e,{cursorDimension:"x",labels:function(e){return""+e.datum.y},labelComponent:o().createElement(d.ChartLegendTooltip,{legendData:t,title:function(e){return e.x}}),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:50}),legendData:t,legendPosition:"bottom",height:300,maxDomain:{y:10},minDomain:{y:0},padding:{bottom:100,left:70,right:50,top:50},themeColor:d.ChartThemeColor.green,width:450},o().createElement(d.ChartAxis,{label:"time",tickCount:6}),o().createElement(d.ChartAxis,{dependentAxis:!0,showGrid:!0,label:"messages"}),o().createElement(d.ChartGroup,null,a.map((function(e,t){return o().createElement(d.ChartLine,{data:e,key:"chart-messages-"+t})})))))}}(o().Component),a(82874)),T=function(e){var t=e.kafkaID,a=e.metricsDataUnavailable,f=e.setMetricsDataUnavailable,h=e.onCreateTopic,v=(0,l.useTranslation)().t,b=(0,c.useAuth)(),y=(((0,c.useConfig)()||{}).kas||{}).apiBasePath,k=((0,c.useAlert)()||{}).addAlert,T=(0,i.useRef)(),w=(0,i.useState)(),S=w[0],B=w[1],x=(0,i.useState)(6),A=x[0],P=x[1],M=(0,i.useState)(60),I=M[0],G=M[1],z=(0,i.useState)(!1),F=z[0],Z=z[1],O=(0,i.useState)(!1),V=O[0],R=O[1],H=function(){return T.current&&B(T.current.clientWidth)},U=S&&S>650?6:3;(0,i.useEffect)((function(){H(),window.addEventListener("resize",H)}),[S]);var W=(0,i.useState)(),K=W[0],Q=W[1],X=(0,i.useState)(),j=X[0],q=X[1],J=(0,i.useState)(),N=J[0],Y=J[1],$=(0,i.useState)(),ee=$[0],te=$[1],ae=(0,i.useState)(!0),ne=ae[0],re=ae[1],ie=(0,i.useState)([]),oe=ie[0],le=ie[1],se=function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,a,n,i,o,l,c,d,p,h,_;return(0,r.__generator)(this,(function(E){switch(E.label){case 0:return[4,null==b?void 0:b.kas.getToken()];case 1:if(void 0===(e=E.sent())||""===e)return[3,5];E.label=2;case 2:return E.trys.push([2,4,,5]),a=new s.DefaultApi(new s.Configuration({accessToken:e,basePath:y})),t?[4,a.getMetricsByRangeQuery(t,60*A,60*I,["kafka_server_brokertopicmetrics_bytes_in_total","kafka_server_brokertopicmetrics_bytes_out_total"])]:[2];case 3:return n=E.sent(),i={name:"Total incoming bytes",rawData:new Map},o={name:"Total outgoing bytes",rawData:new Map},n.data.items?(f(!1),null===(h=n.data.items)||void 0===h||h.forEach((function(e,t){var a,n,l=e.metric;if(void 0===l)throw new Error("item.metric cannot be undefined");if(void 0===e.values)throw new Error("item.values cannot be undefined");"__strimzi_canary"!==l.topic&&"__consumer_offsets"!==l.topic&&oe&&l.topic&&-1===oe.indexOf(l.topic)&&le((0,r.__spreadArray)((0,r.__spreadArray)([],oe,!0),[l.topic],!1)),(V?"__strimzi_canary"!==l.topic&&"__consumer_offsets"!==l.topic&&F===l.topic:"__strimzi_canary"!==l.topic&&"__consumer_offsets"!==l.topic)&&("kafka_server_brokertopicmetrics_bytes_in_total"===l.__name__&&(null===(a=e.values)||void 0===a||a.forEach((function(e,t){var a;if(null==e.timestamp)throw new Error("timestamp cannot be undefined");i.rawData.has(e.timestamp)?null===(a=i.rawData.get(e.timestamp))||void 0===a||a.push(e.value):i.rawData.set(e.timestamp,[e.value])}))),"kafka_server_brokertopicmetrics_bytes_out_total"===l.__name__&&(null===(n=e.values)||void 0===n||n.forEach((function(e,t){var a;if(null==e.timestamp)throw new Error("timestamp cannot be undefined");o.rawData.has(e.timestamp)?null===(a=o.rawData.get(e.timestamp))||void 0===a||a.push(e.value):o.rawData.set(e.timestamp,[e.value])}))))})),i.rawData.size<1&&o.rawData.size<1?(te(!0),re(!1)):(l=[],i.rawData.forEach((function(e,t){return l.push({timestamp:t,bytes:e})})),i.sortedData=l.sort((function(e,t){return e.timestamp-t.timestamp})),c=[],o.rawData.forEach((function(e,t){return c.push({timestamp:t,bytes:e})})),o.sortedData=c.sort((function(e,t){return e.timestamp-t.timestamp})),ce(i,o))):(f(!0),re(!1)),[3,5];case 4:return d=E.sent(),p=void 0,(0,u.G6)(d)&&(p=null===(_=d.response)||void 0===_?void 0:_.data.reason),k&&k({variant:m.AlertVariant.danger,title:v("common.something_went_wrong"),description:p}),[3,5];case 5:return[2]}}))}))};(0,i.useEffect)((function(){se()}),[A,I]);var ce=function(e,t){var a=[],n=[],r=_(e,t);if(e){var i=[],o=p.ZP.value,l=360-(d=function(){return(e.sortedData[e.sortedData.length-1].timestamp-e.sortedData[0].timestamp)/1e3/60})(),s=(360-d())/5;if(l<=360&&A>=6)for(var c=0;c<s;c+=1){var u=e.sortedData[0].timestamp-3e5*(s-c),m=(h=new Date(u)).getHours()+":"+h.getMinutes();i.push({name:e.name,x:m,y:0})}e.sortedData.map((function(t){var a=new Date(t.timestamp),n=a.getHours()+":"+a.getMinutes(),o=t.bytes.reduce((function(e,t){return e+t}),0),l=E(o,r);i.push({name:e.name,x:n,y:l})})),n.push({color:o,line:i}),a.push({name:e.name,symbol:{fill:p.ZP.value}})}if(t){var d,f=[];o=C.ZP.value,l=360-(d=function(){return(t.sortedData[t.sortedData.length-1].timestamp-t.sortedData[0].timestamp)/1e3/60})(),s=(360-d())/5;if(l<=360&&A>=6)for(c=0;c<s;c+=1){var h;u=t.sortedData[0].timestamp-3e5*(s-c),m=(h=new Date(u)).getHours()+":"+h.getMinutes();f.push({name:t.name,x:m,y:0})}t.sortedData.map((function(e){var a=new Date(e.timestamp),n=a.getHours()+":"+a.getMinutes(),i=e.bytes.reduce((function(e,t){return e+t}),0),o=E(i,r);f.push({name:t.name,x:n,y:o})})),n.push({color:o,line:f}),a.push({name:t.name,symbol:{fill:C.ZP.value}})}q(a),Q(n),Y(r),re(!1)};return o().createElement(m.Card,null,o().createElement(L,{showTopicFilter:!0,title:v("metrics.topic_metrics"),setTimeDuration:P,setTimeInterval:G,showTopicToolbar:!ee&&!a,selectedTopic:F,setSelectedTopic:Z,onRefreshTopicToolbar:function(){se()},topicList:oe,setIsFilterApplied:R}),o().createElement(m.CardTitle,{component:"h2"},v("metrics.total_bytes")," ",o().createElement(g,{title:v("metrics.total_bytes"),description:v("metrics.topic_metrics_help_text")})),o().createElement(m.CardBody,null,o().createElement("div",{ref:T},o().createElement("div",null,ne?o().createElement(m.Bullseye,null,o().createElement(m.Spinner,{isSVG:!0})):a?o().createElement(n.g,{title:v("metrics.empty_state_no_data_title"),body:v("metrics.empty_state_no_data_body"),noData:!0}):ee?o().createElement(n.g,{title:v("metrics.empty_state_no_topics_title"),body:v("metrics.empty_state_no_topics_body"),noTopics:!0,onCreateTopic:h}):K&&j&&N&&o().createElement(o().Fragment,null,o().createElement(d.Chart,{ariaTitle:v("metrics.total_bytes"),containerComponent:o().createElement(d.ChartVoronoiContainer,{labels:function(e){var t=e.datum;return t.name+": "+t.y},constrainToVisibleArea:!0}),legendAllowWrap:!0,legendPosition:"bottom-left",legendComponent:o().createElement(d.ChartLegend,{data:j,itemsPerRow:U}),height:300,padding:{bottom:110,left:90,right:30,top:25},themeColor:d.ChartThemeColor.multiUnordered,width:S},o().createElement(d.ChartAxis,{label:"Time",tickCount:6}),o().createElement(d.ChartAxis,{dependentAxis:!0,tickFormat:function(e){return Math.round(e)+" "+N},tickCount:4,minDomain:{y:0}}),o().createElement(d.ChartGroup,null,K.map((function(e,t){return o().createElement(d.ChartLine,{key:"chart-line-"+t,data:e.line,style:{data:{stroke:e.color}}})})))),o().createElement(m.Divider,null),F?o().createElement(D,{kafkaID:t,timeDuration:A,timeInterval:I}):o().createElement(m.Card,null,o().createElement(m.CardTitle,{component:"h2"},v("metrics.topic_partition_size")),o().createElement(m.CardBody,null,o().createElement(n.g,{title:v("metrics.empty_state_no_filter_title"),body:v("metrics.empty_state_no_filter_body"),noFilter:!0})," ")))))))},w=a(72021),D=function(e){var t=e.kafkaID,a=e.timeDuration,f=e.timeInterval,h=(0,i.useRef)(),b=(0,l.useTranslation)().t,y=(0,c.useAuth)(),k=(0,c.useConfig)().kas.apiBasePath,C=(0,c.useAlert)().addAlert,T=(0,i.useState)(),D=T[0],S=T[1],B=(0,i.useState)(),x=B[0],A=B[1],L=(0,i.useState)(),P=L[0],M=L[1],I=(0,i.useState)(),G=I[0],z=I[1],F=(0,i.useState)(!1),Z=F[0],O=F[1],V=(0,i.useState)(!0),R=V[0],H=V[1],U=(0,i.useState)(),W=U[0],K=U[1],Q=[w.ZP.value,p.ZP.value],X=function(){return h.current&&S(h.current.clientWidth)},j=D&&D>650?6:3;(0,i.useEffect)((function(){(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,n,i,o,l,c,d,p,h;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,null==y?void 0:y.kas.getToken()];case 1:if(void 0===(e=r.sent())||""===e)return[3,5];r.label=2;case 2:return r.trys.push([2,4,,5]),n=new s.DefaultApi(new s.Configuration({accessToken:e,basePath:k})),t?[4,n.getMetricsByRangeQuery(t,60*a,60*f,["kafka_log_log_size"])]:[2];case 3:return i=r.sent(),o=[],i.data.items?(O(!1),null===(p=i.data.items)||void 0===p||p.forEach((function(e,t){var a,n,r=null===(a=null==e?void 0:e.metric)||void 0===a?void 0:a.topic,i=e.metric;if(void 0===e.metric)throw new Error("item.metric cannot be undefined");if(void 0===e.values)throw new Error("item.values cannot be undefined");var l={name:r,data:[]},s=o.some((function(e){return e.name===r}));"kafka_topic:kafka_log_log_size:sum"===i.__name__&&(null===(n=e.values)||void 0===n||n.forEach((function(e){if(null==e.timestamp)throw new Error("timestamp cannot be undefined");s?o.forEach((function(t){t.name===r&&t.data.forEach((function(t){return t.bytes=t.bytes+e.value}))})):l.data.push({name:r||"",timestamp:e.timestamp,bytes:e.value})}))),s||o.push(l)})),(l=o.filter((function(e){return"__strimzi_canary"!==e.name&&"__consumer_offsets"!==e.name}))).length<1&&K(!0),q(l)):(O(!0),H(!1)),[3,5];case 4:return c=r.sent(),d=void 0,(0,u.G6)(c)&&(d=null===(h=c.response)||void 0===h?void 0:h.data.reason),C({variant:m.AlertVariant.danger,title:b("common.something_went_wrong"),description:d}),[3,5];case 5:return[2]}}))})),X()}),[f,a]),(0,i.useEffect)((function(){X(),window.addEventListener("resize",X)}),[D]);var q=function(e){var t=[],n=[],r=_(e,void 0);e.map((function(e,i){var o=Q[i];t.push({name:e.name});var l=[],s=function(){return(e.data[e.data.length-1].timestamp-e.data[0].timestamp)/1e3/60},c=360-s(),u=(360-s())/5;if(c<=360&&a>=6)for(var m=0;m<u;m+=1){var d=e.data[0].timestamp-3e5*(u-m),p=new Date(d),f=p.getHours()+":"+p.getMinutes();l.push({name:e.name,x:f,y:0})}e.data.map((function(e){var t=new Date(e.timestamp),a=t.getHours()+":"+t.getMinutes(),n=E(e.bytes,r);l.push({name:e.name,x:a,y:n})})),n.push({color:o,area:l})})),A(t),M(n),z(r),H(!1)};return o().createElement(m.Card,null,o().createElement(m.CardTitle,{component:"h2"},b("metrics.log_size_per_partition")," ",o().createElement(g,{title:b("metrics.log_size_per_partition"),description:b("metrics.log_size_per_partition_help_text")})),o().createElement(m.CardBody,null,o().createElement("div",{ref:h},R?o().createElement(m.Bullseye,null,o().createElement(m.Spinner,{isSVG:!0})):Z?o().createElement(n.g,{title:b("metrics.empty_state_no_data_title"),body:b("metrics.empty_state_no_data_body"),noData:!0}):W?o().createElement(n.g,{title:b("metrics.empty_state_no_topics_title"),body:b("metrics.empty_state_no_topics_body"),noTopics:!0}):P&&x&&v()&&o().createElement(d.Chart,{ariaTitle:b("metrics.log_size_per_partition"),containerComponent:o().createElement(d.ChartVoronoiContainer,{labels:function(e){var t=e.datum;return t.name+": "+t.y},constrainToVisibleArea:!0}),legendPosition:"bottom-left",legendComponent:o().createElement(d.ChartLegend,{data:x,itemsPerRow:j}),height:350,padding:{bottom:110,left:90,right:30,top:25},themeColor:d.ChartThemeColor.multiUnordered,width:D,legendAllowWrap:!0},o().createElement(d.ChartAxis,{label:"Time",tickCount:6}),o().createElement(d.ChartAxis,{dependentAxis:!0,tickFormat:function(e){return Math.round(e)+" "+G}}),o().createElement(d.ChartGroup,null,P.map((function(e,t){return o().createElement(d.ChartArea,{key:"chart-area-"+t,data:e.area,interpolation:"monotoneX"})})))))))},S=a(66095),B=a(8755),x=function(e){var t=e.selectedTopic,a=e.setSelectedTopic,n=e.topicList,r=e.setIsFilterApplied,l=e.disableToolbar,s=(0,i.useState)(!1),c=s[0],u=s[1],d=(0,i.useState)(),p=d[0],f=d[1];(0,i.useEffect)((function(){n&&f(n)}),[n]);var h=function(e){return[o().createElement(m.SelectOption,{key:"topic-filter-0",value:"All topics"}),o().createElement(m.SelectGroup,{label:"Filter by topic",key:"topic-filter-group"},null==e?void 0:e.map((function(e,t){return o().createElement(m.SelectOption,{key:"topic-filter-"+(t+1),value:e})})))]};return o().createElement(m.ToolbarItem,{widths:{default:"100px",sm:"80px",md:"150px",lg:"200px",xl:"250px","2xl":"300px"}},o().createElement(m.Select,{variant:m.SelectVariant.single,onToggle:function(e){u(e)},onSelect:function(e,t){a&&a(t),r&&r("All topics"!==t),u(!1)},selections:t,isOpen:c,placeholderText:o().createElement(o().Fragment,null,o().createElement(B.ZP,null)," All topics"),"aria-labelledby":"titleId",onFilter:function(e,t){var a=(null==p?void 0:p.filter((function(e){return-1!=e.indexOf(t)})))||[];return h(a)},isGrouped:!0,hasInlineFilter:!0,isDisabled:l,style:{width:"100%"}},h(p)))},A=function(e){var t=e.setTimeDuration,a=e.setTimeInterval,n=e.keyText,r=e.disableToolbar,l=(0,i.useState)(!1),s=l[0],c=l[1],u=(0,i.useState)(!1),d=u[0],p=u[1];return o().createElement(m.ToolbarItem,null,o().createElement(m.Select,{variant:m.SelectVariant.single,"aria-label":"Select Input",onToggle:function(e){p(e)},onSelect:function(e,n){t(b(n).timeDuration),a(b(n).timeInterval),c(n),p(!1)},selections:s,isOpen:d,isDisabled:r,placeholderText:"Last 6 hours"},function(e){return[o().createElement(m.SelectGroup,{label:"Relative time ranges",key:e+"-group"},o().createElement(m.SelectOption,{key:e+"-0",value:"Last 5 minutes"}),o().createElement(m.SelectOption,{key:e+"-1",value:"Last 15 minutes"}),o().createElement(m.SelectOption,{key:e+"-2",value:"Last 30 minutes"}),o().createElement(m.SelectOption,{key:e+"-3",value:"Last 1 hour"}),o().createElement(m.SelectOption,{key:e+"-4",value:"Last 3 hours"}),o().createElement(m.SelectOption,{key:e+"-5",value:"Last 6 hours"}),o().createElement(m.SelectOption,{key:e+"-6",value:"Last 12 hours"}),o().createElement(m.SelectOption,{key:e+"-7",value:"Last 24 hours"}),o().createElement(m.SelectOption,{key:e+"-8",value:"Last 2 days"}),o().createElement(m.SelectOption,{key:e+"-9",value:"Last 7 days"}))]}(n)))},L=function(e){var t=e.title,a=e.showTopicFilter,n=e.setTimeDuration,r=e.setTimeInterval,i=e.showKafkaToolbar,l=void 0===i||i,s=e.showTopicToolbar,c=void 0===s||s,u=e.setSelectedTopic,d=e.selectedTopic,p=e.onRefreshKafkaToolbar,f=e.onRefreshTopicToolbar,h=e.topicList,v=e.setIsFilterApplied;return o().createElement(o().Fragment,null,o().createElement(m.Level,null,o().createElement(m.LevelItem,null,o().createElement(m.CardTitle,{component:"h2"},t)),o().createElement(m.LevelItem,null,a?o().createElement(m.Toolbar,null,o().createElement(m.ToolbarContent,null,o().createElement(x,{selectedTopic:d,setSelectedTopic:u,topicList:h,setIsFilterApplied:v,disableToolbar:!c}),o().createElement(A,{setTimeDuration:n,setTimeInterval:r,disableToolbar:!c,keyText:"topic-metrics-time-filter"}),o().createElement(m.Button,{variant:"plain","aria-label":"sync",onClick:f},o().createElement(S.ZP,null)))):o().createElement(m.Toolbar,null,o().createElement(m.ToolbarContent,null,o().createElement(A,{setTimeDuration:n,setTimeInterval:r,keyText:"kafka-metrics-time-filter",disableToolbar:!l}),o().createElement(m.Button,{variant:"plain","aria-label":"sync",onClick:p},o().createElement(S.ZP,null)))))),o().createElement(m.Divider,null))}}}]);
