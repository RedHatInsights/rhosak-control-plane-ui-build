"use strict";(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[4633],{73171:(e,t,n)=>{t.qw={name:"AwsIcon",height:512,width:640,svgPath:"M180.41 203.01c-.72 22.65 10.6 32.68 10.88 39.05a8.164 8.164 0 0 1-4.1 6.27l-12.8 8.96a10.66 10.66 0 0 1-5.63 1.92c-.43-.02-8.19 1.83-20.48-25.61a78.608 78.608 0 0 1-62.61 29.45c-16.28.89-60.4-9.24-58.13-56.21-1.59-38.28 34.06-62.06 70.93-60.05 7.1.02 21.6.37 46.99 6.27v-15.62c2.69-26.46-14.7-46.99-44.81-43.91-2.4.01-19.4-.5-45.84 10.11-7.36 3.38-8.3 2.82-10.75 2.82-7.41 0-4.36-21.48-2.94-24.2 5.21-6.4 35.86-18.35 65.94-18.18a76.857 76.857 0 0 1 55.69 17.28 70.285 70.285 0 0 1 17.67 52.36l-.01 69.29zM93.99 235.4c32.43-.47 46.16-19.97 49.29-30.47 2.46-10.05 2.05-16.41 2.05-27.4-9.67-2.32-23.59-4.85-39.56-4.87-15.15-1.14-42.82 5.63-41.74 32.26-1.24 16.79 11.12 31.4 29.96 30.48zm170.92 23.05c-7.86.72-11.52-4.86-12.68-10.37l-49.8-164.65c-.97-2.78-1.61-5.65-1.92-8.58a4.61 4.61 0 0 1 3.86-5.25c.24-.04-2.13 0 22.25 0 8.78-.88 11.64 6.03 12.55 10.37l35.72 140.83 33.16-140.83c.53-3.22 2.94-11.07 12.8-10.24h17.16c2.17-.18 11.11-.5 12.68 10.37l33.42 142.63L420.98 80.1c.48-2.18 2.72-11.37 12.68-10.37h19.72c.85-.13 6.15-.81 5.25 8.58-.43 1.85 3.41-10.66-52.75 169.9-1.15 5.51-4.82 11.09-12.68 10.37h-18.69c-10.94 1.15-12.51-9.66-12.68-10.75L328.67 110.7l-32.78 136.99c-.16 1.09-1.73 11.9-12.68 10.75h-18.3zm273.48 5.63c-5.88.01-33.92-.3-57.36-12.29a12.802 12.802 0 0 1-7.81-11.91v-10.75c0-8.45 6.2-6.9 8.83-5.89 10.04 4.06 16.48 7.14 28.81 9.6 36.65 7.53 52.77-2.3 56.72-4.48 13.15-7.81 14.19-25.68 5.25-34.95-10.48-8.79-15.48-9.12-53.13-21-4.64-1.29-43.7-13.61-43.79-52.36-.61-28.24 25.05-56.18 69.52-55.95 12.67-.01 46.43 4.13 55.57 15.62 1.35 2.09 2.02 4.55 1.92 7.04v10.11c0 4.44-1.62 6.66-4.87 6.66-7.71-.86-21.39-11.17-49.16-10.75-6.89-.36-39.89.91-38.41 24.97-.43 18.96 26.61 26.07 29.7 26.89 36.46 10.97 48.65 12.79 63.12 29.58 17.14 22.25 7.9 48.3 4.35 55.44-19.08 37.49-68.42 34.44-69.26 34.42zm40.2 104.86c-70.03 51.72-171.69 79.25-258.49 79.25A469.127 469.127 0 0 1 2.83 327.46c-6.53-5.89-.77-13.96 7.17-9.47a637.37 637.37 0 0 0 316.88 84.12 630.22 630.22 0 0 0 241.59-49.55c11.78-5 21.77 7.8 10.12 16.38zm29.19-33.29c-8.96-11.52-59.28-5.38-81.81-2.69-6.79.77-7.94-5.12-1.79-9.47 40.07-28.17 105.88-20.1 113.44-10.63 7.55 9.47-2.05 75.41-39.56 106.91-5.76 4.87-11.27 2.3-8.71-4.1 8.44-21.25 27.39-68.49 18.43-80.02z",yOffset:0,xOffset:0},t.er=n(35183).createIcon(t.qw),t.ZP=t.er},95368:(e,t,n)=>{n.d(t,{JH:()=>l,ti:()=>a,N1:()=>i,SP:()=>o});var a=function(){this.cloud_provider="",this.multi_az=!0,this.region="",this.name=""},i=function(){this.name="",this.description=""},r=n(75418),l=n.n(r)().createContext(void 0),o=function(){return(0,r.useContext)(l)}},94633:(e,t,n)=>{n.r(t),n.d(t,{CreateInstance:()=>I,default:()=>x});var a=n(70655),i=n(75418),r=n.n(i),l=n(54532),o=n(54804),s=n(73171),c=n(78261),m=n(52648),u=n(45024),d=n(75381),_=n(92717),f=n(95368),g=n(54950),v=function(){var e=(0,l.useTranslation)().t,t=r().useContext(g.QuickStartContext);return r().createElement(o.TextContent,null,r().createElement(o.Text,{component:o.TextVariants.h3},e("common.instance_information")),r().createElement(o.TextList,{component:o.TextListVariants.dl},r().createElement(o.Grid,{sm:6,lg:12,hasGutter:!0},r().createElement(o.GridItem,null,r().createElement(o.TextListItem,{component:o.TextListItemVariants.dt},e("common.duration")),r().createElement(o.TextListItem,{component:o.TextListItemVariants.dd},"48 hours")),r().createElement(o.GridItem,null,r().createElement(o.TextListItem,{component:o.TextListItemVariants.dt},e("common.ingress_egress")),r().createElement(o.TextListItem,{component:o.TextListItemVariants.dd},e("common.ingress_egress_value"))),r().createElement(o.GridItem,null,r().createElement(o.TextListItem,{component:o.TextListItemVariants.dt},e("common.storage")),r().createElement(o.TextListItem,{component:o.TextListItemVariants.dd},e("common.storage_value"))),r().createElement(o.GridItem,null,r().createElement(o.TextListItem,{component:o.TextListItemVariants.dt},e("common.partitions")),r().createElement(o.TextListItem,{component:o.TextListItemVariants.dd},"up to 100")),r().createElement(o.GridItem,null,r().createElement(o.TextListItem,{component:o.TextListItemVariants.dt},e("common.client_connections")),r().createElement(o.TextListItem,{component:o.TextListItemVariants.dd},"up to 100")),r().createElement(o.GridItem,null,r().createElement(o.TextListItem,{component:o.TextListItemVariants.dt},e("common.connection_rate")),r().createElement(o.TextListItem,{component:o.TextListItemVariants.dd},"up to 50 connections/second")),r().createElement(o.GridItem,null,r().createElement(o.TextListItem,{component:o.TextListItemVariants.dt},e("common.message_size")),r().createElement(o.TextListItem,{component:o.TextListItemVariants.dd},e("common.message_size_value")))),r().createElement(o.Button,{isSmall:!0,isInline:!0,variant:o.ButtonVariant.link,style:{marginTop:"20px"},onClick:function(){return t.setActiveQuickStart&&t.setActiveQuickStart("getting-started")}},e("common.quick_start_guide_message"))))},p=n(95216),h={kind:"Empty provider",display_name:"Please Select",enabled:!0},I=function(){var e=(0,l.useTranslation)().t,t=(0,u.QK)(),n=t.store,g=t.hideModal,I=(null==n?void 0:n.modalProps)||{},x=I.onCreate,E=I.refresh,T=I.cloudProviders,S=(0,p.useAuth)(),k=(((0,p.useConfig)()||{}).kas||{}).apiBasePath,L=((0,p.useAlert)()||{}).addAlert,b=new f.ti,C=(0,i.useState)(b),w=C[0],z=C[1],V=(0,i.useState)({fieldState:"default"}),y=V[0],G=V[1],A=(0,i.useState)({fieldState:"default"}),F=A[0],P=A[1],q=(0,i.useState)([]),B=q[0],M=q[1],N=(0,i.useState)(!0),D=N[0],J=N[1],K=(0,i.useState)(!1),O=K[0],Q=K[1],R=function(){z((function(e){return(0,a.__assign)((0,a.__assign)({},e),{name:"",multi_az:!0})})),J(!0),G({fieldState:"default"}),Q(!1)},$=function(t){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var n,i,r,l,s;return(0,a.__generator)(this,(function(m){switch(m.label){case 0:return[4,null==S?void 0:S.kas.getToken()];case 1:if(n=m.sent(),i=t.id,!n||!i)return[3,5];m.label=2;case 2:return m.trys.push([2,4,,5]),[4,new _.DefaultApi(new _.Configuration({accessToken:n,basePath:k})).getCloudProviderRegions(i).then((function(e){var n,i=(null===(n=e.data)||void 0===n?void 0:n.items)||[],r=null==i?void 0:i.filter((function(e){return e.enabled}));if(1===r.length&&r[0].id&&t.name){var l=r[0].id;z((function(e){return(0,a.__assign)((0,a.__assign)({},e),{region:l})}))}r.unshift(h),M(r)}))];case 3:return m.sent(),[3,5];case 4:return r=m.sent(),l=void 0,(0,c.G)(r)&&(l=null===(s=r.response)||void 0===s?void 0:s.data.reason),L&&L({title:e("common.something_went_wrong"),variant:o.AlertVariant.danger,description:l}),[3,5];case 5:return[2]}}))}))};(0,i.useEffect)((function(){(null==T?void 0:T.length)>0&&T[0].name&&(z((function(e){return(0,a.__assign)((0,a.__assign)({},e),{cloud_provider:T[0].name})})),$(T[0]))}),[T]);var Z=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var t,n,i,r,l,s,u,f;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=function(){var t=!0,n=w.name,a=w.region;return(null==n?void 0:n.trim())?/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(n.trim())||(t=!1,G({fieldState:"error",message:e("common.input_filed_invalid_helper_text")})):(t=!1,G({fieldState:"error",message:e("common.this_is_a_required_field")})),n.length>m.JB&&(t=!1,G({fieldState:"error",message:e("length_is_greater_than_expected",{maxLength:m.JB})})),a.trim()||(t=!1,P({fieldState:"error",message:e("common.this_is_a_required_field")})),t}(),[4,null==S?void 0:S.kas.getToken()];case 1:if(n=a.sent(),!t)return J(!1),[2];if(!n)return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),i=new _.DefaultApi(new _.Configuration({accessToken:n,basePath:k})),x(),Q(!0),[4,i.createKafka(!0,w).then((function(){R(),g(),E()}))];case 3:return a.sent(),[3,5];case 4:return r=a.sent(),(0,c.G)(r)&&(l=(null===(f=null==r?void 0:r.response)||void 0===f?void 0:f.data)||{},s=l.code,u=l.reason,s===d.SM.DUPLICATE_INSTANCE_NAME?(J(!1),G({fieldState:"error",message:e("the_name_already_exists_please_enter_a_unique_name",{name:w.name})})):L&&L({title:e("common.something_went_wrong"),variant:o.AlertVariant.danger,description:u,dataTestId:"toastCreateKafka-failed"})),Q(!1),[3,5];case 5:return[2]}}))}))};(0,i.useEffect)((function(){"error"!==y.fieldState&&"error"!==F.fieldState&&J(!0)}),[y.fieldState,F.fieldState]);var H,U,Y,j,W,X,ee,te=function(t){var n=!0;z((function(e){return(0,a.__assign)((0,a.__assign)({},e),{name:t})})),t&&!/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(t.trim())&&(n=!1),(null==t?void 0:t.length)>m.JB?G({fieldState:"error",message:e("length_is_greater_than_expected",{maxLength:m.JB})}):n&&"error"===y.fieldState?G({fieldState:"default",message:""}):n||G({fieldState:"error",message:e("common.input_filed_invalid_helper_text")})},ne=function(e){z((function(t){return(0,a.__assign)((0,a.__assign)({},t),{region:e})})),e&&"error"===F.fieldState&&P({fieldState:"default",message:""})},ae=function(e){switch(null==e?void 0:e.toLowerCase()){case"aws":return r().createElement(s.ZP,{size:"lg",color:"black",className:"mk--create-instance__tile--icon"});default:return}},ie=function(e,t){if(e){var n=t.currentTarget.id;z((function(e){return(0,a.__assign)((0,a.__assign)({},e),{multi_az:"multi"===n})}))}},re=function(e){e.preventDefault(),Z()};return r().createElement(u.a$,{isModalOpen:!0,title:e("create_a_kafka_instance"),handleModalToggle:function(){g(),R()},onCreate:Z,isFormValid:D,primaryButtonTitle:e("create_instance"),isCreationInProgress:O,dataTestIdSubmit:"modalCreateKafka-buttonSubmit",dataTestIdCancel:"modalCreateKafka-buttonCancel"},r().createElement(o.Alert,{className:"pf-u-mb-md",variant:"info",title:"Your preview instance will expire after 48 hours.","aria-live":"polite",isInline:!0}),r().createElement(o.Flex,{direction:{default:"column",lg:"row"}},r().createElement(o.FlexItem,{flex:{default:"flex_2"}},(H=y.message,U=y.fieldState,Y=w.name,j=w.cloud_provider,W=w.multi_az,X=w.region,ee=W,r().createElement(o.Form,{onSubmit:re},!D&&r().createElement(o.FormAlert,null,r().createElement(o.Alert,{variant:"danger",title:e("common.form_invalid_alert"),"aria-live":"polite",isInline:!0})),r().createElement(o.FormGroup,{label:e("instance_name"),helperText:e("create_instance_name_helper_text"),helperTextInvalid:H,isRequired:!0,validated:U,fieldId:"form-instance-name"},r().createElement(o.TextInput,{isRequired:!0,validated:U,type:"text",id:"form-instance-name",name:"instance-name",value:Y,onChange:te,autoFocus:!0})),r().createElement(o.FormGroup,{label:e("cloud_provider"),fieldId:"form-cloud-provider-name"},null==T?void 0:T.map((function(e){var t=e.name,n=e.display_name,i=void 0===n?"":n;return r().createElement(o.Tile,{key:"tile-"+t,title:i,icon:ae(t),isSelected:j===t,onClick:function(){return t=e,z((function(e){return(0,a.__assign)((0,a.__assign)({},e),{cloud_provider:t.name||""})})),void $(t);var t}})}))),r().createElement(o.FormGroup,{label:e("cloud_region"),helperTextInvalid:F.message,validated:F.fieldState,fieldId:"form-cloud-region-option",isRequired:!0},r().createElement(o.FormSelect,{validated:F.fieldState,value:X,onChange:ne,id:"cloud-region-select",name:"cloud-region","aria-label":e("cloud_region")},B.map((function(t,n){var a=t.id,i=t.display_name,l=void 0===i?"":i;return r().createElement(o.FormSelectOption,{key:n,value:a,label:a?e(a):l})})))),r().createElement(o.FormGroup,{label:e("availabilty_zones"),fieldId:"availability-zones"},r().createElement(o.ToggleGroup,{"aria-label":e("availability_zone_selection")},r().createElement(o.Tooltip,{content:e("kafkaInstance.availabilty_zones_tooltip_message")},r().createElement(o.ToggleGroupItem,{text:e("single"),value:"single",isDisabled:!0,buttonId:"single",onChange:ie})),r().createElement(o.ToggleGroupItem,{text:e("multi"),value:"multi",buttonId:"multi",isSelected:ee,onChange:ie}),r().createElement(o.Tooltip,{content:e("kafkaInstance.availabilty_zones_tooltip_message"),reference:function(){return document.getElementById("multi")||document.createElement("span")}})))))),r().createElement(o.Divider,{isVertical:!0}),r().createElement(o.FlexItem,{flex:{default:"flex_1"},className:"mk--create-instance-modal__sidebar--content"},r().createElement(v,null))))};const x=I}}]);
//# sourceMappingURL=4633.1e8990c0.js.map