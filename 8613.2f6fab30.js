"use strict";(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[8613],{48090:(e,t,n)=>{n(85893),n(15847),n(54653),n(73685),n(3433)},3433:(e,t,n)=>{n.d(t,{pf:()=>o.p,D5:()=>g,C0:()=>d.C,jU:()=>d.j,yR:()=>p,wR:()=>h.w,L5:()=>x.L,bN:()=>v.bN,h0:()=>v.h0});var a=n(85893),s=n(93264);n(97644);var i=n(42695),r=n(54653);var o=n(43277),d=n(12973),c=n(73685),l=n(15847);n(4256);class u extends s.Component{constructor(){super(...arguments),this.state={hasError:!1},this.onClickButton=()=>{const{history:e}=this.props;this.setState({hasError:!1}),e&&e.push("/")}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error("error:",e,t)}render(){const{t:e}=this.props,{hasError:t}=this.state;return t?(0,a.jsx)(r.PageSection,Object.assign({padding:{default:"noPadding"},isFilled:!0},{children:(0,a.jsx)(d.C,Object.assign({emptyStateProps:{variant:d.j.UnexpectedError},emptyStateIconProps:{className:"icon-color"},titleProps:{title:e("common.something_went_wrong")},emptyStateBodyProps:{body:e("unexpected_error")}},{children:(0,a.jsx)(r.Button,Object.assign({onClick:this.onClickButton},{children:e("go_to_kafka_instances")}))}))})):this.props.children}}(0,c.withRouter)((0,l.withTranslation)()(u));const p=({bullseyeProps:e,spinnerProps:t})=>(0,a.jsx)(r.Bullseye,Object.assign({},e,{children:(0,a.jsx)(r.Spinner,Object.assign({},t))}));n(85853);const g=({onClose:e,isLoading:t=!0,drawerPanelContentProps:n,drawerHeaderProps:s,isExpanded:o,children:d,panelBodyContent:c,onExpand:l,notRequiredDrawerContentBackground:u,"data-ouia-app-id":g,inlineAlertMessage:v})=>{const h=n||{},{widths:x}=h,j=(0,i.__rest)(h,["widths"]),{text:m,title:b}=s||{},_=(0,a.jsx)(r.DrawerPanelContent,Object.assign({widths:x||{default:"width_50"}},j,{children:t?(0,a.jsx)(p,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.DrawerHead,{children:[(0,a.jsxs)(r.TextContent,{children:[(null==m?void 0:m.label)&&(0,a.jsx)(r.Text,Object.assign({component:(null==m?void 0:m.component)||r.TextVariants.small,className:(null==m?void 0:m.className)||"pf-u-mb-0"},{children:null==m?void 0:m.label})),(null==b?void 0:b.value)&&(0,a.jsx)(r.Title,Object.assign({headingLevel:(null==b?void 0:b.headingLevel)||"h2",size:(null==b?void 0:b.size)||r.TitleSizes.xl,className:(null==b?void 0:b.className)||"pf-u-mt-0"},{children:null==b?void 0:b.value}))]}),(0,a.jsx)(r.DrawerActions,{children:(0,a.jsx)(r.DrawerCloseButton,{onClick:e})})]}),(0,a.jsxs)(r.DrawerPanelBody,{children:[v,c]})]})}));return(0,a.jsx)(r.Drawer,Object.assign({isExpanded:o,onExpand:l,"data-ouia-app-id":g,"data-testid":"mk--instance__drawer",className:"kas-drawer"},{children:(0,a.jsx)(r.DrawerContent,Object.assign({panelContent:_,className:u?"pf-m-no-background":""},{children:(0,a.jsxs)(r.DrawerContentBody,Object.assign({className:"pf-u-display-flex pf-u-flex-direction-column"},{children:[" ",d]}))}))}))};var v=n(16846),h=n(69887),x=n(93697);n(8509)},13449:(e,t,n)=>{n.d(t,{J:()=>s,S:()=>i});var a=n(93264);const s=(0,a.createContext)(null),i=()=>(0,a.useContext)(s)},95950:(e,t,n)=>{n.d(t,{A:()=>a.A});var a=n(94622)},217:(e,t,n)=>{n.d(t,{o:()=>j});var a=n(85893),s=n(15847),i=n(42695),r=n(93264),o=n(12902),d=n(75381),c=n(3433),l=n(54653),u=n(63286),p=n(63550),g=n(49626);const v=(0,r.lazy)((()=>n.e(3495).then(n.bind(n,43495)))),h=e=>{var{instance:t}=e,n=(0,i.__rest)(e,["instance"]);const{kafkaRequestToKafkaInstance:s}=(0,g.D)(),[o,d]=(0,r.useState)(t.request?t:void 0);return(0,r.useEffect)((()=>{o||function(){(0,i.__awaiter)(this,void 0,void 0,(function*(){const e=yield s(t);d(e)}))}()}),[o,t,s]),o?(0,a.jsx)(x,Object.assign({instance:o},n)):(0,a.jsx)(c.yR,{})},x=({instance:e,activeTab:t,setActiveTab:n,tokenEndPointUrl:i})=>{const{t:g}=(0,s.useTranslation)(["kasTemporaryFixMe"]),h=e.status===d.Od.ACCEPTED||e.status===d.Od.PREPARING;return(0,a.jsx)(r.Suspense,Object.assign({fallback:(0,a.jsx)(c.yR,{})},{children:(0,a.jsxs)(l.Tabs,Object.assign({activeKey:t,onSelect:(e,t)=>n(t)},{children:[(0,a.jsx)(l.Tab,Object.assign({eventKey:u.Z.DETAILS,title:(0,a.jsx)(l.TabTitleText,{children:g("details")})},{children:(0,a.jsx)(p.KafkaDetailsTab,{id:e.id,owner:e.owner,createdAt:(0,o.Z)(e.createdAt),updatedAt:(0,o.Z)(e.updatedAt),expiryDate:e.expiryDate?(0,o.Z)(e.expiryDate):void 0,size:e.size,ingress:e.ingress,egress:e.egress,storage:e.storage,maxPartitions:e.maxPartitions,connections:e.connections,connectionRate:e.connectionRate,messageSize:e.messageSize,region:g(e.region),instanceType:"standard"===e.plan?"standard":"eval",billing:e.billing,kafkaVersion:e.request.version||""})})),(0,a.jsx)(l.Tab,Object.assign({eventKey:u.Z.CONNECTION.toString(),title:(0,a.jsx)(l.TabTitleText,{children:g("connection")}),"data-testid":"drawerStreams-tabConnect"},{children:(0,a.jsx)(v,{externalServer:(()=>{const{bootstrap_server_host:t}=e.request;return(null==t?void 0:t.endsWith(":443"))?t:`${t}:443`})(),adminServerUrl:(()=>{const{admin_api_server_url:t}=e.request;return t?`${t}/openapi`:void 0})(),isKafkaPending:h,tokenEndPointUrl:i,instanceId:e.id})}))]}))}))},j=({"data-ouia-app-id":e,isDrawerOpen:t,drawerInstance:n,setDrawerActiveTab:i,drawerActiveTab:r,closeDrawer:o,tokenEndPointUrl:d,children:l})=>{const{t:p}=(0,s.useTranslation)(["kasTemporaryFixMe"]);return(0,a.jsx)(c.D5,Object.assign({isExpanded:t,isLoading:void 0===n,onClose:o,panelBodyContent:n&&(0,a.jsx)(h,{tokenEndPointUrl:d,activeTab:r||u.Z.DETAILS,instance:n,setActiveTab:i}),drawerHeaderProps:{text:{label:p("instance_name")},title:{value:null==n?void 0:n.name,headingLevel:"h1"}},"data-ouia-app-id":e,notRequiredDrawerContentBackground:void 0===n},{children:l}))}},81548:(e,t,n)=>{n.d(t,{e0:()=>d,gD:()=>o});var a=n(42695),s=n(85893),i=n(93264);const r=(0,i.createContext)(void 0),o=()=>{const e=(0,i.useContext)(r);if(void 0===e)throw new Error("must be used inside a InstanceDrawerContext provider");return e},d=e=>{var{children:t}=e,n=(0,a.__rest)(e,["children"]);return(0,s.jsx)(r.Provider,Object.assign({value:n},{children:t}))}},38462:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(42695),s=n(85893),i=n(3433),r=n(13449),o=n(63550),d=n(95950),c=n(35831),l=n(217),u=n(81548),p=n(54930);const g=e=>{var{preCreateInstance:t,shouldOpenCreateModal:n,getAllUserAccounts:g}=e,v=(0,a.__rest)(e,["preCreateInstance","shouldOpenCreateModal","getAllUserAccounts"]);return(0,s.jsx)(r.J.Provider,Object.assign({value:{preCreateInstance:t,shouldOpenCreateModal:n,getAllUserAccounts:g}},{children:(0,s.jsxs)(o.ModalProvider,{children:[(0,s.jsx)(i.bN,{children:(0,s.jsx)(u.e0,Object.assign({},v,{children:(0,s.jsx)(l.o,Object.assign({"data-ouia-app-id":"dataPlane-streams"},v,{children:(0,s.jsx)(c.LF,Object.assign({"data-ouia-app-id":"TODO"},{children:(0,s.jsx)(p.R,{preCreateInstance:t})}))}))}))}),(0,s.jsx)(d.A,{})]})}))}},49626:(e,t,n)=>{n.d(t,{D:()=>c,a:()=>d});var a=n(42695),s=n(88601),i=n(93264),r=n(63550),o=n(24584);function d(){const e=(0,s.d)(),{kafkaRequestToKafkaInstance:t}=c();return(0,i.useCallback)(((n,s,i,o,d)=>(0,a.__awaiter)(this,void 0,void 0,(function*(){const a=e(),c={name:"name",owner:"owner",provider:"cloud_provider",region:"region",createdAt:"created_at"};try{const{name:e,status:u,owner:p}=i,g=[l("name",e,"%"),l("owner",p,"%"),l("status",u.flatMap((e=>r.SimplifiedStatuses[e])),"=")].filter(Boolean).map((e=>`(${e})`)).join(" and "),v=yield a.getKafkas(n.toString(10),s.toString(10),o?`${c[o]} ${d}`:void 0,g,{cache:!1}),h=v.data.items,x=v.data.total;return{instances:yield Promise.all(h.map(t)),count:x}}catch(e){return{instances:[],count:0}}}))),[e,t])}function c(){const e=(0,o.s9)(),t=(0,o.AU)("developer"),n=(0,o.AU)("standard");return{kafkaRequestToKafkaInstance:(0,i.useCallback)((s=>(0,a.__awaiter)(this,void 0,void 0,(function*(){var a;const i=s,{marketplaceSubscriptions:r}=yield e(),o={billing:void 0,connectionRate:0,connections:0,createdAt:i.created_at,egress:0,expiryDate:i.expires_at,id:i.id,ingress:0,maxPartitions:0,messageSize:0,name:i.name,owner:i.owner,plan:i.billing_model,provider:i.cloud_provider,region:i.region,size:"1",status:u(i.status),storage:0,updatedAt:i.updated_at,request:i};try{const e=null===(a=r.find((e=>e.subscriptions.find((e=>e===i.billing_cloud_account_id)))))||void 0===a?void 0:a.marketplace,t="standard"===i.billing_model?"prepaid":e?{marketplace:e,subscription:i.billing_cloud_account_id}:void 0;o.billing=t}catch(e){console.warn("kafkaRequestToKafkaInstance","couldn't retrieve the billing info for",i)}try{const e=("developer"===i.instance_type?yield t(i.cloud_provider,i.region):yield n(i.cloud_provider,i.region)).find((e=>e.id===i.size_id));e&&(o.size=e.displayName,o.ingress=e.ingress,o.egress=e.egress,o.storage=i.max_data_retention_size.bytes,o.connections=e.connections,o.connectionRate=e.connectionRate,o.maxPartitions=e.maxPartitions,o.messageSize=e.messageSize)}catch(e){console.warn("kafkaRequestToKafkaInstance","couldn't retrieve the limits info for",i)}return o}))),[t,e,n])}}function l(e,t,n){return t.map((t=>"%"===n?`${e} like %${t.trim()}%`:`${e} = ${t.trim()}`)).join(" or ")}function u(e){return{accepted:"accepted",preparing:"preparing",provisioning:"provisioning",ready:"ready",failed:"degraded",deprovision:"deprovision",deleting:"deleting"}[e]||"degraded"}},82519:(e,t,n)=>{n(93264)}}]);
