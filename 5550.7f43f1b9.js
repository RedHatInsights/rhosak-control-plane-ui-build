"use strict";(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[5550],{36953:(e,t,a)=>{a.d(t,{GX:()=>o,cW:()=>s});var r=a(70655),i=a(82625),n=a(30681),o=function(e){var t=e.kafkaId,a=e.timeDuration,i=e.timeInterval,o=e.accessToken,s=e.basePath;return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,c,u;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,new n.DefaultApi(new n.Configuration({accessToken:o,basePath:s})).getMetricsByRangeQuery(t,a,i,["kubelet_volume_stats_used_bytes"])];case 1:return e=r.sent(),c=(e.data.items||[]).filter((function(e){return!(e.values&&e.metric&&e.metric.topic&&e.metric.name&&e.metric.persistentvolumeclaim&&e.metric.persistentvolumeclaim.includes("zookeeper"))})),u={},c.forEach((function(e){e.values.forEach((function(e){var t=e.value,a=e.timestamp;return u[a]=t+(u[a]||0)}))})),[2,u]}}))}))},s=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,a,i,n,o,s,_;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([c({basePath:e.kafkaApiPath,accessToken:e.accessToken}),u(e)])];case 1:return t=r.sent(),a=t[0],i=t[1],n=i.topics,o=i.bytesIncoming,s=i.bytesOutgoing,_=i.bytesPerPartition,[2,{kafkaTopics:a,metricsTopics:n,bytesIncoming:o,bytesOutgoing:s,bytesPerPartition:_}]}}))}))},c=function(e){var t=e.accessToken,a=e.basePath;return(0,r.__awaiter)(void 0,void 0,Promise,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,new i.TopicsApi(new n.Configuration({accessToken:t,basePath:a})).getTopics(void 0,100,100,void 0,void 0,void 0,void 0)];case 1:return[2,(e.sent().data.items||[]).map((function(e){return e.name}))]}}))}))};function u(e){var t=e.accessToken,a=e.basePath,i=e.kafkaId,o=e.timeDuration,s=e.timeInterval,c=e.selectedTopic;return(0,r.__awaiter)(this,void 0,Promise,(function(){var e,u,_,f,m,v,l,k;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e=["__consumer_offsets","__strimzi_canary"],[4,new n.DefaultApi(new n.Configuration({accessToken:t,basePath:a})).getMetricsByRangeQuery(i,o,s,["kafka_server_brokertopicmetrics_bytes_in_total","kafka_server_brokertopicmetrics_bytes_out_total","kafka_topic:kafka_log_log_size:sum"])];case 1:return u=r.sent(),_=(u.data.items||[]).filter((function(t){var a;return!(t.values&&t.metric&&t.metric.topic&&t.metric.name||e.includes((null===(a=t.metric)||void 0===a?void 0:a.topic)||""))})),f=_.filter((function(e){var t;return void 0===c||(null===(t=e.metric)||void 0===t?void 0:t.topic)===c})),m=Array.from(new Set(_.map((function(e){return e.metric.topic})))),v={},l={},k={},f.forEach((function(e){var t,a=e.metric,r=a.__name__,i=a.topic;function n(t){e.values.forEach((function(e){var a=e.value,r=e.timestamp;return t[r]=a+(t[r]||0)}))}switch(r){case"kafka_server_brokertopicmetrics_bytes_in_total":n(v);break;case"kafka_server_brokertopicmetrics_bytes_out_total":n(l);break;case"kafka_topic:kafka_log_log_size:sum":t=k[i]||{},e.values.forEach((function(e){var a=e.value,r=e.timestamp;return t[r]=a+(t[r]||0)})),k[i]=t}})),[2,{topics:m,bytesOutgoing:l,bytesIncoming:v,bytesPerPartition:k}]}}))}))}},98597:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var r=a(75418),i=a.n(r),n=a(53832),o=a(78800),s=a(31521);const c=function(e){var t=e.kafkaId,a=e.apiBasePath,r=e.onCreateTopic;return i().createElement(s.I18nextProvider,{i18n:(0,o.Y)()},i().createElement(n.C,{kafkaId:t,apiBasePath:a,onCreateTopic:r}))}}}]);
//# sourceMappingURL=5550.7f43f1b9.js.map