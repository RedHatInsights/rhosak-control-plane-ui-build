"use strict";(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[8512],{88601:(e,n,t)=>{t.d(n,{c:()=>u,d:()=>d});var a=t(52212),r=t(8764),s=t(18423),i=t(22178),o=t(9669),l=t.n(o);const c=(0,i.createCacheAdapter)({debug:null!==localStorage.getItem("log-axios")}),d=()=>{const e=(0,a.useAuth)(),{kas:{apiBasePath:n}}=(0,a.useConfig)();return()=>new s.DefaultApi(new s.Configuration({accessToken:e.kas.getToken(),basePath:n}),void 0,l().create({adapter:c,cache:15e3}))},u=()=>{const e=(0,a.useAuth)(),{ams:{apiBasePath:n}}=(0,a.useConfig)();return()=>new r.AppServicesApi(new s.Configuration({accessToken:e.ams.getToken(),basePath:n}),void 0,l().create({adapter:c,cache:15e3}))}},13449:(e,n,t)=>{t.d(n,{J:()=>r,S:()=>s});var a=t(93264);const r=(0,a.createContext)(void 0),s=()=>(0,a.useContext)(r)},98512:(e,n,t)=>{t.r(n),t.d(n,{TransferOwnership:()=>m,default:()=>g});var a=t(9922),r=t(85893),s=t(88601),i=t(78261),o=t(99922),l=t(52212),c=t(93264),d=t(98743),u=t(13449);const _=()=>{const{getAllUserAccounts:e}=(0,u.S)()||{getAllUserAccounts:()=>[]},n=e&&e();return null==n?void 0:n.map((e=>{const{id:n,displayName:t}=e;return{id:n,displayName:t}}))},p=({selection:e,setSelection:n,allUsers:t})=>{const{t:a}=(0,d.useTranslation)(["kasTemporaryFixMe"]),[s,i]=(0,c.useState)(!1),l=(t||[]).map((e=>{const{id:n,displayName:t}=e;return(0,r.jsx)(o.SelectOption,Object.assign({value:n,description:t},{children:n}),n)})),u=()=>{n(void 0),i(!1)};return(0,r.jsx)(o.Select,Object.assign({id:"manage-permissions-owner-select",variant:o.SelectVariant.typeahead,onToggle:e=>{i(e)},isOpen:s,placeholderText:a("select_user_account"),createText:a("common.use"),menuAppendTo:"parent",maxHeight:400,onSelect:(e,t,a)=>{a&&u(),n(t.toString()),i(!1)},selections:e,isCreatable:!0,onFilter:(e,n)=>((e,n)=>{if(!e)return n;const t=new RegExp(e,"i");return null==n?void 0:n.filter((e=>t.test(e.props.value)||t.test(e.props.description)))})(n,l)},{children:l}))},m=({kafka:e,onClose:n,hideModal:t,refreshKafkas:u,variant:m,title:g})=>{const{t:A}=(0,d.useTranslation)(["kasTemporaryFixMe"]),h=(0,s.d)(),{addAlert:v}=(0,l.useAlert)()||{addAlert:()=>""},[E,w]=(0,c.useState)(),[O,R]=(0,c.useState)(),[C,T]=(0,c.useState)(),S=()=>{t(),n&&n()};return(0,r.jsx)(o.Modal,Object.assign({id:"manage-permissions-modal",title:g,isOpen:!0,onClose:S,variant:m,position:"top",actions:[(0,r.jsx)(o.Button,Object.assign({id:"confirm__button",variant:"primary",onClick:()=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){var n;if((null==E?void 0:E.trim())&&(null==e?void 0:e.id)){R(!0);const t={owner:E},a=h();try{yield a.updateKafkaById(e.id,t).then((()=>{u&&u(),v({title:A("owner_change_sucess_title"),variant:o.AlertVariant.success,description:A("owner_change_sucess_message",{newOwner:E,name:null==e?void 0:e.name})}),R(!1),S()}))}catch(e){let t;(0,i.G6)(e)&&(t=null===(n=e.response)||void 0===n?void 0:n.data.code),T(t),R(!1)}}})),isLoading:O,isDisabled:!(null==E?void 0:E.trim())||O},{children:A("common.change_owner")}),"changeowner"),(0,r.jsx)(o.Button,Object.assign({id:"cancel__button",variant:"link",onClick:S},{children:A("cancel")}),"cancel")]},{children:(0,r.jsxs)(o.Form,{children:[(()=>{let n,t;return C===i.SM.OWNER_DOES_NOT_EXIST?(n=A("new_owner_does_not_exist_title"),t=A("new_owner_does_not_exist_message",{newOwner:E})):C&&(n=A("can_not_change_owner_title"),t=A("onwer_transfer_failed_message",{name:null==e?void 0:e.name})),n&&t?(0,r.jsx)(o.Alert,Object.assign({variant:o.AlertVariant.danger,"aria-live":"polite",isInline:!0,title:n},{children:t})):(0,r.jsx)(r.Fragment,{})})(),(0,r.jsx)(o.FormGroup,Object.assign({fieldId:"Current-owner-name",label:A("current_owner_name")},{children:null==e?void 0:e.owner})),(0,r.jsx)(o.FormGroup,Object.assign({fieldId:"New-owner-name",label:A("new_owner_name")},{children:(0,r.jsx)(p,{selection:E,setSelection:w,allUsers:_()})}))]})}))},g=m},78261:(e,n,t)=>{t.d(n,{G6:()=>a.isServiceApiError,SM:()=>r});var a=t(18423);const r={UNAUTHORIZED_USER:a.APIErrorCodes.ERROR_4,DUPLICATE_INSTANCE_NAME:a.APIErrorCodes.ERROR_36,INTERNAL_CAPACITY_ERROR:a.APIErrorCodes.ERROR_24,INSUFFICIENT_QUOTA:a.APIErrorCodes.ERROR_120,TRIAL_USED:a.APIErrorCodes.ERROR_5,FAILED_TO_CHECK_QUOTA:a.APIErrorCodes.ERROR_121,OWNER_DOES_NOT_EXIST:a.APIErrorCodes.ERROR_21}}}]);
//# sourceMappingURL=8512.b4ba0188.js.map