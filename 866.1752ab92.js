(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[866],{86153:(e,t,n)=>{"use strict";n.d(t,{i:()=>g});var r=n(70655),a=n(48121),i=n.n(a),l=n(25399),o=n(42603),c=n(9995),s=n(23141),u=n(68908),d=n(56777),m=n(84564),f=n(13006),v=n(75381),_=n(99229),p=n(94179),g=function(e){var t=e.isOpen,n=e.setIsOpen,g=e.fetchServiceAccounts,h=new u.N,S=(0,a.useState)({fieldState:"default"}),b=S[0],E=S[1],w=(0,a.useState)({fieldState:"default"}),x=w[0],A=w[1],y=(0,a.useState)(h),C=y[0],T=y[1],I=(0,a.useState)(!0),V=I[0],k=I[1],O=(0,a.useState)(!1),P=O[0],D=O[1],F=(0,a.useState)(),B=F[0],L=F[1],G=(0,a.useState)(!1),M=G[0],N=G[1],Z=(0,f.useTranslation)().t,R=(0,a.useContext)(o.V),z=(0,a.useContext)(c.G).basePath,K=(0,_.Z7)().addAlert,j=function(){E({fieldState:"default"}),A({fieldState:"default"}),T(h),k(!0)};(0,a.useEffect)((function(){"error"!==b.fieldState&&"error"!==x.fieldState&&k(!0)}),[b.fieldState,x.fieldState]);var $,q,U,H,W,J,Q=function(e){T((0,r.__assign)((0,r.__assign)({},C),{name:e}));var t=!0;e&&!/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(e.trim())&&(t=!1),e&&e.length>v.Nw?E({fieldState:"error",message:Z("serviceAccount.service_account_name_length_is_greater_than_expected",{maxLength:v.Nw})}):t&&"error"===b.fieldState?E({fieldState:"default",message:""}):t||E({fieldState:"error",message:Z("common.input_filed_invalid_helper_text")})},X=function(e){T((0,r.__assign)((0,r.__assign)({},C),{description:e}));var t=!0;e&&!/^[a-zA-Z0-9\s]*$/.test(e.trim())&&(t=!1),e&&e.length>v.lt?A({fieldState:"error",message:Z("serviceAccount.service_account_description_length_is_greater_than_expected",{maxLength:v.lt})}):t&&"error"===x.fieldState?A({fieldState:"default",message:""}):t||A({fieldState:"error",message:Z("common.input_text_area_invalid_helper_text")})},Y=function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,t;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return function(){var e=!0,t=C.name,n=C.description;return t&&""!==t.trim()?/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(t.trim())?/^[a-zA-Z0-9\s]*$/.test(n.trim())||(e=!1,A({fieldState:"error",message:Z("common.input_text_area_invalid_helper_text")})):(e=!1,E({fieldState:"error",message:Z("common.input_filed_invalid_helper_text")})):(e=!1,E({fieldState:"error",message:Z("common.this_is_a_required_field")})),t.length>v.Nw&&(e=!1,E({fieldState:"error",message:Z("serviceAccount.service_account_name_length_is_greater_than_expected",{maxLength:v.Nw})})),n&&n.length>v.lt&&(e=!1,A({fieldState:"error",message:Z("serviceAccount.service_account_name_length_is_greater_than_expected",{maxLength:v.lt})})),e}()?[4,null==R?void 0:R.getToken()]:(k(!1),[2]);case 1:if(!(e=r.sent()))return[3,5];r.label=2;case 2:return r.trys.push([2,4,,5]),t=new s.M2({accessToken:e,basePath:z}),D(!0),[4,t.createServiceAccount(C).then((function(e){L(null==e?void 0:e.data),n(!1),N(!0),j(),K(Z("serviceAccount.service_account_creation_success_message"),l.AlertVariant.success),g()}))];case 3:return r.sent(),[3,5];case 4:return function(e){var t,n;(0,v.G6)(e)&&(n=null===(t=e.response)||void 0===t?void 0:t.data.reason),K(Z("something_went_wrong"),l.AlertVariant.danger,n)}(r.sent()),[3,5];case 5:return D(!1),[2]}}))}))},ee=function(e){e.preventDefault(),Y()};return i().createElement(i().Fragment,null,i().createElement(d.a,{isModalOpen:t,title:Z("serviceAccount.create_a_service_account"),handleModalToggle:function(){j(),n(!t)},onCreate:Y,isFormValid:V,primaryButtonTitle:"Create",isCreationInProgress:P},($=b.message,q=b.fieldState,U=C.name,H=C.description,W=x.message,J=x.fieldState,i().createElement(l.Form,{onSubmit:ee},!V&&i().createElement(l.FormAlert,null,i().createElement(l.Alert,{variant:"danger",title:Z("common.form_invalid_alert"),"aria-live":"polite",isInline:!0})),i().createElement(l.FormGroup,{label:"Name",isRequired:!0,fieldId:"text-input-name",helperTextInvalid:$,helperTextInvalidIcon:$&&i().createElement(m.ZP,null),validated:q,helperText:Z("common.input_filed_invalid_helper_text")},i().createElement(l.TextInput,{isRequired:!0,type:"text",id:"text-input-name",name:"text-input-name",value:U,onChange:Q,validated:q})),i().createElement(l.FormGroup,{label:"Description",fieldId:"text-input-description",helperTextInvalid:W,helperTextInvalidIcon:W&&i().createElement(m.ZP,null),validated:J,helperText:Z("common.input_text_area_invalid_helper_text")},i().createElement(l.TextArea,{id:"text-input-description",name:"text-input-description",value:H,onChange:X,validated:J}))))),i().createElement(p.L,{isOpen:M,setIsOpen:N,credential:B,setCredential:L}))}},89403:(e,t,n)=>{"use strict";n.d(t,{N:()=>v});var r=n(70655),a=n(48121),i=n.n(a),l=n(25399),o=n(42603),c=n(9995),s=n(23141),u=n(7562),d=n(99229),m=n(13006),f=n(75381),v=function(e){var t=e.isOpen,n=e.setIsOpen,v=e.fetchServiceAccounts,_=e.serviceAccountToDelete,p=(0,m.useTranslation)().t,g=(0,a.useContext)(o.V),h=(0,a.useContext)(c.G).basePath,S=(0,d.Z7)().addAlert,b=(0,a.useState)(!1),E=b[0],w=b[1],x=function(){n(!t)};return i().createElement(u.A,{isModalOpen:t,handleModalToggle:x,title:p("serviceAccount.delete_service_account")+"?",confirmButtonProps:{onClick:function(){return e=_,(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,n,a,i,o,c;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(void 0===(t=null==e?void 0:e.id))throw new Error("service account id not defined");return[4,null==g?void 0:g.getToken()];case 1:if(!(n=r.sent()))return[3,5];a=new s.M2({accessToken:n,basePath:h}),w(!0),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,a.deleteServiceAccount(t).then((function(t){x(),w(!1),S(p("serviceAccount.service_account_successfully_deleted",{name:null==e?void 0:e.name}),l.AlertVariant.success),v()}))];case 3:return r.sent(),[3,5];case 4:return i=r.sent(),o=void 0,(0,f.G6)(i)&&(o=null===(c=i.response)||void 0===c?void 0:c.data.reason),x(),w(!1),S(p("common.something_went_wrong"),l.AlertVariant.danger,o),[3,5];case 5:return[2]}}))}));var e},label:"Delete",isLoading:E}},i().createElement("p",null,i().createElement("b",null,null==_?void 0:_.name)," ",p("serviceAccount.will_be_deleted")))}},65746:(e,t,n)=>{"use strict";n.d(t,{O:()=>v});var r=n(70655),a=n(48121),i=n.n(a),l=n(25399),o=n(42603),c=n(9995),s=n(23141),u=n(75381),d=n(13006),m=n(99229),f=n(94179),v=function(e){var t=e.isOpen,n=e.setIsOpen,v=e.serviceAccountToReset,_=(0,d.useTranslation)().t,p=(0,a.useContext)(o.V),g=(0,a.useContext)(c.G).basePath,h=(0,m.Z7)().addAlert,S=i().useState(!1),b=S[0],E=S[1],w=(0,a.useState)(),x=w[0],A=w[1],y=(0,a.useState)(!1),C=y[0],T=y[1],I=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,a,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return t=null==e?void 0:e.id,[4,null==p?void 0:p.getToken()];case 1:if(a=r.sent(),!(0,u.wu)(a))return[3,5];r.label=2;case 2:return r.trys.push([2,4,,5]),i=new s.M2({accessToken:a,basePath:g}),E(!0),[4,i.resetServiceAccountCreds(t).then((function(e){A(null==e?void 0:e.data),n(!1),E(!1),T(!0)}))];case 3:return r.sent(),[3,5];case 4:return function(e){var t,n;(0,u.G6)(e)&&(n=null===(t=e.response)||void 0===t?void 0:t.data.reason),h(_("something_went_wrong"),l.AlertVariant.danger,n)}(r.sent()),E(!1),[3,5];case 5:return[2]}}))}))},V=function(){n(!t)},k=null==v?void 0:v.name,O=null==v?void 0:v.clientID;return i().createElement(i().Fragment,null,i().createElement(l.Modal,{id:"reset-service-account-modal",variant:l.ModalVariant.medium,title:_("serviceAccount.reset_service_account_credentials"),isOpen:t,onClose:V,actions:[i().createElement(l.Button,{key:"create",variant:"primary",type:"submit",onClick:function(){return I(v)},spinnerAriaValueText:_("common.submitting_request"),isLoading:b},_("serviceAccount.reset")),i().createElement(l.Button,{key:"cancel",variant:"link",onClick:V},_("common.cancel"))]},i().createElement("span",{dangerouslySetInnerHTML:{__html:_("serviceAccount.client_secret_will_be_reset",{serviceAccountId:k,clientID:O})}})),i().createElement(f.L,{title:"Reset service account credentials",isOpen:C,setIsOpen:T,credential:x,setCredential:A}))}},26992:(e,t,n)=>{"use strict";n.d(t,{s:()=>_});var r=n(70655),a=n(48121),i=n.n(a),l=n(13006),o=n(70726),c=n(25399),s=n(48784),u=n(75381),d=n(8755),m=n(71070),f=function(e){var t=e.filterSelected,n=e.setFilterSelected,r=(e.total,e.page,e.perPage,e.filteredValue),o=e.setFilteredValue,u=e.handleCreateModal,f=(0,l.useTranslation)().t,v=(0,a.useRef)(),_=(0,a.useRef)(),p=(0,a.useState)(!1),g=p[0],h=p[1],S=(0,a.useState)(!0),b=S[0],E=S[1],w=(0,a.useState)(!0),x=w[0],A=w[1],y=(0,a.useState)(!1),C=y[0],T=(y[1],(0,a.useState)()),I=T[0],V=T[1],k=(0,a.useState)(),O=k[0],P=k[1],D=(0,a.useState)(!1),F=(D[0],D[1],[{label:f("name"),value:"name",disabled:!1},{label:f("owner"),value:"owner",disabled:!1}]),B=function(e){return!e||/^([a-zA-Z0-9-_%]*[a-zA-Z0-9-_%])?$/.test(e.trim())},L=function(e,t,n){var a=Object.assign([],r),i=a.findIndex((function(t){return t.filterKey===e}));if(i>-1){var l=a[i];if(l.filterValue&&l.filterValue.length>0){var c=l.filterValue.findIndex((function(e){return e.value===t.value}));if(c>-1){if(!n)return;l.filterValue.splice(c,1)}else a[i].filterValue.push(t)}else a[i].filterValue=[t]}else a.push({filterKey:e,filterValue:[t]});o(a)},G=function(e){"name"===e&&I&&""!=I.trim()?B(I)?(L("name",{value:I,isExact:!1},!1),V("")):E(!1):"owner"===e&&O&&""!=O.trim()&&(B(O)?(L("owner",{value:O,isExact:!1},!1),P("")):A(!1))},M=function(e){var t;if("Enter"===e.key&&!C){var n=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.name;G(n)}},N=function(e){return C?i().createElement("div",null,f("max_filter_message")):i().createElement("div",null,f("input_field_invalid_message",{name:e}))},Z=function(e){var t=r.filter((function(t){return t.filterKey===e}));return t.length>0?t[0].filterValue.map((function(e){return e.value})):[]},R=function(e,t,n){var a,i,l=Object.assign([],r),c=l.findIndex((function(t){return t.filterKey===e})),s=Object.assign([],null===(a=l[c])||void 0===a?void 0:a.filterValue),u=t.toString();n&&(null==n?void 0:n.length)>0&&(u=null===(i=null==n?void 0:n.find((function(e){return e.label===t.toString()})))||void 0===i?void 0:i.value);var d=s.findIndex((function(e){return e.value===u}));d>=0&&(l[c].filterValue.splice(d,1),o(l))},z=function(e){var t=Object.assign([],r),n=t.findIndex((function(t){return t.filterKey===e}));n>=0&&(t.splice(n,1),o(t))},K=(i().createElement(i().Fragment,null,i().createElement(c.ToolbarGroup,{variant:"filter-group"},i().createElement(c.ToolbarItem,null,i().createElement(c.Select,{variant:c.SelectVariant.single,"aria-label":"Select filter",onToggle:function(){h(!g)},selections:t,isOpen:g,onSelect:function(e,t){h(!g),n(null==t?void 0:t.toString())}},F.map((function(e,t){return i().createElement(c.SelectOption,{isDisabled:e.disabled,key:t,value:e.value},e.label)})))),i().createElement(c.ToolbarFilter,{chips:Z("name"),deleteChip:function(e,t){return R("name",t)},deleteChipGroup:function(){return z("name")},categoryName:f("name")},"name"===(null==t?void 0:t.toLowerCase())&&i().createElement(c.ToolbarItem,null,i().createElement(c.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},i().createElement(c.TextInput,{name:"name",id:"name-input",type:"search","aria-label":f("filter_by_name_lower"),validated:!b||C?c.ValidatedOptions.error:c.ValidatedOptions.default,placeholder:f("filter_by_name_lower"),onChange:function(e){V(e),!b&&E(!0)},onKeyPress:M,value:I,ref:v}),i().createElement(c.Button,{variant:c.ButtonVariant.control,isDisabled:!b||C,onClick:function(){return G("name")},"aria-label":f("filter_by_name_lower")},i().createElement(m.ZP,null)),(!b||C)&&i().createElement(c.Tooltip,{isVisible:C||!b,content:N("name"),reference:v})))),i().createElement(c.ToolbarFilter,{chips:Z("owner"),deleteChip:function(e,t){return R("owner",t)},deleteChipGroup:function(){return z("owner")},categoryName:f("owner")},"owner"===(null==t?void 0:t.toLowerCase())&&i().createElement(c.ToolbarItem,null,i().createElement(c.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},i().createElement(c.TextInput,{name:"owner",id:"owner-input",type:"search","aria-label":f("filter_by_owner"),placeholder:f("filter_by_owner"),validated:!x||C?c.ValidatedOptions.error:c.ValidatedOptions.default,onChange:function(e){P(e),!x&&A(!0)},onKeyPress:M,value:O,ref:_}),i().createElement(c.Button,{isDisabled:!x||C,variant:c.ButtonVariant.control,onClick:function(){return G("owner")},"aria-label":f("filter_by_owner")},i().createElement(m.ZP,null)),(!x||C)&&i().createElement(c.Tooltip,{isVisible:C||!x,content:N("owner"),reference:_})))))),[{item:i().createElement(c.Button,{variant:"primary",onClick:u,"data-testid":"tableServiceAccounts-buttonCreateServiceAccount"},f("serviceAccount.create_service_account"))}]);return i().createElement(s.L5,{toolbarProps:{id:"instance-toolbar",clearAllFilters:function(){o([])},collapseListedFiltersBreakpoint:"md",inset:{lg:"insetLg"}},toggleGroupProps:{toggleIcon:i().createElement(d.ZP,null),breakpoint:"md"},toolbarItems:K})},v=n(42603),_=function(e){var t=e.page,n=e.perPage,d=e.expectedTotal,m=e.total,_=e.serviceAccountsDataLoaded,p=e.serviceAccountItems,g=e.onResetCredentials,h=e.onDeleteServiceAccount,S=e.orderBy,b=e.setOrderBy,E=e.filteredValue,w=e.setFilteredValue,x=e.filterSelected,A=e.setFilterSelected,y=e.handleCreateModal,C=e.mainToggle,T=(0,l.useTranslation)().t,I=(0,a.useContext)(v.V),V=(0,a.useState)(void 0),k=V[0],O=V[1];(0,a.useEffect)((function(){null==I||I.getUsername().then((function(e){return O(e)}))}),[]);var P=[{title:T("common.name")},{title:T("common.clientID")},{title:T("common.owner"),transforms:[(0,o.cellWidth)(20)]},{title:T("common.description")},{title:T("time_created")}],D=function(e,t,n){var r,a,i,l;"reset-credentials"===n?g&&g(t):"delete-account"===n&&h&&h(t),null===(l=null===(i=null===(a=null===(r=null==e?void 0:e.target)||void 0===r?void 0:r.parentElement)||void 0===a?void 0:a.parentElement)||void 0===i?void 0:i.previousSibling)||void 0===l||l.focus()},F=function(e){switch(e.toLowerCase()){case"name":return 0;case"clientID":return 1;case"owner":return 2;case"description":return 3;case"created_at":return 4;default:return}};return i().createElement(i().Fragment,null,i().createElement(f,{filterSelected:x,setFilterSelected:A,total:m,page:t,perPage:n,filteredValue:E,setFilteredValue:w,handleCreateModal:y,mainToggle:C}),i().createElement(s.wR,{tableProps:{cells:P,rows:function(){var e=[],r=(0,u.o8)(t,n,d);if(!_){for(var a=[],l=0;l<P.length;l++)a.push({title:i().createElement(c.Skeleton,null)});for(l=0;l<r;l++)e.push({cells:a});return e}return null==p||p.forEach((function(t){var n=t.name,r=t.owner,a=t.description,i=t.clientID,l=t.created_at;e.push({cells:[n,i,r,a,{title:(0,u.L0)(l,T("ago"))}],originalData:t})})),e}(),"aria-label":T("serviceAccount.service_account_list"),actionResolver:function(e,t){return function(e,t){var n,a;if(!_)return[];var i,l=e.originalData,o=l.owner===k;return o||(i={tooltip:!0,tooltipProps:{position:"left",content:T("serviceAccount.no_permission_to_delete_service_account")},isDisabled:!0,style:{pointerEvents:"auto",cursor:"default"}}),[(n={title:T("common.reset_credentials"),id:"reset-credentials"},n["data-testid"]="tableServiceAccounts-actionResetCredentials",n.onClick=function(e){return D(e,l,"reset-credentials")},n),(0,r.__assign)((a={title:T("serviceAccount.delete_service_account"),id:"delete-account"},a["data-testid"]="tableServiceAccounts-actionDeleteAccount",a.onClick=function(e){return o&&D(e,l,"delete-account")},a),i)]}(e)},onSort:function(e,t,n,r){b&&b(function(e){switch(e){case 0:return"name";case 1:return"clientID";case 2:return"owner";case 3:return"description";case 4:return"created_at";default:return""}}(t)+" "+n)},sortBy:function(){var e=(null==S?void 0:S.split(" "))||[];if(e.length>1)return{index:F(e[0]),direction:e[1]===o.SortByDirection.asc?o.SortByDirection.asc:o.SortByDirection.desc}}()}}),p&&(null==p?void 0:p.length)<1&&_&&i().createElement(s.C0,{emptyStateProps:{variant:s.jU.NoResult},titleProps:{title:T("no_results_found")},emptyStateBodyProps:{body:T("adjust_your_filters_and_try_again")}}))}}}]);
//# sourceMappingURL=866.1752ab92.js.map