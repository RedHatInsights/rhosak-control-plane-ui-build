(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[918],{87134:(e,t,n)=>{"use strict";n.d(t,{i:()=>p});var a=n(70655),r=n(48121),i=n.n(r),l=n(25399),o=n(42603),u=n(9995),c=n(23141),s=function(){this.name,this.description},d=n(75381),p=function(e){var t=e.isOpen,n=e.setIsOpen,p=new s;p.name="",p.description="";var m=(0,r.useState)(""),f=m[0],g=m[1],v=(0,r.useState)(""),_=v[0],b=v[1],h=(0,r.useState)(p),E=h[0],S=h[1],w=(0,r.useState)(!0),y=w[0],C=w[1],P=(0,r.useContext)(o.V),x=(0,r.useContext)(u.G).basePath,V=function(){S((0,a.__assign)((0,a.__assign)({},E),{name:"",description:""})),C(!0)},I=function(e){C(!0),g(e),S((0,a.__assign)((0,a.__assign)({},E),{name:e}))},k=function(e){C(!0),b(e),S((0,a.__assign)((0,a.__assign)({},E),{description:e}))},T=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,r;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return e=function(){var e=!0,t=E.name,n=E.description;return t&&""!==t.trim()||(e=!1),n&&""!==n.trim()||(e=!1),e}(),[4,null==P?void 0:P.getToken()];case 1:return t=a.sent(),e?[3,2]:(C(!1),[3,6]);case 2:if(!(0,d.wu)(t))return[3,6];a.label=3;case 3:return a.trys.push([3,5,,6]),[4,new c.M2({accessToken:t,basePath:x}).createServiceAccount(E).then((function(e){e.status>=200&&(V(),n(!1))}))];case 4:return a.sent(),[3,6];case 5:return r=a.sent(),console.log(r),[3,6];case 6:return[2]}}))}))},F=function(){V(),n(!t)};return i().createElement(l.Modal,{id:"create-service-account-modal",variant:l.ModalVariant.medium,title:"Create a service account",description:"Enter a name and description for your service account",isOpen:t,onClose:function(){return F()},actions:[i().createElement(l.Button,{key:"create",variant:"primary",type:"submit",onClick:function(){return T()},isDisabled:!y,spinnerAriaValueText:"submitting_request",isLoading:!1},"Create"),i().createElement(l.Button,{key:"cancel",variant:"link",onClick:function(){return F()}},"Cancel")]},i().createElement(l.Form,null,i().createElement(l.FormGroup,{label:"Name",isRequired:!0,fieldId:"form-group-name"},i().createElement(l.TextInput,{isRequired:!0,type:"text",id:"text-input-name",name:"text-input-name","aria-label":"Input name",value:f,onChange:I})),i().createElement(l.FormGroup,{label:"Description",fieldId:"form-group-name"},i().createElement(l.TextInput,{isRequired:!0,type:"text",id:"text-input-description",name:"text-input-description","aria-label":"Input description",value:_,onChange:k}))))}},26992:(e,t,n)=>{"use strict";n.d(t,{s:()=>f});var a=n(70655),r=n(48121),i=n.n(r),l=n(13006),o=n(70726),u=n(25399),c=n(48784),s=n(75381),d=n(8755),p=n(71070),m=function(e){var t=e.filterSelected,n=e.setFilterSelected,a=e.total,o=e.page,s=e.perPage,m=e.filteredValue,f=e.setFilteredValue,g=e.handleCreateModal,v=(0,l.useTranslation)().t,_=(0,r.useRef)(),b=(0,r.useRef)(),h=(0,r.useState)(!1),E=h[0],S=h[1],w=(0,r.useState)(!0),y=w[0],C=w[1],P=(0,r.useState)(!0),x=P[0],V=P[1],I=(0,r.useState)(!1),k=I[0],T=(I[1],(0,r.useState)()),F=T[0],A=T[1],B=(0,r.useState)(),O=B[0],D=B[1],L=(0,r.useState)(!1),G=(L[0],L[1],[{label:v("name"),value:"name",disabled:!1},{label:v("owner"),value:"owner",disabled:!1}]),R=function(e){return!e||/^([a-zA-Z0-9-_%]*[a-zA-Z0-9-_%])?$/.test(e.trim())},K=function(e,t,n){var a=Object.assign([],m),r=a.findIndex((function(t){return t.filterKey===e}));if(r>-1){var i=a[r];if(i.filterValue&&i.filterValue.length>0){var l=i.filterValue.findIndex((function(e){return e.value===t.value}));if(l>-1){if(!n)return;i.filterValue.splice(l,1)}else a[r].filterValue.push(t)}else a[r].filterValue=[t]}else a.push({filterKey:e,filterValue:[t]});f(a)},N=function(e){"name"===e&&F&&""!=F.trim()?R(F)?(K("name",{value:F,isExact:!1},!1),A("")):C(!1):"owner"===e&&O&&""!=O.trim()&&(R(O)?(K("owner",{value:O,isExact:!1},!1),D("")):V(!1))},M=function(e){var t;if("Enter"===e.key&&!k){var n=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.name;N(n)}},Z=function(e){return k?i().createElement("div",null,v("max_filter_message")):i().createElement("div",null,v("input_field_invalid_message",{name:e}))},j=function(e){var t=m.filter((function(t){return t.filterKey===e}));return t.length>0?t[0].filterValue.map((function(e){return e.value})):[]},q=function(e,t,n){var a,r,i=Object.assign([],m),l=i.findIndex((function(t){return t.filterKey===e})),o=Object.assign([],null===(a=i[l])||void 0===a?void 0:a.filterValue),u=t.toString();n&&(null==n?void 0:n.length)>0&&(u=null===(r=null==n?void 0:n.find((function(e){return e.label===t.toString()})))||void 0===r?void 0:r.value);var c=o.findIndex((function(e){return e.value===u}));c>=0&&(i[l].filterValue.splice(c,1),f(i))},z=function(e){var t=Object.assign([],m),n=t.findIndex((function(t){return t.filterKey===e}));n>=0&&(t.splice(n,1),f(t))},$=i().createElement(i().Fragment,null,i().createElement(u.ToolbarGroup,{variant:"filter-group"},i().createElement(u.ToolbarItem,null,i().createElement(u.Select,{variant:u.SelectVariant.single,"aria-label":"Select filter",onToggle:function(){S(!E)},selections:t,isOpen:E,onSelect:function(e,t){S(!E),n(null==t?void 0:t.toString())}},G.map((function(e,t){return i().createElement(u.SelectOption,{isDisabled:e.disabled,key:t,value:e.value},e.label)})))),i().createElement(u.ToolbarFilter,{chips:j("name"),deleteChip:function(e,t){return q("name",t)},deleteChipGroup:function(){return z("name")},categoryName:v("name")},"name"===(null==t?void 0:t.toLowerCase())&&i().createElement(u.ToolbarItem,null,i().createElement(u.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},i().createElement(u.TextInput,{name:"name",id:"name-input",type:"search","aria-label":v("filter_by_name_lower"),validated:!y||k?u.ValidatedOptions.error:u.ValidatedOptions.default,placeholder:v("filter_by_name_lower"),onChange:function(e){A(e),!y&&C(!0)},onKeyPress:M,value:F,ref:_}),i().createElement(u.Button,{variant:u.ButtonVariant.control,isDisabled:!y||k,onClick:function(){return N("name")},"aria-label":v("filter_by_name_lower")},i().createElement(p.ZP,null)),(!y||k)&&i().createElement(u.Tooltip,{isVisible:k||!y,content:Z("name"),reference:_})))),i().createElement(u.ToolbarFilter,{chips:j("owner"),deleteChip:function(e,t){return q("owner",t)},deleteChipGroup:function(){return z("owner")},categoryName:v("owner")},"owner"===(null==t?void 0:t.toLowerCase())&&i().createElement(u.ToolbarItem,null,i().createElement(u.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},i().createElement(u.TextInput,{name:"owner",id:"owner-input",type:"search","aria-label":v("filter_by_owner"),placeholder:v("filter_by_owner"),validated:!x||k?u.ValidatedOptions.error:u.ValidatedOptions.default,onChange:function(e){D(e),!x&&V(!0)},onKeyPress:M,value:O,ref:b}),i().createElement(u.Button,{isDisabled:!x||k,variant:u.ButtonVariant.control,onClick:function(){return N("owner")},"aria-label":v("filter_by_owner")},i().createElement(p.ZP,null)),(!x||k)&&i().createElement(u.Tooltip,{isVisible:k||!x,content:Z("owner"),reference:b})))))),H=[{item:i().createElement(u.Button,{variant:"primary",onClick:g,"data-testid":"tableServiceAccounts-buttonCreateServiceAccount"},v("serviceAccount.create_service_account"))}];return a&&a>0&&1===H.length&&H.push({item:i().createElement(c.wu,{widgetId:"pagination-options-menu-top",itemCount:a,page:o,perPage:s,isCompact:!0,titles:{paginationTitle:v("minimal_pagination"),perPageSuffix:v("per_page_suffix"),toFirstPage:v("to_first_page"),toPreviousPage:v("to_previous_page"),toLastPage:v("to_last_page"),toNextPage:v("to_next_page"),optionsToggle:v("options_toggle"),currPage:v("curr_page")}}),variant:"pagination",alignment:{default:"alignRight"}}),i().createElement(c.L5,{toolbarProps:{id:"instance-toolbar",clearAllFilters:function(){f([])},collapseListedFiltersBreakpoint:"md",inset:{lg:"insetLg"}},toggleGroupProps:{toggleIcon:i().createElement(d.ZP,null),breakpoint:"md"},toggleGroupItems:$,toolbarItems:H})},f=function(e){var t=e.page,n=e.perPage,d=e.expectedTotal,f=e.total,g=e.serviceAccountsDataLoaded,v=e.serviceAccountItems,_=e.onResetCredentials,b=e.onDeleteServiceAccount,h=e.orderBy,E=e.setOrderBy,S=e.filteredValue,w=e.setFilteredValue,y=e.filterSelected,C=e.setFilterSelected,P=e.handleCreateModal,x=(0,l.useTranslation)().t,V=(0,r.useState)(void 0),I=(V[0],V[1],[{title:x("common.name"),transforms:[o.sortable]},{title:x("common.owner"),transforms:[o.sortable]},{title:x("common.description")}]),k=function(e,t,n){var a,r,i,l;"reset-credentials"===n?_&&_(t):"delete-account"===n&&b&&b(t),null===(l=null===(i=null===(r=null===(a=null==e?void 0:e.target)||void 0===a?void 0:a.parentElement)||void 0===r?void 0:r.parentElement)||void 0===i?void 0:i.previousSibling)||void 0===l||l.focus()},T=function(e){switch(e.toLowerCase()){case"name":return 0;case"owner":return 1;case"description":return 2;default:return}};return i().createElement(i().Fragment,null,i().createElement(m,{filterSelected:y,setFilterSelected:C,total:f,page:t,perPage:n,filteredValue:S,setFilteredValue:w,handleCreateModal:P}),i().createElement(c.wR,{tableProps:{cells:I,rows:function(){var e=[],a=(0,s.o8)(t,n,d);if(!g){for(var r=[],l=0;l<I.length;l++)r.push({title:i().createElement(u.Skeleton,null)});for(l=0;l<a;l++)e.push({cells:r});return e}return null==v||v.forEach((function(t){var n=t.name,a=(t.owner,t.description);e.push({cells:[n,"owner-test",a],originalData:t})})),e}(),"aria-label":x("serviceAccount.service_account_list"),actionResolver:function(e,t){return function(e,t){var n,r;if(!g)return[];var i,l=e.originalData;return[(n={title:x("common.reset_credentials"),id:"reset-credentials"},n["data-testid"]="tableServiceAccounts-actionResetCredentials",n.onClick=function(e){return k(e,l,"reset-credentials")},n),(0,a.__assign)((r={title:x("serviceAccount.delete_service_account"),id:"delete-account"},r["data-testid"]="tableServiceAccounts-actionDeleteAccount",r.onClick=function(e){return k(e,l,"delete-account")},r),i)]}(e)},onSort:function(e,t,n,a){E&&E(function(e){switch(e){case 0:return"name";case 1:return"owner";case 2:return"description";default:return""}}(t)+" "+n)},sortBy:function(){var e=(null==h?void 0:h.split(" "))||[];if(e.length>1)return{index:T(e[0]),direction:e[1]===o.SortByDirection.asc?o.SortByDirection.asc:o.SortByDirection.desc}}()}}),v&&(null==v?void 0:v.length)<1&&g&&i().createElement(c.C0,{emptyStateProps:{variant:u.EmptyStateVariant.full},emptyStateIconProps:{icon:p.ZP},titleProps:{title:x("no_results_found"),headingLevel:"h2",size:u.TitleSizes.lg},emptyStateBodyProps:{body:x("no_results_match_the_filter_criteria")}}),f&&f>0&&i().createElement(c.wu,{widgetId:"pagination-options-menu-bottom",itemCount:f,variant:u.PaginationVariant.bottom,page:t,perPage:n,titles:{paginationTitle:x("full_pagination"),perPageSuffix:x("per_page_suffix"),toFirstPage:x("to_first_page"),toPreviousPage:x("to_previous_page"),toLastPage:x("to_last_page"),toNextPage:x("to_next_page"),optionsToggle:x("options_toggle"),currPage:x("curr_page")}}))}}}]);
//# sourceMappingURL=918.36309886.js.map