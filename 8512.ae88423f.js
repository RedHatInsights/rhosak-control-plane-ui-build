"use strict";(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[8512],{13449:(e,n,t)=>{t.d(n,{J:()=>a,S:()=>o});var r=t(75418),a=t.n(r)().createContext(void 0),o=function(){return(0,r.useContext)(a)}},98512:(e,n,t)=>{t.r(n),t.d(n,{TransferOwnership:()=>m,default:()=>E});var r=t(223),a=t(75418),o=t.n(a),i=t(8898),s=t(99421),l=t(13449),u=function(e){var n=e.selection,t=e.setSelection,r=e.allUsers,l=(0,i.useTranslation)(["kasTemporaryFixMe"]).t,u=(0,a.useState)(!1),c=u[0],d=u[1],_=r&&(null==r?void 0:r.map((function(e){var n=e.id,t=e.displayName;return o().createElement(s.SelectOption,{key:n,value:n,description:t},n)}))),m=function(){t(void 0),d(!1)};return o().createElement(s.Select,{id:"manage-permissions-owner-select",variant:s.SelectVariant.typeahead,onToggle:function(e){d(e)},isOpen:c,placeholderText:l("select_user_account"),createText:l("common.use"),menuAppendTo:"parent",maxHeight:400,onSelect:function(e,n,r){r&&m(),t(n.toString()),d(!1)},selections:n,isCreatable:!0,onFilter:function(e,n){return function(e,n){if(!e)return n;var t=new RegExp(e,"i");return null==n?void 0:n.filter((function(e){return t.test(e.props.value)||t.test(e.props.description)}))}(n,_)}},_)},c=t(6061),d=t(7451),_=t(78261),m=function(e){var n,t,m=e.kafka,E=e.onClose,p=e.hideModal,f=e.refreshKafkas,v=e.variant,w=e.title,A=(0,i.useTranslation)(["kasTemporaryFixMe"]).t,S=(0,d.useAuth)(),g=(0,d.useConfig)().kas.apiBasePath,C=((0,d.useAlert)()||{addAlert:function(){return""}}).addAlert,R=(0,a.useState)(),T=R[0],k=R[1],I=(0,a.useState)(),O=I[0],h=I[1],N=(0,a.useState)(),y=N[0],b=N[1],F=function(){p(),E&&E()};return o().createElement(s.Modal,{id:"manage-permissions-modal",title:w,isOpen:!0,onClose:F,variant:v,position:"top",actions:[o().createElement(s.Button,{id:"confirm__button",key:"changeowner",variant:"primary",onClick:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,n,t,a,o,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,null==S?void 0:S.kas.getToken()];case 1:if(!((e=r.sent())&&(null==T?void 0:T.trim())&&(null==m?void 0:m.id)))return[3,5];h(!0),n={owner:T},t=new c.DefaultApi(new c.Configuration({accessToken:e,basePath:g})),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,t.updateKafkaById(m.id,n).then((function(){f&&f(),C({title:A("owner_change_sucess_title"),variant:s.AlertVariant.success,description:A("owner_change_sucess_message",{newOwner:T,name:null==m?void 0:m.name})}),h(!1),F()}))];case 3:return r.sent(),[3,5];case 4:return a=r.sent(),o=void 0,(0,_.G6)(a)&&(o=null===(i=a.response)||void 0===i?void 0:i.data.code),b(o),h(!1),[3,5];case 5:return[2]}}))}))},isLoading:O,isDisabled:!(null==T?void 0:T.trim())||O},A("common.change_owner")),o().createElement(s.Button,{id:"cancel__button",key:"cancel",variant:"link",onClick:F},A("cancel"))]},o().createElement(s.Form,null,function(){var e,n;return y===_.SM.OWNER_DOES_NOT_EXIST?(e=A("new_owner_does_not_exist_title"),n=A("new_owner_does_not_exist_message",{newOwner:T})):y&&(e=A("can_not_change_owner_title"),n=A("onwer_transfer_failed_message",{name:null==m?void 0:m.name})),e&&n?o().createElement(s.Alert,{variant:s.AlertVariant.danger,"aria-live":"polite",isInline:!0,title:e},n):o().createElement(o().Fragment,null)}(),o().createElement(s.FormGroup,{fieldId:"Current-owner-name",label:A("current_owner_name")},null==m?void 0:m.owner),o().createElement(s.FormGroup,{fieldId:"New-owner-name",label:A("new_owner_name")},o().createElement(u,{selection:T,setSelection:k,allUsers:(n=((0,l.S)()||{getAllUserAccounts:function(){return[]}}).getAllUserAccounts,t=n&&n(),null==t?void 0:t.map((function(e){return{id:e.id,displayName:e.displayName}})))}))))};const E=m},78261:(e,n,t)=>{t.d(n,{SM:()=>a,G6:()=>r.isServiceApiError});var r=t(6061),a={UNAUTHORIZED_USER:r.APIErrorCodes.ERROR_4,DUPLICATE_INSTANCE_NAME:r.APIErrorCodes.ERROR_36,PREVIEW_KAFKA_INSTANCE_EXIST:r.APIErrorCodes.ERROR_24,INSUFFICIENT_QUOTA:r.APIErrorCodes.ERROR_120,FAILED_TO_CHECK_QUOTA:r.APIErrorCodes.ERROR_121,OWNER_DOES_NOT_EXIST:r.APIErrorCodes.ERROR_21}}}]);
//# sourceMappingURL=8512.ae88423f.js.map