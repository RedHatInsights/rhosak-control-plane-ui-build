(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[644],{80516:(e,t,n)=>{"use strict";t.Jk={name:"BanIcon",height:512,width:512,svgPath:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z",yOffset:0,xOffset:0},t.SC=n(35183).createIcon(t.Jk),t.ZP=t.SC},35451:(e,t,n)=>{"use strict";t.GR={name:"CheckCircleIcon",height:512,width:512,svgPath:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z",yOffset:0,xOffset:0},t.rE=n(35183).createIcon(t.GR),t.ZP=t.rE},44535:(e,t,n)=>{"use strict";t.de={name:"CheckIcon",height:512,width:512,svgPath:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z",yOffset:0,xOffset:0},t.nQ=n(35183).createIcon(t.de),t.ZP=t.nQ},10141:(e,t,n)=>{"use strict";t.Fg={name:"CopyIcon",height:512,width:448,svgPath:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z",yOffset:0,xOffset:0},t.TI=n(35183).createIcon(t.Fg),t.ZP=t.TI},8755:(e,t,n)=>{"use strict";t._t={name:"FilterIcon",height:512,width:512,svgPath:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z",yOffset:0,xOffset:0},t.k1=n(35183).createIcon(t._t),t.ZP=t.k1},34046:(e,t,n)=>{"use strict";t.MU={name:"HelpIcon",height:1024,width:1024,svgPath:"M521.3,576 C627.5,576 713.7,502 713.7,413.7 C713.7,325.4 627.6,253.6 521.3,253.6 C366,253.6 334.5,337.7 329.2,407.2 C329.2,414.3 335.2,416 343.5,416 L445,416 C450.5,416 458,415.5 460.8,406.5 C460.8,362.6 582.9,357.1 582.9,413.6 C582.9,441.9 556.2,470.9 521.3,473 C486.4,475.1 447.3,479.8 447.3,521.7 L447.3,553.8 C447.3,570.8 456.1,576 472,576 C487.9,576 521.3,576 521.3,576 M575.3,751.3 L575.3,655.3 C575.313862,651.055109 573.620137,646.982962 570.6,644 C567.638831,640.947672 563.552355,639.247987 559.3,639.29884 L463.3,639.29884 C459.055109,639.286138 454.982962,640.979863 452,644 C448.947672,646.961169 447.247987,651.047645 447.29884,655.3 L447.29884,751.3 C447.286138,755.544891 448.979863,759.617038 452,762.6 C454.961169,765.652328 459.047645,767.352013 463.3,767.30116 L559.3,767.30116 C563.544891,767.313862 567.617038,765.620137 570.6,762.6 C573.659349,759.643612 575.360354,755.553963 575.3,751.3 M512,896 C300.2,896 128,723.9 128,512 C128,300.3 300.2,128 512,128 C723.8,128 896,300.2 896,512 C896,723.8 723.7,896 512,896 M512.1,0 C229.7,0 0,229.8 0,512 C0,794.2 229.8,1024 512.1,1024 C794.4,1024 1024,794.3 1024,512 C1024,229.7 794.4,0 512.1,0",yOffset:0,xOffset:0},t.by=n(35183).createIcon(t.MU),t.ZP=t.by},41942:(e,t,n)=>{"use strict";t.yR={name:"PendingIcon",height:1024,width:1024,svgPath:"M512.1,895.9 C300.3,895.9 128.1,723.8 128.1,511.9 C128.1,300.2 300.3,127.9 512.1,127.9 C723.8,127.9 896,300.2 896.1,511.9 C896.1,723.7 723.8,895.9 512.1,895.9 M512.1,0 C229.7,0 0,229.7 0,512 C0,794.3 229.7,1024 512.1,1024 C794.3,1024 1024,794.3 1024,512 C1024,229.7 794.3,0 512.1,0 M704,288 L704,272 C704,263.2 696.8,256 688,256 L336,256 C327.2,256 320,263.2 320,272 L320,288 C320,447 480,449 480,512 C480,575 320,575 320,736 L320,752 C320,760.8 327.2,768 336,768 L688,768 C696.8,768 704,760.8 704,752 L704,736 C704,576 544,577 544,512 C544,447 704,448 704,288 M603.9,704 L420.3,704 C417.3,704 418.2,695 419.4,686.8 C426.8,634.5 480.1,617.4 495.2,612.3 C512.3,606.6 512.3,606.6 528.9,612.3 C544,617.6 597.6,635.4 604.8,687 C605.9,695.2 606.9,704 603.9,704",yOffset:0,xOffset:0},t.tu=n(35183).createIcon(t.yR),t.ZP=t.tu},56176:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,n,a){var r=n.prototype,i=r.format;a.en.formats=e,r.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var n=this.$locale().formats,a=function(t,n){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,a,r){var i=r&&r.toUpperCase();return a||n[r]||e[r]||n[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))}(t,void 0===n?{}:n);return i.call(this,a)}}}()},50644:(e,t,n)=>{"use strict";n.d(t,{L:()=>Y});var a=n(70655),r=n(48121),i=n.n(r),o=n(5977),l=n(13006),s=n(56176),c=n.n(s),u=n(82420),d=n.n(u),m=n(92277),f=n(35451),v=n(80516),p=n(44535),g=n(77435);function _(e,t){var n=(0,r.useRef)();(0,r.useEffect)((function(){n.current=e}),[e]),(0,r.useEffect)((function(){if(null!==t){var e=setTimeout((function(){n.current()}),t);return function(){clearInterval(e)}}}),[e,t])}var E=n(75381);function h(){return!document[(e=document,void 0!==e.hidden?"hidden":void 0!==e.msHidden?"msHidden":void 0!==e.webkitHidden?"webkitHidden":"")];var e}function b(){var e=(0,r.useState)(h()),t=e[0],n=e[1],a=function(){return n(h())};return(0,r.useEffect)((function(){var e,t=void 0!==(e=document).hidden?"visibilitychange":void 0!==e.msHidden?"msvisibilitychange":void 0!==e.webkitHidden?"webkitvisibilitychange":"";return document.addEventListener(t,a,!1),function(){document.removeEventListener(t,a)}})),{isVisible:t,setIsVisible:n}}var T=n(65114),C=n(73727),S=n(68403),k=n(23141),w=n(71070),P=n(8755),y=function(e){var t,n,a,o=e.setFilterSelected,s=e.filterSelected,c=void 0===s?"name":s,u=e.total,d=e.page,f=e.perPage,v=e.filteredValue,p=e.setFilteredValue,_=e.isDisabledCreateButton,h=e.buttonTooltipContent,b=e.labelWithTooltip,T=e.onCreate,C=e.refresh,S=e.cloudProviders,k=(0,l.useTranslation)().t,y=(0,r.useRef)(),x=(0,r.useRef)(),I=(0,g.QK)().showModal,L=(0,r.useState)(!1),V=L[0],N=L[1],O=(0,r.useState)(!1),D=O[0],A=O[1],R=(0,r.useState)(!1),M=R[0],B=R[1],K=(0,r.useState)(!1),F=K[0],Y=K[1],G=(0,r.useState)(),U=G[0],Z=G[1],z=(0,r.useState)(),H=z[0],j=z[1],Q=(0,r.useState)(!0),W=Q[0],q=Q[1],J=(0,r.useState)(!0),$=J[0],X=J[1],ee=(0,r.useState)(!1),te=ee[0],ne=ee[1],ae=[{label:k("name"),value:"name",disabled:!1},{label:k("cloud_provider"),value:"cloud_provider",disabled:!1},{label:k("region"),value:"region",disabled:!1},{label:k("owner"),value:"owner",disabled:!1},{label:k("status"),value:"status",disabled:!1}];(0,r.useEffect)((function(){pe()}),[v]);var re=E.bv.map((function(e){return{label:k(e.value),value:e.value,disabled:!1}})),ie=E.Bh.map((function(e){return{label:k(e.value),value:e.value,disabled:!1}})),oe=E.hm.filter((function(e){return e.value!==E.Od.PREPARING&&e.value!==E.Od.DELETED})).map((function(e){return{label:k(e.value),value:e.value,disabled:!1}})),le=function(e,t,n){var a=Object.assign([],v),r=a.findIndex((function(t){return t.filterKey===e}));if(r>-1){var i=a[r];if(i.filterValue&&i.filterValue.length>0){var o=i.filterValue.findIndex((function(e){return e.value===t.value}));if(o>-1){if(!n)return;i.filterValue.splice(o,1)}else a[r].filterValue.push(t)}else a[r].filterValue=[t]}else a.push({filterKey:e,filterValue:[t]});p(a)},se=function(e){return!e||/^([a-zA-Z0-9-_%]*[a-zA-Z0-9-_%])?$/.test(e.trim())},ce=function(e){"name"===e&&U&&""!=U.trim()?se(U)?(le("name",{value:U,isExact:!1},!1),Z("")):q(!1):"owner"===e&&H&&""!=H.trim()&&(se(H)?(le("owner",{value:H,isExact:!1},!1),j("")):X(!1))},ue=function(e){var t=Object.assign([],v),n=t.findIndex((function(t){return t.filterKey===e}));n>=0&&t.splice(n,1),p(t),"name"===e&&Z(""),"owner"===e&&j(""),"cloud_provider"===e&&Y(!1),"region"===e&&B(!1),"status"===e&&Y(!1)},de=function(e){var t;if("Enter"===e.key&&!te){var n=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.name;ce(n)}},me=function(e){var t=v.filter((function(t){return t.filterKey===e}));if(t.length>0)return t[0].filterValue.map((function(e){return e.value}))},fe=function(e,t,n){var a,r,i=Object.assign([],v),o=i.findIndex((function(t){return t.filterKey===e})),l=Object.assign([],null===(a=i[o])||void 0===a?void 0:a.filterValue),s=t.toString();n&&(null==n?void 0:n.length)>0&&(s=null===(r=null==n?void 0:n.find((function(e){return e.label===t.toString()})))||void 0===r?void 0:r.value);var c=l.findIndex((function(e){return e.value===s}));c>=0&&(i[o].filterValue.splice(c,1),p(i))},ve=function(e){var t=Object.assign([],v),n=t.findIndex((function(t){return t.filterKey===e}));n>=0&&(t.splice(n,1),p(t))},pe=function(){var e=0;null==v||v.forEach((function(t){var n=t.filterValue,a=t.filterKey,r="status"===a&&(null==n?void 0:n.filter((function(e){return e.value===E.Od.PROVISIONING}))),i="status"===a&&(null==n?void 0:n.filter((function(e){return e.value===E.Od.DEPROVISION})));(null==r?void 0:r.length)>0&&(null==i?void 0:i.length)>0?e+=(null==n?void 0:n.length)+2:(null==r?void 0:r.length)>0||(null==i?void 0:i.length)>0?e+=(null==n?void 0:n.length)+1:e+=null==n?void 0:n.length})),e>=E.pf?ne(!0):ne(!1)},ge=function(e,t){var n,a=null==v?void 0:v.filter((function(t){return t.filterKey===e}));if(a&&(null==a?void 0:a.length)>0){var r=a[0].filterValue;n=null==r?void 0:r.find((function(e){return e.value===t}))}return!n},_e=function(e){return te?i().createElement("div",null,k("max_filter_message")):i().createElement("div",null,k("input_field_invalid_message",{name:e}))},Ee=i().createElement(i().Fragment,null,i().createElement(m.ToolbarGroup,{variant:"filter-group"},i().createElement(m.Select,{variant:m.SelectVariant.single,"aria-label":"Select filter",onToggle:function(){N(!V)},selections:c,isOpen:V,onSelect:function(e,t){N(!V),o(null==t?void 0:t.toString())}},ae.map((function(e,t){return i().createElement(m.SelectOption,{isDisabled:e.disabled,key:t,value:e.value},e.label)}))),i().createElement(m.ToolbarFilter,{chips:me("name"),deleteChip:function(e,t){return fe("name",t)},deleteChipGroup:function(){return ve("name")},categoryName:k("name"),showToolbarItem:"name"===(null==c?void 0:c.toLowerCase())},"name"===(null==c?void 0:c.toLowerCase())&&i().createElement(m.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},i().createElement(m.TextInput,{name:"name",id:"filterText",type:"search","aria-label":"Search filter input",validated:!W||te?m.ValidatedOptions.error:m.ValidatedOptions.default,placeholder:k("filter_by_name_lower"),onChange:function(e){Z(e),!W&&q(!0)},onKeyPress:de,value:U,ref:y}),i().createElement(m.Button,{variant:m.ButtonVariant.control,isDisabled:!W||te,onClick:function(){return ce("name")},"aria-label":"Search instances"},i().createElement(w.ZP,null)),(!W||te)&&i().createElement(m.Tooltip,{isVisible:te||!W,content:_e("name"),reference:y}))),i().createElement(m.ToolbarFilter,{chips:null===(t=me("cloud_provider"))||void 0===t?void 0:t.map((function(e){return k(e)})),deleteChip:function(e,t){return fe("cloud_provider",t,re)},deleteChipGroup:function(){return ve("cloud_provider")},categoryName:k("cloud_provider"),showToolbarItem:"cloud_provider"===c},"cloud_provider"===c&&i().createElement(m.Select,{id:"cloud-provider-select",variant:m.SelectVariant.checkbox,"aria-label":"Select cloud provider",onToggle:function(){A(!D)},selections:me("cloud_provider"),isOpen:D,onSelect:function(e,t,n){n&&ue("cloud_provider"),le("cloud_provider",{value:t.toString(),isExact:!0},!0),E.bv.length<2&&A(!1)},placeholderText:k("filter_by_cloud_provider"),className:"select-custom-width"},re.map((function(e,t){return i().createElement(m.SelectOption,{isDisabled:e.disabled||te&&ge("cloud_provider",e.value),key:t,value:e.value},te&&i().createElement(m.Tooltip,{isVisible:te,content:_e(),reference:function(){return document.getElementById("cloud-provider-select")}}),e.label)})))),i().createElement(m.ToolbarFilter,{chips:null===(n=me("region"))||void 0===n?void 0:n.map((function(e){return k(e)})),deleteChip:function(e,t){return fe("region",t,ie)},deleteChipGroup:function(){return ve("region")},categoryName:k("region"),showToolbarItem:"region"===c},"region"===c&&i().createElement(m.Select,{id:"region-select",variant:m.SelectVariant.checkbox,"aria-label":"Select region",onToggle:function(){B(!M)},selections:me("region"),isOpen:M,onSelect:function(e,t,n){n&&ue("region"),le("region",{value:t.toString(),isExact:!0},!0),ie.length<2&&B(!1)},placeholderText:k("filter_by_region"),className:"select-custom-width"},ie.map((function(e,t){return i().createElement(m.SelectOption,{isDisabled:e.disabled||te&&ge("region",e.value),key:t,value:e.value},te&&i().createElement(m.Tooltip,{isVisible:te,content:_e(),reference:function(){return document.getElementById("region-select")}}),e.label)})))),i().createElement(m.ToolbarFilter,{chips:me("owner"),deleteChip:function(e,t){return fe("owner",t)},deleteChipGroup:function(){return ve("owner")},categoryName:k("owner"),showToolbarItem:"owner"===(null==c?void 0:c.toLowerCase())},"owner"===c.toLowerCase()&&i().createElement(m.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},i().createElement(m.TextInput,{name:"owner",id:"filterOwners",type:"search","aria-label":"Search filter input",placeholder:k("filter_by_owner"),validated:!$||te?m.ValidatedOptions.error:m.ValidatedOptions.default,onChange:function(e){j(e),!$&&X(!0)},onKeyPress:de,value:H,ref:x}),i().createElement(m.Button,{isDisabled:!$||te,variant:m.ButtonVariant.control,onClick:function(){return ce("owner")},"aria-label":"Search owners"},i().createElement(w.ZP,null)),(!$||te)&&i().createElement(m.Tooltip,{isVisible:te||!$,content:_e("owner"),reference:x}))),i().createElement(m.ToolbarFilter,{chips:null===(a=me("status"))||void 0===a?void 0:a.map((function(e){return k(e)})),deleteChip:function(e,t){return fe("status",t,oe)},deleteChipGroup:function(){return ve("status")},categoryName:k("status"),showToolbarItem:"status"===c},"status"===c&&i().createElement(m.Select,{id:"status-select",variant:m.SelectVariant.checkbox,"aria-label":"Select status",onToggle:function(){Y(!F)},selections:me("status"),isOpen:F,onSelect:function(e,t,n){n&&ue("status"),le("status",{value:t.toString(),isExact:!0},!0)},placeholderText:k("filter_by_status"),className:"select-custom-width"},oe.map((function(e,t){return i().createElement(m.SelectOption,{isDisabled:e.disabled||te&&ge("status",e.value),key:t,value:e.value},te&&i().createElement(m.Tooltip,{isVisible:te,content:_e(),reference:function(){return document.getElementById("status-select")}}),e.label)})))))),he=function(){I(g.Ny.CREATE_KAFKA_INSTANCE,{onCreate:T,cloudProviders:S,refresh:C})},be=[{item:_?i().createElement(m.Tooltip,{content:h},i().createElement(m.Button,{variant:"primary",onClick:he,"data-testid":"tableStreams-buttonCreateKafka",isAriaDisabled:_},k("create_kafka_instance"))):i().createElement(m.Button,{variant:"primary",onClick:he,"data-testid":"tableStreams-buttonCreateKafka"},k("create_kafka_instance"))},{item:b}];return u&&u>0&&be.length>1&&be.push({item:i().createElement(g.wu,{widgetId:"pagination-options-menu-top",itemCount:u,page:d,perPage:f,isCompact:!0,titles:{paginationTitle:k("minimal_pagination"),perPageSuffix:k("per_page_suffix"),toFirstPage:k("to_first_page"),toPreviousPage:k("to_previous_page"),toLastPage:k("to_last_page"),toNextPage:k("to_next_page"),optionsToggle:k("options_toggle"),currPage:k("curr_page")}}),variant:"pagination",alignment:{default:"alignRight"}}),i().createElement(g.L5,{toolbarProps:{id:"instance-toolbar",clearAllFilters:function(){p([]),ne(!1)},collapseListedFiltersBreakpoint:"md",inset:{xl:"insetLg"}},toggleGroupProps:{toggleIcon:i().createElement(P.ZP,null),breakpoint:"md"},toggleGroupItems:Ee,toolbarItems:be})},x=n(41942),I=n(84564),L=n(52648),V=function(e){var t,n=e.status,a=e.instanceName,r=(0,l.useTranslation)().t,o=function(){switch(null==n?void 0:n.toLowerCase()){case L.hm[0].value:return i().createElement(f.ZP,{className:"mk--instances__table--icon--completed"});case L.hm[1].value:return i().createElement(I.ZP,{className:"mk--instances__table--icon--failed"});case L.hm[2].value:return i().createElement(x.ZP,null);case L.hm[3].value:case L.hm[4].value:return i().createElement(m.Spinner,{size:"md","aria-label":a,"aria-valuetext":"Creation in progress"});case L.hm[5].value:case L.hm[6].value:return;default:return i().createElement(x.ZP,null)}}();return i().createElement(m.Flex,null,o&&i().createElement(m.FlexItem,{spacer:{default:"spacerSm"}},o),i().createElement(m.FlexItem,null,1===(t=L.hm.filter((function(e){return e.value===(null==n?void 0:n.toLowerCase())}))).length?r(t[0].value):r("creation_pending")))},N=n(28623),O=function(e){var t=e.mainToggle,n=e.kafkaInstanceItems,s=e.onViewInstance,c=e.onViewConnection,u=e.onConnectToRoute,d=e.getConnectToRoutePath,f=e.refresh,v=e.page,p=e.perPage,_=e.total,h=e.kafkaDataLoaded,b=e.onDelete,T=e.expectedTotal,w=e.filteredValue,P=e.setFilteredValue,x=e.setFilterSelected,I=e.filterSelected,L=e.orderBy,O=e.setOrderBy,D=e.isDrawerOpen,A=e.isMaxCapacityReached,R=e.buttonTooltipContent,M=e.isDisabledCreateButton,B=e.loggedInUser,K=e.labelWithTooltip,F=e.setWaitingForDelete,Y=e.currentUserkafkas,G=e.cloudProviders,U=e.onCreate,Z=(0,N.useAuth)(),z=(0,N.useConfig)().kas.apiBasePath,H=(0,l.useTranslation)().t,j=new URLSearchParams(location.search),Q=(0,o.k6)(),W=(0,N.useAlert)().addAlert,q=(0,g.QK)(),J=q.showModal,$=q.hideModal,X=(0,r.useState)({}),ee=X[0],te=X[1],ne=(0,r.useState)(),ae=ne[0],re=ne[1],ie=(0,r.useState)([]),oe=ie[0],le=ie[1],se=(0,r.useState)([]),ce=se[0],ue=se[1],de=[{title:H("name"),transforms:[S.sortable]},{title:H("cloud_provider"),transforms:[S.sortable]},{title:H("region"),transforms:[S.sortable]},{title:H("owner"),transforms:[S.sortable]},{title:H("status"),transforms:[S.sortable]},{title:H("time_created"),transforms:[S.sortable]}],me=(0,r.useCallback)((function(e,t){j.set(e,t.toString())}),[j]);(0,r.useEffect)((function(){D||re("")}),[D]);var fe=function(){if(Y){var e=Y.filter((function(e){return e.status===E.Od.DEPROVISION||e.status===E.Od.DELETED})).filter((function(e){return oe.findIndex((function(t){return t===e.name}))<0})).map((function(e){return e.name||""})),t=(0,a.__spreadArray)((0,a.__spreadArray)([],oe),e);le(t),t.forEach((function(e){(null==Y?void 0:Y.findIndex((function(t){return t.name===e})))<0&&(!function(e){var t=oe.findIndex((function(t){return t===e}));if(t>-1){var n=Object.assign([],oe);n.splice(t,1),le(n)}}(e),W(H("kafka_successfully_deleted",{name:e}),m.AlertVariant.success))}))}};(0,r.useEffect)((function(){v>1&&0===n.length&&(me("page",(v-1).toString()),me("perPage",p.toString()),Q.push({search:j.toString()})),fe(),function(){var e=JSON.parse(JSON.stringify(ce));if(ce&&ce.length>0){var t=Object.assign([],n).filter((function(e){return e.status===E.Od.READY||e.status===E.Od.FAILED}));e.forEach((function(e){var n,a,r=t.filter((function(t){return e.id===t.id}));r&&r.length>0&&(r[0].status===E.Od.READY?W(H("kafka_successfully_created"),m.AlertVariant.success,i().createElement("span",{dangerouslySetInnerHTML:{__html:H("kafka_success_message",{name:null===(n=r[0])||void 0===n?void 0:n.name})}}),"toastCreateKafka-success"):r[0].status===E.Od.FAILED&&W(H("kafka_not_created"),m.AlertVariant.danger,i().createElement("span",{dangerouslySetInnerHTML:{__html:H("kafka_failed_message",{name:null===(a=r[0])||void 0===a?void 0:a.name})}}),"toastCreateKafka-failed"))}))}var a=Object.assign([],null==n?void 0:n.filter((function(e){return e.status===E.Od.PROVISIONING||e.status===E.Od.ACCEPTED})));ue(a)}()}),[v,p,n,Y]);var ve,pe,ge=function(e,t,n){var a,r,i,o;"view-instance"===n?(s(t),re(null==t?void 0:t.name)):"connect-instance"===n?(c(t),re(null==t?void 0:t.name)):"delete-instance"===n&&Ee(t),null===(o=null===(i=null===(r=null===(a=null==e?void 0:e.target)||void 0===a?void 0:a.parentElement)||void 0===r?void 0:r.parentElement)||void 0===i?void 0:i.previousSibling)||void 0===o||o.focus()},_e=function(e){var t=e.name,n=e.row;return i().createElement(C.Link,{to:function(){return d(n,"kafkas/"+(null==n?void 0:n.id))},onClick:function(e){e.preventDefault(),u(n,"kafkas/"+(null==n?void 0:n.id))},"data-testid":"tableStreams-linkKafka"},t)},Ee=function(e){var t=e.status,n=e.name;if(te(e),t===E.Od.FAILED)he(e);else{var a=function(e,t,n,a){var r={title:"",confirmActionLabel:"",description:""},i=a?" You might not be able to create a new instance because all of them are currently provisioned by other users.":"";return t===E.Od.READY?(r.title=e("delete_instance")+"?",r.confirmActionLabel=e("delete"),r.description=e("delete_instance_status_complete",{instanceName:n})+i):t!==E.Od.ACCEPTED&&t!==E.Od.PROVISIONING&&t!==E.Od.PREPARING||(r.title=e("delete_instance")+"?",r.confirmActionLabel=e("delete"),r.description=e("delete_instance_status_accepted_or_provisioning",{instanceName:n})+i),r}(H,t,n,A),r=a.title,i=a.confirmActionLabel,o=a.description;J(g.Ny.DELETE_KAFKA_INSTANCE,{instanceStatus:t,selectedItemData:e,title:r,confirmButtonProps:{onClick:he,label:i},textProps:{description:o}})}},he=function(e){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,i,o,l;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(void 0===(t=(null==ee?void 0:ee.id)||(null==e?void 0:e.id)))throw new Error("kafka instance id is not set");return[4,null==Z?void 0:Z.kas.getToken()];case 1:n=a.sent(),r=new k.M2({accessToken:n,basePath:z}),b(),$(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,r.deleteKafkaById(t,!0).then((function(){re(void 0),F(!0),f()}))];case 3:return a.sent(),[3,5];case 4:return i=a.sent(),o=void 0,(0,E.G6)(i)&&(o=null===(l=i.response)||void 0===l?void 0:l.data.reason),W(H("common.something_went_wrong"),m.AlertVariant.danger,o),[3,5];case 5:return[2]}}))}))},be=function(e){switch(e.toLowerCase()){case"name":return 0;case"cloud_provider":return 1;case"region":return 2;case"owner":return 3;case"status":return 4;case"created_at":return 5;default:return}},Te=function(){var e=(null==L?void 0:L.split(" "))||[];if(e.length>1)return{index:be(e[0]),direction:e[1]===S.SortByDirection.asc?S.SortByDirection.asc:S.SortByDirection.desc}};return i().createElement(i().Fragment,null,i().createElement(y,{mainToggle:t,filterSelected:I,setFilterSelected:x,total:_,page:v,perPage:p,filteredValue:w,setFilteredValue:P,isDisabledCreateButton:M,buttonTooltipContent:R,labelWithTooltip:K,cloudProviders:G,onCreate:U,refresh:f}),i().createElement(g.wR,{tableProps:{cells:de,rows:(ve=[],pe=(0,E.o8)(v,p,T),h?(n.forEach((function(e){var t=e.name,n=e.cloud_provider,a=e.region,r=e.created_at,o=e.status,l=e.owner,s=H(n),c=H(a);ve.push({cells:[{title:o===E.Od.DEPROVISION||o!==E.Od.READY?t:_e({name:t,row:e})},s,c,l,{title:i().createElement(V,{status:o,instanceName:t})},{title:(0,E.L0)(r,H("ago"))}],originalData:e})})),ve):(0,E.vK)({loadingCount:pe,skeleton:i().createElement(m.Skeleton,null),length:de.length})),"aria-label":H("cluster_instance_list"),actionResolver:function(e,t){return function(e,t){var n,r,i;if(!h)return[];var o=e.originalData;if(o.status===E.Od.DEPROVISION||o.status===E.Od.DELETED)return[];var l,s=o.owner===B;return s||(l={tooltip:!0,isDisabled:!0,style:{pointerEvents:"auto",cursor:"default"}}),[(0,a.__assign)((0,a.__assign)((n={title:H("view_details"),id:"view-instance"},n["data-testid"]="tableStreams-actionDetails",n.onClick=function(e){return s&&ge(e,o,"view-instance")},n),l),{tooltipProps:{position:"left",content:H("no_permission_to_view_kafka")}}),(0,a.__assign)((0,a.__assign)((r={title:H("view_connection_information"),id:"connect-instance"},r["data-testid"]="tableStreams-actionConnection",r.onClick=function(e){return s&&ge(e,o,"connect-instance")},r),l),{tooltipProps:{position:"left",content:H("no_permission_to_connect_kafka")}}),(0,a.__assign)((0,a.__assign)((i={title:H("delete_instance"),id:"delete-instance"},i["data-testid"]="tableStreams-actionDelete",i.onClick=function(e){return s&&ge(e,o,"delete-instance")},i),l),{tooltipProps:{position:"left",content:H("no_permission_to_delete_kafka")}})]}(e)},onSort:function(e,t,n,a){var r,i=n;(null===(r=Te())||void 0===r?void 0:r.index)!==t&&"time-created"===a.property&&(i="desc"),O(function(e){switch(e){case 0:return"name";case 1:return"cloud_provider";case 2:return"region";case 3:return"owner";case 4:return"status";case 5:return"created_at";default:return""}}(t)+" "+i)},sortBy:Te(),hasDefaultCustomRowWrapper:!0},activeRow:ae,onRowClick:function(e,t,n){var a,r,i=n.originalData,o=null===(a=null==e?void 0:e.target)||void 0===a?void 0:a.type,l=null===(r=null==e?void 0:e.target)||void 0===r?void 0:r.tagName;"button"!==o&&"a"!==(null==l?void 0:l.toLowerCase())&&(s(i),re(null==i?void 0:i.name))},rowDataTestId:"tableStreams-row",loggedInUser:B}),n.length<1&&h&&i().createElement(g.C0,{emptyStateProps:{variant:g.jU.NoResult},titleProps:{title:H("no_results_found")},emptyStateBodyProps:{body:H("adjust_your_filters_and_try_again")}}),_>0&&i().createElement(g.wu,{widgetId:"pagination-options-menu-bottom",itemCount:_,variant:m.PaginationVariant.bottom,page:v,perPage:p,titles:{paginationTitle:H("full_pagination"),perPageSuffix:H("per_page_suffix"),toFirstPage:H("to_first_page"),toPreviousPage:H("to_previous_page"),toLastPage:H("to_last_page"),toNextPage:H("to_next_page"),optionsToggle:H("options_toggle"),currPage:H("curr_page")}}))},D=(n(28629),n(34046)),A=function(e){var t=e.mainToggle,n=e.externalServer,a=e.instance,r=void 0===a?{}:a,o=e.isKafkaPending,s=e.onConnectToRoute,c=e.getConnectToRoutePath,u=e.tokenEndPointUrl,d=(0,l.useTranslation)().t,f=(0,g.QK)().showModal;return i().createElement("div",{className:"mas--details__drawer--tab-content"},i().createElement(m.TextContent,{className:"pf-u-pb-sm"},i().createElement(m.Text,{component:m.TextVariants.small},d("drawer_resource_tab_body_description_1")),i().createElement(m.Text,{component:m.TextVariants.h3,className:"pf-u-mt-lg"},d("bootstrap_server")),i().createElement(m.Text,{component:m.TextVariants.small},d("bootstrap_server_description"))),o?i().createElement(m.Skeleton,{fontSize:"2xl"}):i().createElement(m.ClipboardCopy,{"data-testid":"drawerStreams-copyBootstrapURL",textAriaLabel:d("bootstrap_server")},n),i().createElement(m.TextContent,{className:"pf-u-pb-sm"},i().createElement(m.Text,{component:m.TextVariants.h3,className:"pf-u-mt-xl"},d("serviceAccount.service_accounts_small")),i().createElement(m.Text,{component:m.TextVariants.small},d("serviceAccount.create_service_account_to_generate_credentials")," ",i().createElement(C.Link,{to:function(){return c(r,"service-accounts")},onClick:function(e){e.preventDefault(),s(r,"service-accounts")},"data-testid":"tableStreams-linkKafka"},d("serviceAccount.service_accounts"))," ",d("common.page"),".")),i().createElement(m.Button,{variant:"secondary",onClick:function(){f(g.Ny.CREATE_SERVICE_ACCOUNT)},"data-testid":"drawerStreams-buttonCreateServiceAccount",isInline:!0},d("serviceAccount.create_service_account")),i().createElement(m.TextContent,{className:"pf-u-pb-sm"},i().createElement(m.Text,{component:m.TextVariants.h3,className:"pf-u-mt-xl"},d("common.authentication_method")),i().createElement(m.Text,{component:m.TextVariants.h4,className:"pf-u-mt-md"},d("common.sasl_oauthbearer")," ",i().createElement(m.Label,{color:"green"},d("common.recommended")),i().createElement(m.Popover,{"aria-label":d("common.sasl_oauthbearer"),bodyContent:i().createElement("div",null,d("serviceAccount.sasl_oauthbearer_popover_content"))},i().createElement(m.Button,{variant:m.ButtonVariant.plain,"aria-label":d("more_info_about_sasl_oauthbearer")},i().createElement(D.ZP,null)))),i().createElement(m.Text,{component:m.TextVariants.small},d("serviceAccount.sasl_oauthbearer_description")),i().createElement(m.Text,{component:m.TextVariants.h6,className:"pf-u-mt-md"},d("common.token_endpoint_url")),o?i().createElement(m.Skeleton,{fontSize:"2xl"}):i().createElement(m.ClipboardCopy,null,u)),i().createElement(m.TextContent,{className:"pf-u-pb-sm"},i().createElement(m.Text,{component:m.TextVariants.h4,className:"pf-u-mt-md"},d("common.sasl_plain")),i().createElement(m.Text,{component:m.TextVariants.small},d("serviceAccount.sasl_plain_description"))),t&&i().createElement(i().Fragment,null,i().createElement(m.TextContent,{className:"pf-u-pb-sm pf-u-pt-lg"},i().createElement(m.Text,{component:m.TextVariants.h5},"Producer endpoint and credentials"),i().createElement(m.Text,{component:m.TextVariants.small},d("drawer_resource_tab_body_description_3"))),i().createElement(m.ClipboardCopy,null,"https://:30123")))},R=n(10141),M=function(){var e=(0,l.useTranslation)().t;return i().createElement("div",{className:"mas--details__drawer--tab-content"},i().createElement(m.TextContent,{className:"pf-u-pb-sm"},i().createElement(m.Text,{component:m.TextVariants.h5},e("sample_connection_code")),i().createElement(m.Text,{component:m.TextVariants.small},e("drawer_code_section_tab_body_description_1"),"<",e("brackets"),">.")),i().createElement("div",{className:"pf-c-code-editor pf-m-read-only"},i().createElement("div",{className:"pf-c-code-editor__header"},i().createElement("div",{className:"pf-c-code-editor__controls"},i().createElement(m.Button,{variant:"control","aria-label":"Action"},i().createElement(R.ZP,null))),i().createElement("div",{className:"pf-c-code-editor__tab"},i().createElement("span",{className:"pf-c-code-editor__tab-text"},"Java"))),i().createElement("div",{className:"pf-c-code-editor__main"},i().createElement("div",{className:"pf-c-code-editor__code"},i().createElement("pre",{className:"pf-c-code-editor__code-pre"},"import java.util.Properties;")))),i().createElement(m.TextContent,{className:"pf-u-pb-sm pf-u-pt-lg"},i().createElement(m.Text,{component:m.TextVariants.h5},e("sample_connection_code")),i().createElement(m.Text,{component:m.TextVariants.small},e("drawer_code_section_tab_body_description_1"),"<",e("brackets"),">.")),i().createElement("div",{className:"pf-c-code-editor pf-m-read-only"},i().createElement("div",{className:"pf-c-code-editor__header"},i().createElement("div",{className:"pf-c-code-editor__controls"},i().createElement(m.Button,{variant:"control","aria-label":"Action"},i().createElement(R.ZP,null)))),i().createElement("div",{className:"pf-c-code-editor__main"},i().createElement("div",{className:"pf-c-code-editor__code"},i().createElement("pre",{className:"pf-c-code-editor__code-pre"},"bootstrap.servers=es-1-4-0-ibm-es-proxy-route-bootstrap-es.apps.2019-4-1-demo-icp-mst.fyre.ibm.com:44 sasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username=â€œtoken")))))},B=function(e){var t=e.onSelect,n=e.externalServer,a=e.instance,r=e.mainToggle,o=e.activeKey,s=e.isKafkaPending,c=e.onConnectToRoute,u=e.getConnectToRoutePath,d=e.tokenEndPointUrl,f=(0,l.useTranslation)().t;return r?i().createElement("div",{className:"mas--details__drawer--tab-content pf-m-secondary"},i().createElement(m.Tabs,{activeKey:o,isSecondary:!0,onSelect:t},i().createElement(m.Tab,{eventKey:0,title:i().createElement(m.TabTitleText,null,f("resources"))},i().createElement(A,{externalServer:n,instance:a,mainToggle:r,isKafkaPending:s,getConnectToRoutePath:u,onConnectToRoute:c,tokenEndPointUrl:d})),i().createElement(m.Tab,{eventKey:1,title:i().createElement(m.TabTitleText,null,f("sample_code"))},i().createElement(M,null)))):i().createElement(A,{externalServer:n,instance:a,mainToggle:r,isKafkaPending:s,getConnectToRoutePath:u,onConnectToRoute:c,tokenEndPointUrl:d})},K=function(e){var t=e.mainToggle,n=e.instanceDetail;d().extend(c());var a=(0,l.useTranslation)().t,r=n||{},o=r.id,s=r.owner,u=r.created_at,f=r.updated_at,v=function(e,t){return t&&i().createElement(i().Fragment,null,i().createElement(m.TextListItem,{component:m.TextListItemVariants.dt},e),i().createElement(m.TextListItem,{component:m.TextListItemVariants.dd},t))};return i().createElement("div",{className:"mas--details__drawer--tab-content"},t&&i().createElement(m.Grid,{className:"mas--details__drawer--grid"},i().createElement(m.GridItem,{span:6,className:"mas--details__drawer--grid--column-one"},i().createElement(m.Card,{isFlat:!0},i().createElement(m.CardBody,null,i().createElement(m.TextContent,null,i().createElement(m.Text,{component:m.TextVariants.small,className:"pf-u-mb-0"},a("topics")),i().createElement(m.Text,{component:m.TextVariants.h3,className:"pf-u-mt-0"},"10"))))),i().createElement(m.GridItem,{span:6},i().createElement(m.Card,{isFlat:!0},i().createElement(m.CardBody,null,i().createElement(m.TextContent,null,i().createElement(m.Text,{component:m.TextVariants.small,className:"pf-u-mb-0"},a("consumer_groups")),i().createElement(m.Text,{component:m.TextVariants.h3,className:"pf-u-mt-0"},"8")))))),i().createElement(m.TextContent,null,i().createElement(m.TextList,{component:m.TextListVariants.dl},v(a("cloud_provider"),a("amazon_web_services")),v(a("region"),a("us_east_north_virginia")),v(a("id"),o),v(a("owner"),s),v(a("created"),d()(u).format("LLLL")),v(a("updated"),d()(f).format("LLLL")))))},F=function(e){var t=e.mainToggle,n=e.onClose,a=e.activeTab,o=e.instanceDetail,s=e.isExpanded,u=e.isLoading,f=e.children,v=e["data-ouia-app-id"],p=e.getConnectToRoutePath,_=e.onConnectToRoute,h=e.tokenEndPointUrl,b=e.notRequiredDrawerContentBackground;d().extend(c());var T=(0,l.useTranslation)().t,C=o||{},S=C.name,k=C.status,w=(0,r.useState)(0),P=w[0],y=w[1],x=(0,r.useState)(0),I=x[0],L=x[1];(0,r.useEffect)((function(){var e="details"===(null==a?void 0:a.toLowerCase())?0:1;y(e),L(0)}),[a]);var V,N=function(e,t){y(t)},O=function(e,t){L(t)},D=k===E.Od.ACCEPTED||k===E.Od.PREPARING;return i().createElement(g.D5,{isExpanded:s,isLoading:u,onClose:n,panelBodyContent:i().createElement(m.Tabs,{activeKey:P,onSelect:N},i().createElement(m.Tab,{eventKey:0,title:i().createElement(m.TabTitleText,null,T("details"))},i().createElement(K,{mainToggle:t,instanceDetail:o})),i().createElement(m.Tab,{eventKey:1,title:i().createElement(m.TabTitleText,null,T("connection")),"data-testid":"drawerStreams-tabConnect"},i().createElement(B,{mainToggle:t,activeKey:I,instance:o,externalServer:(V=(o||{}).bootstrapServerHost,(null==V?void 0:V.endsWith(":443"))?V:V+":443"),onSelect:O,isKafkaPending:D,getConnectToRoutePath:p,onConnectToRoute:_,tokenEndPointUrl:h}))),drawerHeaderProps:{text:{label:T("instance_name")},title:{value:S,headingLevel:"h1"}},"data-ouia-app-id":v,inlineAlertMessage:D?i().createElement(m.Alert,{isInline:!0,variant:m.AlertVariant.info,title:T("kafka_instance_not_ready_inline_message"),className:"pf-u-mt-sm"}):i().createElement(i().Fragment,null),notRequiredDrawerContentBackground:b},f)},Y=function(e){var t=e.onConnectToRoute,n=e.getConnectToRoutePath,s=e.preCreateInstance,u=e.tokenEndPointUrl;d().extend(c());var h=(0,r.useContext)(N.AuthContext),C=(0,N.useConfig)().kas.apiBasePath,S=b().isVisible,w=(0,o.TH)(),P=new URLSearchParams(w.search),y=parseInt(P.get("page")||"",10)||1,x=parseInt(P.get("perPage")||"",10)||10,I=P.has("user-testing"),L=(0,l.useTranslation)().t,V=(0,N.useAlert)().addAlert,D=(0,g.QK)().showModal,A=window.localStorage,R=i().useContext(T.QuickStartContext),M=(0,r.useState)(),B=M[0],K=M[1],Y=(0,r.useState)(),G=Y[0],U=Y[1],Z=(0,r.useState)({}),z=Z[0],H=Z[1],j=(0,r.useState)([]),Q=j[0],W=j[1],q=(0,r.useState)(!1),J=q[0],$=q[1],X=(0,r.useState)("created_at desc"),ee=X[0],te=X[1],ne=(0,r.useState)(),ae=ne[0],re=ne[1],ie=(0,r.useState)(0),oe=ie[0],le=ie[1],se=(0,r.useState)(void 0),ce=se[0],ue=se[1],de=(0,r.useState)("name"),me=de[0],fe=de[1],ve=(0,r.useState)([]),pe=ve[0],ge=ve[1],_e=(0,r.useState)(!1),Ee=_e[0],he=_e[1],be=(0,r.useState)(!1),Te=be[0],Ce=be[1],Se=(0,r.useState)(!1),ke=Se[0],we=Se[1],Pe=(0,r.useState)(void 0),ye=Pe[0],xe=Pe[1],Ie=(0,r.useState)(void 0),Le=Ie[0],Ve=Ie[1],Ne=(0,r.useState)(),Oe=Ne[0],De=Ne[1],Ae=ae||{},Re=Ae.activeTab,Me=Ae.instanceDetail,Be=function(){if(B&&(null==B?void 0:B.length)>0){var e=null==B?void 0:B.filter((function(e){var t;return(null==e?void 0:e.id)===(null===(t=null==ae?void 0:ae.instanceDetail)||void 0===t?void 0:t.id)}))[0],t=(0,a.__assign)((0,a.__assign)({},ae),{instanceDetail:e});e&&re(t)}};(0,r.useEffect)((function(){Be()}),[B]),(0,r.useEffect)((function(){null==h||h.getUsername().then((function(e){return Ve(e)}))}),[]),(0,r.useEffect)((function(){Fe()}),[]),(0,r.useEffect)((function(){if((0,E.Qw)()&&A){var e=A.getItem("openSessions")||0,t=parseInt(e)+1;e<1&&(A.setItem("openSessions",t),Ce(!0))}}),[]);var Ke=function(){Ce(!Te)},Fe=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,null==h?void 0:h.kas.getToken()];case 1:if(!(e=n.sent()))return[3,5];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,new k.M2({accessToken:e,basePath:C}).serviceStatus().then((function(e){var t,n,a=(null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.kafkas)||void 0===n?void 0:n.max_capacity_reached)||I;xe(a)}))];case 3:return n.sent(),[3,5];case 4:return t=n.sent(),Ze(t),[3,5];case 5:return[2]}}))}))},Ye=function(e){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return e?[4,s(e)]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return e&&D(g.Ny.CREATE_KAFKA_INSTANCE,{onCreate:We,cloudProviders:Q,mainToggle:I,refresh:Qe}),[2]}}))}))},Ge=function(e){re({instanceDetail:e,activeTab:"Details"})},Ue=function(e){re({instanceDetail:e,activeTab:"Connection"})},Ze=function(e){var t,n,a,r,i;(0,E.G6)(e)&&(r=null===(t=e.response)||void 0===t?void 0:t.data.reason,i=null===(a=null===(n=e.response)||void 0===n?void 0:n.data)||void 0===a?void 0:a.code),i===E.SM.UNAUTHORIZED_USER?he(!0):V(L("common.something_went_wrong"),m.AlertVariant.danger,r)},ze=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,null==h?void 0:h.kas.getToken()];case 1:if(!(e=n.sent())||!S)return[3,5];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,new k.M2({accessToken:e,basePath:C}).listKafkas(null==y?void 0:y.toString(),null==x?void 0:x.toString(),ee,(a=[],pe.forEach((function(e){var t=e.filterKey,n=e.filterValue;n&&n.length>0&&a.push(n.map((function(e){var n=e.value.trim();return n===E.Od.PROVISIONING?t+" = "+E.Od.PREPARING+" or "+t+" = "+E.Od.PROVISIONING:n===E.Od.DEPROVISION?t+" = "+E.Od.DEPROVISION+" or "+t+" = "+E.Od.DELETED:""!==n?t+" "+(!0===e.isExact?"= "+n:"like %"+n+"%"):""})).join(" or "))})),a.join(" or "))).then((function(e){var t=e.data,n=(null==t?void 0:t.items)||[];H(t),K(n),void 0!==(null==z?void 0:z.total)&&z.total>oe&&le(z.total),ke&&pe.length<1&&0==(null==n?void 0:n.length)&&(ue(!0),we(!1)),$(!0)}))];case 3:return n.sent(),[3,5];case 4:return t=n.sent(),Ze(t),[3,5];case 5:return[2]}var a}))}))};(0,r.useEffect)((function(){(!B||(null==B?void 0:B.length)<=1)&&(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,null==h?void 0:h.kas.getToken()];case 1:if(!(e=n.sent())||!S)return[3,5];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,new k.M2({accessToken:e,basePath:C}).listKafkas("1","1").then((function(e){var t,n,a=null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.items)||void 0===n?void 0:n.length;ue(!a||a<1)}))];case 3:return n.sent(),[3,5];case 4:return t=n.sent(),Ze(t),[3,5];case 5:return[2]}}))}))}),[B]);var He=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,null==h?void 0:h.kas.getToken()];case 1:if(e=a.sent(),t="owner = "+Le,!e||!S)return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,new k.M2({accessToken:e,basePath:C}).listKafkas("","","",t).then((function(e){var t=e.data;De(t.items)}))];case 3:return a.sent(),[3,5];case 4:return n=a.sent(),Ze(n),[3,5];case 5:return[2]}}))}))};(0,r.useEffect)((function(){Le&&He()}),[Le]),_((function(){return He()}),E.md);var je=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,null==h?void 0:h.kas.getToken()];case 1:if(e=a.sent(),t=Le?"owner = "+Le:"",!e||!S)return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,new k.M2({accessToken:e,basePath:C}).listKafkas("1","1","",t).then((function(e){var t=e.data;U(t.items)}))];case 3:return a.sent(),[3,5];case 4:return n=a.sent(),Ze(n),[3,5];case 5:return[2]}}))}))};(0,r.useEffect)((function(){$(!1),ze()}),[h,y,x,pe,ee]),(0,r.useEffect)((function(){(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n,r;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,null==h?void 0:h.kas.getToken()];case 1:if(!(e=a.sent()))return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,new k.M2({accessToken:e,basePath:C}).listCloudProviders().then((function(e){var t,n=(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.items)||[],a=null==n?void 0:n.filter((function(e){return e.enabled}));W(a)}))];case 3:return a.sent(),[3,5];case 4:return t=a.sent(),n=void 0,(0,E.G6)(t)&&(n=null===(r=t.response)||void 0===r?void 0:r.data.reason),V(L("common.something_went_wrong"),m.AlertVariant.danger,n),[3,5];case 5:return[2]}}))})),ze()}),[]),(0,r.useEffect)((function(){je()}),[]),(0,r.useEffect)((function(){Be()}),[B]),(0,r.useEffect)((function(){null==h||h.getUsername().then((function(e){return Ve(e)}))}),[]),(0,r.useEffect)((function(){Fe()}),[]),(0,r.useEffect)((function(){if((0,E.Qw)()&&A){var e=A.getItem("openSessions")||0,t=parseInt(e)+1;e<1&&(A.setItem("openSessions",t),Ce(!0))}}),[]),_((function(){return je()}),E.md),_((function(){return ze()}),E.md);var Qe=function(){B&&1===(null==B?void 0:B.length)?$(!0):$(!1),ze()},We=function(){le(z.total+1)},qe=function(){$(!1),le(z.total-1)};if(Ee)return i().createElement(m.PageSection,{variant:m.PageSectionVariants.default,padding:{default:"noPadding"},isFilled:!0},i().createElement(g.C0,{titleProps:{title:L("access_permissions_needed"),headingLevel:"h2"},emptyStateIconProps:{icon:LockIcon},emptyStateBodyProps:{body:L("to_access_kafka_instances_contact_your_organization_administrators")}}));var Je,$e=function(){var e=null==B?void 0:B.filter((function(e){return e.owner===Le}))[0];return e||(e=null==G?void 0:G.filter((function(e){return e.owner===Le}))[0]),e},Xe=function(){var e=void 0!==$e(),t="";return(e||ye)&&(t=ye&&e?"You can deploy 1 preview instance at a time.":ye?"Development preview instances are currently unavailable for creation.":"You can deploy 1 preview instance at a time."),t},et=function(){var e=ye?"Development preview instances are currently unavailable for creation.":"Development preview instances are available for creation. You can deploy 1 preview instance at a time.";return ye?i().createElement(m.Tooltip,{content:e},i().createElement(m.Label,{icon:i().createElement(v.ZP,null),className:"pf-u-ml-md",tabIndex:0},"No instances available")):i().createElement(m.Tooltip,{content:e},i().createElement(m.Label,{color:"green",icon:i().createElement(p.ZP,null),className:"pf-u-ml-md",tabIndex:0},"Instances available"))};return i().createElement(i().Fragment,null,i().createElement(F,{mainToggle:I,isExpanded:null!=ae,activeTab:Re,isLoading:void 0===Me,instanceDetail:Me,onClose:function(){re(null)},"data-ouia-app-id":"controlPlane-streams",getConnectToRoutePath:n,onConnectToRoute:t,tokenEndPointUrl:u,notRequiredDrawerContentBackground:ce},i().createElement("main",{className:"pf-c-page__main"},i().createElement(m.PageSection,{variant:m.PageSectionVariants.light},i().createElement(m.Level,null,i().createElement(m.LevelItem,null,i().createElement(m.TextContent,null,i().createElement(m.Text,{component:"h1"},L("kafka_instances"))))),(Je=$e())?i().createElement(m.Alert,{variant:"info",isInline:!0,title:(null==Je?void 0:Je.name)+" was created on "+d()(null==Je?void 0:Je.created_at).format("LLLL"),className:"pf-u-mt-lg"},"This preview instance will expire 48 hours after creation."):i().createElement(i().Fragment,null)),void 0===B?i().createElement(m.PageSection,{variant:m.PageSectionVariants.light,padding:{default:"noPadding"}},i().createElement(g.yR,null)):ce?i().createElement(m.PageSection,{padding:{default:"noPadding"},isFilled:!0},ye?i().createElement(g.C0,{emptyStateProps:{variant:m.EmptyStateVariant.large},emptyStateIconProps:{icon:v.ZP},emptyStateBodyProps:{body:i().createElement(i().Fragment,null,"Development preview instances are currently unavailable for creation, so check back later. In the meantime,"," ",i().createElement(m.Button,{variant:m.ButtonVariant.link,isSmall:!0,isInline:!0,"data-testid":"emptyState-actionTour"},"take a tour")," ","to learn more about the service.")},titleProps:{title:"Kafka instances unavailable",size:m.TitleSizes.xl,headingLevel:"h2"}}):i().createElement(g.C0,{emptyStateProps:{variant:m.EmptyStateVariant.large},emptyStateIconProps:{icon:f.ZP,color:"green"},emptyStateBodyProps:{body:i().createElement(i().Fragment,null,"Development preview instances are available for creation. For help getting started, access the"," ",i().createElement(m.Button,{variant:m.ButtonVariant.link,isSmall:!0,isInline:!0,onClick:function(){return R.setActiveQuickStart&&R.setActiveQuickStart("getting-started")}},"quick start guide."))},titleProps:{title:"Kafka instances available",size:m.TitleSizes.xl,headingLevel:"h2"}},function(){var e=void 0!==$e()||ye;if(e){var t=Xe();return i().createElement(m.Tooltip,{content:t},i().createElement(m.Button,{"data-testid":"emptyStateStreams-buttonCreateKafka",variant:m.ButtonVariant.primary,onClick:function(){return Ye(!0)},isAriaDisabled:e},L("create_kafka_instance")))}return i().createElement(m.Button,{"data-testid":"emptyStateStreams-buttonCreateKafka",variant:m.ButtonVariant.primary,onClick:function(){return Ye(!0)}},L("create_kafka_instance"))}())):B&&void 0!==ce?i().createElement(m.PageSection,{className:"mk--main-page__page-section--table pf-m-padding-on-xl",variant:m.PageSectionVariants.default,padding:{default:"noPadding"}},i().createElement(m.Card,null,i().createElement(O,{kafkaInstanceItems:B,mainToggle:I,onViewConnection:Ue,onViewInstance:Ge,onConnectToRoute:t,getConnectToRoutePath:n,refresh:Qe,kafkaDataLoaded:J,setWaitingForDelete:we,onDelete:qe,page:y,perPage:x,total:null==z?void 0:z.total,expectedTotal:oe,filteredValue:pe,setFilteredValue:ge,setFilterSelected:fe,filterSelected:me,orderBy:ee,setOrderBy:te,isDrawerOpen:null!==ae,loggedInUser:Le,isMaxCapacityReached:ye,buttonTooltipContent:Xe(),isDisabledCreateButton:void 0!==$e()||ye,labelWithTooltip:et(),currentUserkafkas:Oe,onCreate:We,cloudProviders:Q}))):i().createElement(i().Fragment,null))),i().createElement(m.Modal,{variant:m.ModalVariant.small,title:"Mobile experience",isOpen:Te,onClose:function(){return Ke()},actions:[i().createElement(m.Button,{key:"confirm",variant:"primary",onClick:function(){return Ke()}},"Ok")]},"The mobile experience isn't fully optimized yet, so some items might not appear correctly."))}}}]);
//# sourceMappingURL=644.5fe403ee.js.map