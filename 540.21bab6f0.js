(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[540],{80516:(e,t,n)=>{"use strict";t.Jk={name:"BanIcon",height:512,width:512,svgPath:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z",yOffset:0,xOffset:0},t.SC=n(35183).createIcon(t.Jk),t.ZP=t.SC},44535:(e,t,n)=>{"use strict";t.de={name:"CheckIcon",height:512,width:512,svgPath:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z",yOffset:0,xOffset:0},t.nQ=n(35183).createIcon(t.de),t.ZP=t.nQ},51540:(e,t,n)=>{"use strict";n.d(t,{L:()=>T});var a=n(70655),i=n(48121),r=n.n(i),o=n(5977),s=n(13006),l=n(56176),c=n.n(l),u=n(82420),d=n.n(u),v=n(92277),f=n(35451),m=n(80516),g=n(44535),p=n(77435);function h(e,t){var n=(0,i.useRef)();(0,i.useEffect)((function(){n.current=e}),[e]),(0,i.useEffect)((function(){if(null!==t){var e=setTimeout((function(){n.current()}),t);return function(){clearInterval(e)}}}),[e,t])}var k=n(75381);function E(){return!document[(e=document,void 0!==e.hidden?"hidden":void 0!==e.msHidden?"msHidden":void 0!==e.webkitHidden?"webkitHidden":"")];var e}function S(){var e=(0,i.useState)(E()),t=e[0],n=e[1],a=function(){return n(E())};return(0,i.useEffect)((function(){var e,t=void 0!==(e=document).hidden?"visibilitychange":void 0!==e.msHidden?"msvisibilitychange":void 0!==e.webkitHidden?"webkitvisibilitychange":"";return document.addEventListener(t,a,!1),function(){document.removeEventListener(t,a)}}),[]),{isVisible:t,setIsVisible:n}}var b=n(65114),_=n(365),P=n(23141),w=n(28623),y=n(5569),T=function(e){var t=e.onConnectToRoute,n=e.getConnectToRoutePath,l=e.preCreateInstance,u=e.tokenEndPointUrl;d().extend(c());var E=(0,w.useAuth)(),T=(0,w.useConfig)().kas.apiBasePath,C=S().isVisible,I=(0,o.TH)(),V=new URLSearchParams(I.search),D=parseInt(V.get("page")||"",10)||1,O=parseInt(V.get("perPage")||"",10)||10,L=V.has("user-testing"),x=(0,s.useTranslation)().t,R=(0,w.useAlert)().addAlert,B=(0,p.QK)().showModal,N=window.localStorage,A=r().useContext(b.QuickStartContext),M=(0,i.useState)(),F=M[0],K=M[1],z=(0,i.useState)(),U=z[0],H=z[1],Z=(0,i.useState)({}),Q=Z[0],G=Z[1],Y=(0,i.useState)([]),j=Y[0],q=Y[1],J=(0,i.useState)(!1),W=J[0],X=J[1],$=(0,i.useState)("created_at desc"),ee=$[0],te=$[1],ne=(0,i.useState)(),ae=ne[0],ie=ne[1],re=(0,i.useState)(0),oe=re[0],se=re[1],le=(0,i.useState)(void 0),ce=le[0],ue=le[1],de=(0,i.useState)("name"),ve=de[0],fe=de[1],me=(0,i.useState)([]),ge=me[0],pe=me[1],he=(0,i.useState)(!1),ke=he[0],Ee=he[1],Se=(0,i.useState)(!1),be=Se[0],_e=Se[1],Pe=(0,i.useState)(!1),we=Pe[0],ye=Pe[1],Te=(0,i.useState)(void 0),Ce=Te[0],Ie=Te[1],Ve=(0,i.useState)(void 0),De=Ve[0],Oe=Ve[1],Le=(0,i.useState)(),xe=Le[0],Re=Le[1],Be=ae||{},Ne=Be.activeTab,Ae=Be.instanceDetail;(0,i.useEffect)((function(){if((0,k.Qw)()&&N){var e=parseInt(N.getItem("openSessions")||"0"),t=e+1;e<1&&(N.setItem("openSessions",""+t),_e(!0))}}),[]);var Me=function(){_e(!be)},Fe=function(e){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return e?[4,l(e)]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return e&&B(p.Ny.CREATE_KAFKA_INSTANCE,{onCreate:Ye,cloudProviders:j,mainToggle:L,refresh:Ge}),[2]}}))}))},Ke=function(e){ie({instanceDetail:e,activeTab:"Details"})},ze=function(e){ie({instanceDetail:e,activeTab:"Connection"})},Ue=function(e){var t,n,a,i,r;(0,k.G6)(e)&&(i=null===(t=e.response)||void 0===t?void 0:t.data.reason,r=null===(a=null===(n=e.response)||void 0===n?void 0:n.data)||void 0===a?void 0:a.code),r===k.SM.UNAUTHORIZED_USER?Ee(!0):R(x("common.something_went_wrong"),v.AlertVariant.danger,i)},He=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,null==E?void 0:E.kas.getToken()];case 1:if(!(e=n.sent())||!C)return[3,5];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,new P.M2({accessToken:e,basePath:T}).listKafkas(null==D?void 0:D.toString(),null==O?void 0:O.toString(),ee,(a=[],ge.forEach((function(e){var t=e.filterKey,n=e.filterValue;n&&n.length>0&&a.push(n.map((function(e){var n=e.value.trim();return n===k.Od.PROVISIONING?t+" = "+k.Od.PREPARING+" or "+t+" = "+k.Od.PROVISIONING:n===k.Od.DEPROVISION?t+" = "+k.Od.DEPROVISION+" or "+t+" = "+k.Od.DELETED:""!==n?t+" "+(!0===e.isExact?"= "+n:"like %"+n+"%"):""})).join(" or "))})),a.join(" or "))).then((function(e){var t=e.data,n=(null==t?void 0:t.items)||[];G(t),K(n),void 0!==(null==Q?void 0:Q.total)&&Q.total>oe&&se(Q.total),we&&ge.length<1&&0==(null==n?void 0:n.length)&&(ue(!0),ye(!1)),X(!0)}))];case 3:return n.sent(),[3,5];case 4:return t=n.sent(),Ue(t),[3,5];case 5:return[2]}var a}))}))};(0,i.useEffect)((function(){(!F||(null==F?void 0:F.length)<=1)&&(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,null==E?void 0:E.kas.getToken()];case 1:if(!(e=n.sent())||!C)return[3,5];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,new P.M2({accessToken:e,basePath:T}).listKafkas("1","1").then((function(e){var t,n,a=null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.items)||void 0===n?void 0:n.length;ue(!a||a<1)}))];case 3:return n.sent(),[3,5];case 4:return t=n.sent(),Ue(t),[3,5];case 5:return[2]}}))}))}),[F]);var Ze=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,null==E?void 0:E.kas.getToken()];case 1:if(e=a.sent(),t="owner = "+De,!e||!C)return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,new P.M2({accessToken:e,basePath:T}).listKafkas("","","",t).then((function(e){var t=e.data;Re(t.items)}))];case 3:return a.sent(),[3,5];case 4:return n=a.sent(),Ue(n),[3,5];case 5:return[2]}}))}))};(0,i.useEffect)((function(){De&&Ze()}),[De]),h((function(){return Ze()}),k.md);var Qe=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,null==E?void 0:E.kas.getToken()];case 1:if(e=a.sent(),t=De?"owner = "+De:"",!e||!C)return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,new P.M2({accessToken:e,basePath:T}).listKafkas("1","1","",t).then((function(e){var t=e.data;H(t.items)}))];case 3:return a.sent(),[3,5];case 4:return n=a.sent(),Ue(n),[3,5];case 5:return[2]}}))}))};(0,i.useEffect)((function(){X(!1),He()}),[E,D,O,ge,ee]),(0,i.useEffect)((function(){(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n,i;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,null==E?void 0:E.kas.getToken()];case 1:if(!(e=a.sent()))return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,new P.M2({accessToken:e,basePath:T}).listCloudProviders().then((function(e){var t,n=(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.items)||[],a=null==n?void 0:n.filter((function(e){return e.enabled}));q(a)}))];case 3:return a.sent(),[3,5];case 4:return t=a.sent(),n=void 0,(0,k.G6)(t)&&(n=null===(i=t.response)||void 0===i?void 0:i.data.reason),R(x("common.something_went_wrong"),v.AlertVariant.danger,n),[3,5];case 5:return[2]}}))})),He()}),[]),(0,i.useEffect)((function(){Qe()}),[]),(0,i.useEffect)((function(){!function(){if(F&&(null==F?void 0:F.length)>0){var e=null==F?void 0:F.filter((function(e){var t;return(null==e?void 0:e.id)===(null===(t=null==ae?void 0:ae.instanceDetail)||void 0===t?void 0:t.id)}))[0],t=(0,a.__assign)((0,a.__assign)({},ae),{instanceDetail:e});e&&ie(t)}}()}),[F]),(0,i.useEffect)((function(){null==E||E.getUsername().then((function(e){return Oe(e)}))}),[E]),(0,i.useEffect)((function(){(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,null==E?void 0:E.kas.getToken()];case 1:if(!(e=n.sent()))return[3,5];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,new P.M2({accessToken:e,basePath:T}).serviceStatus().then((function(e){var t,n,a=(null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.kafkas)||void 0===n?void 0:n.max_capacity_reached)||L;Ie(a)}))];case 3:return n.sent(),[3,5];case 4:return t=n.sent(),Ue(t),[3,5];case 5:return[2]}}))}))}),[]),h((function(){return Qe()}),k.md),h((function(){return He()}),k.md);var Ge=function(){F&&1===(null==F?void 0:F.length)?X(!0):X(!1),He()},Ye=function(){se(Q.total+1)},je=function(){X(!1),se(Q.total-1)};if(ke)return r().createElement(v.PageSection,{variant:v.PageSectionVariants.default,padding:{default:"noPadding"},isFilled:!0},r().createElement(p.C0,{titleProps:{title:x("access_permissions_needed"),headingLevel:"h2"},emptyStateIconProps:{icon:y.ZP},emptyStateBodyProps:{body:x("to_access_kafka_instances_contact_your_organization_administrators")}}));var qe,Je=function(){var e=null==F?void 0:F.filter((function(e){return e.owner===De}))[0];return e||(e=null==U?void 0:U.filter((function(e){return e.owner===De}))[0]),e},We=function(){var e=void 0!==Je(),t="";return(e||Ce)&&(t=Ce&&e?"You can deploy 1 preview instance at a time.":Ce?"Development preview instances are currently unavailable for creation.":"You can deploy 1 preview instance at a time."),t},Xe=function(){var e=Ce?"Development preview instances are currently unavailable for creation.":"Development preview instances are available for creation. You can deploy 1 preview instance at a time.";return Ce?r().createElement(v.Tooltip,{content:e},r().createElement(v.Label,{icon:r().createElement(m.ZP,null),className:"pf-u-ml-md",tabIndex:0},"No instances available")):r().createElement(v.Tooltip,{content:e},r().createElement(v.Label,{color:"green",icon:r().createElement(g.ZP,null),className:"pf-u-ml-md",tabIndex:0},"Instances available"))};return r().createElement(r().Fragment,null,r().createElement(_.oY,{mainToggle:L,isExpanded:null!=ae,activeTab:Ne,isLoading:void 0===Ae,instanceDetail:Ae,onClose:function(){ie(null)},"data-ouia-app-id":"controlPlane-streams",getConnectToRoutePath:n,onConnectToRoute:t,tokenEndPointUrl:u,notRequiredDrawerContentBackground:ce},r().createElement("main",{className:"pf-c-page__main"},r().createElement(v.PageSection,{variant:v.PageSectionVariants.light},r().createElement(v.Level,null,r().createElement(v.LevelItem,null,r().createElement(v.TextContent,null,r().createElement(v.Text,{component:"h1"},x("kafka_instances"))))),(qe=Je())?r().createElement(v.Alert,{variant:"info",isInline:!0,title:(null==qe?void 0:qe.name)+" was created on "+d()(null==qe?void 0:qe.created_at).format("LLLL"),className:"pf-u-mt-lg"},"This preview instance will expire 48 hours after creation."):r().createElement(r().Fragment,null)),void 0===F?r().createElement(v.PageSection,{variant:v.PageSectionVariants.light,padding:{default:"noPadding"}},r().createElement(p.yR,null)):ce?r().createElement(v.PageSection,{padding:{default:"noPadding"},isFilled:!0},Ce?r().createElement(p.C0,{emptyStateProps:{variant:v.EmptyStateVariant.large},emptyStateIconProps:{icon:m.ZP},emptyStateBodyProps:{body:r().createElement(r().Fragment,null,"Development preview instances are currently unavailable for creation, so check back later. In the meantime,"," ",r().createElement(v.Button,{variant:v.ButtonVariant.link,isSmall:!0,isInline:!0,"data-testid":"emptyState-actionTour"},"take a tour")," ","to learn more about the service.")},titleProps:{title:"Kafka instances unavailable",size:v.TitleSizes.xl,headingLevel:"h2"}}):r().createElement(p.C0,{emptyStateProps:{variant:v.EmptyStateVariant.large},emptyStateIconProps:{icon:f.ZP,color:"green"},emptyStateBodyProps:{body:r().createElement(r().Fragment,null,"Development preview instances are available for creation. For help getting started, access the"," ",r().createElement(v.Button,{variant:v.ButtonVariant.link,isSmall:!0,isInline:!0,onClick:function(){return A.setActiveQuickStart&&A.setActiveQuickStart("getting-started")}},"quick start guide."))},titleProps:{title:"Kafka instances available",size:v.TitleSizes.xl,headingLevel:"h2"}},function(){var e=void 0!==Je()||Ce;if(e){var t=We();return r().createElement(v.Tooltip,{content:t},r().createElement(v.Button,{"data-testid":"emptyStateStreams-buttonCreateKafka",variant:v.ButtonVariant.primary,onClick:function(){return Fe(!0)},isAriaDisabled:e},x("create_kafka_instance")))}return r().createElement(v.Button,{"data-testid":"emptyStateStreams-buttonCreateKafka",variant:v.ButtonVariant.primary,onClick:function(){return Fe(!0)}},x("create_kafka_instance"))}())):F&&void 0!==ce?r().createElement(v.PageSection,{className:"mk--main-page__page-section--table pf-m-padding-on-xl",variant:v.PageSectionVariants.default,padding:{default:"noPadding"}},r().createElement(v.Card,null,r().createElement(_.fw,{kafkaInstanceItems:F,mainToggle:L,onViewConnection:ze,onViewInstance:Ke,onConnectToRoute:t,getConnectToRoutePath:n,refresh:Ge,kafkaDataLoaded:W,setWaitingForDelete:ye,onDelete:je,page:D,perPage:O,total:null==Q?void 0:Q.total,expectedTotal:oe,filteredValue:ge,setFilteredValue:pe,setFilterSelected:fe,filterSelected:ve,orderBy:ee,setOrderBy:te,isDrawerOpen:null!==ae,loggedInUser:De,isMaxCapacityReached:Ce,buttonTooltipContent:We(),isDisabledCreateButton:void 0!==Je()||Ce,labelWithTooltip:Xe(),currentUserkafkas:xe,onCreate:Ye,cloudProviders:j}))):r().createElement(r().Fragment,null))),r().createElement(v.Modal,{variant:v.ModalVariant.small,title:"Mobile experience",isOpen:be,onClose:function(){return Me()},actions:[r().createElement(v.Button,{key:"confirm",variant:"primary",onClick:function(){return Me()}},"Ok")]},"The mobile experience isn't fully optimized yet, so some items might not appear correctly."))}}}]);
//# sourceMappingURL=540.21bab6f0.js.map