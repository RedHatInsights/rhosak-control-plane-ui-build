(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[636],{86435:(e,t,n)=>{"use strict";n.d(t,{I:()=>m});var r=n(70655),a=n(48121),l=n.n(a),i=n(5977),o=n(13006),c=n(92277),u=n(75381),s=n(77435),d=n(23141),v=n(91067),f=n(28623),m=function(){var e=(0,o.useTranslation)().t,t=(0,f.useAlert)().addAlert,n=(0,s.QK)().showModal,m=(0,i.TH)(),p=new URLSearchParams(m.search),_=parseInt(p.get("page")||"",10)||1,g=parseInt(p.get("perPage")||"",10)||10,E=p.has("user-testing"),S=(0,f.useAuth)(),h=(0,f.useConfig)().kas.apiBasePath,b=(0,a.useState)(),y=b[0],A=b[1],w=(0,a.useState)(),C=w[0],P=w[1],T=(0,a.useState)(!1),V=T[0],I=T[1],k=(0,a.useState)("name asc"),D=k[0],x=k[1],B=(0,a.useState)("name"),R=B[0],F=B[1],O=(0,a.useState)([]),N=O[0],L=O[1],U=(0,a.useState)(!1),K=U[0],M=U[1],j=function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,null==S?void 0:S.kas.getToken()];case 1:if(!(n=r.sent()))return[3,5];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,new d.M2({accessToken:n,basePath:h}).listServiceAccounts().then((function(e){var t=null==e?void 0:e.data,n=(null==t?void 0:t.items)||[],r=null==n?void 0:n.length;A(t);var a=(0,u.E7)(n,"name","asc");P(a),M(!r||r<1)}))];case 3:return r.sent(),[3,5];case 4:return function(n){var r,a,l,i,o;(0,u.G6)(n)&&(i=null===(r=n.response)||void 0===r?void 0:r.data.reason,o=null===(l=null===(a=n.response)||void 0===a?void 0:a.data)||void 0===l?void 0:l.code),o===u.SM.UNAUTHORIZED_USER?I(!0):t(e("common.something_went_wrong"),c.AlertVariant.danger,i)}(r.sent()),[3,5];case 5:return[2]}}))}))};(0,a.useEffect)((function(){j()}),[]);var Z=function(e){n(s.Ny.RESET_CREDENTIALS,{serviceAccountToReset:e})},G=function(){n(s.Ny.CREATE_SERVICE_ACCOUNT,{fetchServiceAccounts:j})},z=function(e){n(s.Ny.DELETE_SERVICE_ACCOUNT,{serviceAccountToDelete:e,fetchServiceAccounts:j})};return V?l().createElement(s.MASFullPageError,{titleProps:{title:e("serviceAccount.unauthorized_access_to_service_accounts_title"),headingLevel:"h2"},emptyStateBodyProps:{body:e("serviceAccount.unauthorized_access_to_service_accounts_info")}}):l().createElement(l().Fragment,null,l().createElement(c.PageSection,{variant:c.PageSectionVariants.light},l().createElement(c.TextContent,null,l().createElement(c.Text,{component:"h1"}," ",e("serviceAccount.service_accounts")),l().createElement(c.Text,{component:"p"},e("serviceAccount.service_accounts_title_header_info")))),function(){var t;return void 0===C?l().createElement(c.PageSection,{variant:c.PageSectionVariants.light,padding:{default:"noPadding"}},l().createElement(s.yR,null)):K?l().createElement(c.PageSection,{padding:{default:"noPadding"},isFilled:!0},l().createElement(s.C0,{emptyStateProps:{variant:s.jU.NoItems},titleProps:{title:e("serviceAccount.you_do_not_have_any_service_accounts_yet")},emptyStateBodyProps:{body:e("serviceAccount.create_service_account_to_get_started")},buttonProps:(t={title:e("serviceAccount.create_service_account"),onClick:G},t["data-testid"]="emptyStateStreams-buttonCreateServiceAccount",t)})):l().createElement(c.PageSection,{className:"mk--main-page__page-section--table pf-m-padding-on-xl",variant:c.PageSectionVariants.default,padding:{default:"noPadding"}},l().createElement(c.Card,null,l().createElement(v.s,{page:_,perPage:g,total:(null==y?void 0:y.total)||1,expectedTotal:0,serviceAccountsDataLoaded:!0,serviceAccountItems:C,orderBy:D,setOrderBy:x,filterSelected:R,setFilterSelected:F,filteredValue:N,setFilteredValue:L,onResetCredentials:Z,onDeleteServiceAccount:z,handleCreateModal:G,mainToggle:E})))}())}},44947:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(48121),a=n.n(r),l=n(73727),i=n(13006),o=n(86435),c=n(77435),u=n(78800);const s=function(){return a().createElement(l.BrowserRouter,null,a().createElement(i.I18nextProvider,{i18n:u.Z},a().createElement(c.uZ,null,a().createElement(c.OU,null,a().createElement(o.I,null)))))}},66955:(e,t,n)=>{"use strict";n.d(t,{s:()=>f});var r=n(70655),a=n(48121),l=n.n(a),i=n(13006),o=n(68403),c=n(92277),u=n(77435),s=n(75381),d=n(59379),v=n(28623),f=function(e){var t=e.page,n=e.perPage,f=e.expectedTotal,m=e.total,p=e.serviceAccountsDataLoaded,_=e.serviceAccountItems,g=e.onResetCredentials,E=e.onDeleteServiceAccount,S=e.orderBy,h=e.setOrderBy,b=e.filteredValue,y=e.setFilteredValue,A=e.filterSelected,w=e.setFilterSelected,C=e.handleCreateModal,P=e.mainToggle,T=(0,i.useTranslation)().t,V=(0,v.useAuth)(),I=(0,a.useState)(void 0),k=I[0],D=I[1];(0,a.useEffect)((function(){null==V||V.getUsername().then((function(e){return D(e)}))}),[]);var x,B,R=[{title:T("common.name")},{title:T("common.clientID")},{title:T("common.owner"),transforms:[(0,o.cellWidth)(20)]},{title:T("common.description")},{title:T("time_created")}],F=function(e,t,n){var r,a,l,i;"reset-credentials"===n?g&&g(t):"delete-account"===n&&E&&E(t),null===(i=null===(l=null===(a=null===(r=null==e?void 0:e.target)||void 0===r?void 0:r.parentElement)||void 0===a?void 0:a.parentElement)||void 0===l?void 0:l.previousSibling)||void 0===i||i.focus()},O=function(e){switch(e.toLowerCase()){case"name":return 0;case"clientID":return 1;case"owner":return 2;case"description":return 3;case"created_at":return 4;default:return}};return l().createElement(l().Fragment,null,l().createElement(d.q,{filterSelected:A,setFilterSelected:w,total:m,page:t,perPage:n,filteredValue:b,setFilteredValue:y,handleCreateModal:C,mainToggle:P}),l().createElement(u.wR,{tableProps:{cells:R,rows:(x=[],B=(0,s.o8)(t,n,f),p?(null==_||_.forEach((function(e){var t=e.name,n=e.owner,r=e.description,a=e.clientID,l=e.created_at;x.push({cells:[t,a,n,r,{title:(0,s.L0)(l,T("ago"))}],originalData:e})})),x):(0,s.vK)({loadingCount:B,skeleton:l().createElement(c.Skeleton,null),length:R.length})),"aria-label":T("serviceAccount.service_account_list"),actionResolver:function(e,t){return function(e){var t,n;if(!p)return[];var a,l=e.originalData,i=l.owner===k;return i||(a={tooltip:!0,isDisabled:!0,style:{pointerEvents:"auto",cursor:"default"}}),[(0,r.__assign)((0,r.__assign)((t={title:T("common.reset_credentials"),id:"reset-credentials"},t["data-testid"]="tableServiceAccounts-actionResetCredentials",t.onClick=function(e){return i&&F(e,l,"reset-credentials")},t),a),{tooltipProps:{position:"left",content:T("serviceAccount.no_permission_to_reset_service_account")}}),(0,r.__assign)((0,r.__assign)((n={title:T("serviceAccount.delete_service_account"),id:"delete-account"},n["data-testid"]="tableServiceAccounts-actionDeleteAccount",n.onClick=function(e){return i&&F(e,l,"delete-account")},n),a),{tooltipProps:{position:"left",content:T("serviceAccount.no_permission_to_delete_service_account")}})]}(e)},onSort:function(e,t,n){h&&h(function(e){switch(e){case 0:return"name";case 1:return"clientID";case 2:return"owner";case 3:return"description";case 4:return"created_at";default:return""}}(t)+" "+n)},sortBy:function(){var e=(null==S?void 0:S.split(" "))||[];if(e.length>1)return{index:O(e[0]),direction:e[1]===o.SortByDirection.asc?o.SortByDirection.asc:o.SortByDirection.desc}}()}}),_&&(null==_?void 0:_.length)<1&&p&&l().createElement(u.C0,{emptyStateProps:{variant:u.jU.NoResult},titleProps:{title:T("no_results_found")},emptyStateBodyProps:{body:T("adjust_your_filters_and_try_again")}}))}},59379:(e,t,n)=>{"use strict";n.d(t,{q:()=>u});var r=n(48121),a=n.n(r),l=n(13006),i=n(92277),o=n(71070),c=n(77435),u=function(e){var t=e.filterSelected,n=e.setFilterSelected,u=e.filteredValue,s=e.setFilteredValue,d=e.handleCreateModal,v=(0,l.useTranslation)().t,f=(0,r.useRef)(),m=(0,r.useRef)(),p=(0,r.useState)(!1),_=p[0],g=p[1],E=(0,r.useState)(!0),S=E[0],h=E[1],b=(0,r.useState)(!0),y=b[0],A=b[1],w=(0,r.useState)(!1),C=w[0],P=(w[1],(0,r.useState)()),T=P[0],V=P[1],I=(0,r.useState)(),k=I[0],D=I[1],x=[{label:v("name"),value:"name",disabled:!1},{label:v("owner"),value:"owner",disabled:!1}],B=function(e){return!e||/^([a-zA-Z0-9-_%]*[a-zA-Z0-9-_%])?$/.test(e.trim())},R=function(e,t,n){var r=Object.assign([],u),a=r.findIndex((function(t){return t.filterKey===e}));if(a>-1){var l=r[a];if(l.filterValue&&l.filterValue.length>0){var i=l.filterValue.findIndex((function(e){return e.value===t.value}));if(i>-1){if(!n)return;l.filterValue.splice(i,1)}else r[a].filterValue.push(t)}else r[a].filterValue=[t]}else r.push({filterKey:e,filterValue:[t]});s(r)},F=function(e){"name"===e&&T&&""!=T.trim()?B(T)?(R("name",{value:T,isExact:!1},!1),V("")):h(!1):"owner"===e&&k&&""!=k.trim()&&(B(k)?(R("owner",{value:k,isExact:!1},!1),D("")):A(!1))},O=function(e){var t;if("Enter"===e.key&&!C){var n=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.name;F(n)}},N=function(e){return C?a().createElement("div",null,v("max_filter_message")):a().createElement("div",null,v("input_field_invalid_message",{name:e}))},L=function(e){var t=u.filter((function(t){return t.filterKey===e}));return t.length>0?t[0].filterValue.map((function(e){return e.value})):[]},U=function(e,t,n){var r,a,l=Object.assign([],u),i=l.findIndex((function(t){return t.filterKey===e})),o=Object.assign([],null===(r=l[i])||void 0===r?void 0:r.filterValue),c=t.toString();n&&(null==n?void 0:n.length)>0&&(c=null===(a=null==n?void 0:n.find((function(e){return e.label===t.toString()})))||void 0===a?void 0:a.value);var d=o.findIndex((function(e){return e.value===c}));d>=0&&(l[i].filterValue.splice(d,1),s(l))},K=function(e){var t=Object.assign([],u),n=t.findIndex((function(t){return t.filterKey===e}));n>=0&&(t.splice(n,1),s(t))},M=(a().createElement(a().Fragment,null,a().createElement(i.ToolbarGroup,{variant:"filter-group"},a().createElement(i.ToolbarItem,null,a().createElement(i.Select,{variant:i.SelectVariant.single,"aria-label":"Select filter",onToggle:function(){g(!_)},selections:t,isOpen:_,onSelect:function(e,t){g(!_),n(null==t?void 0:t.toString())}},x.map((function(e,t){return a().createElement(i.SelectOption,{isDisabled:e.disabled,key:t,value:e.value},e.label)})))),a().createElement(i.ToolbarFilter,{chips:L("name"),deleteChip:function(e,t){return U("name",t)},deleteChipGroup:function(){return K("name")},categoryName:v("name")},"name"===(null==t?void 0:t.toLowerCase())&&a().createElement(i.ToolbarItem,null,a().createElement(i.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},a().createElement(i.TextInput,{name:"name",id:"name-input",type:"search","aria-label":v("filter_by_name_lower"),validated:!S||C?i.ValidatedOptions.error:i.ValidatedOptions.default,placeholder:v("filter_by_name_lower"),onChange:function(e){V(e),!S&&h(!0)},onKeyPress:O,value:T,ref:f}),a().createElement(i.Button,{variant:i.ButtonVariant.control,isDisabled:!S||C,onClick:function(){return F("name")},"aria-label":v("filter_by_name_lower")},a().createElement(o.ZP,null)),(!S||C)&&a().createElement(i.Tooltip,{isVisible:C||!S,content:N("name"),reference:f})))),a().createElement(i.ToolbarFilter,{chips:L("owner"),deleteChip:function(e,t){return U("owner",t)},deleteChipGroup:function(){return K("owner")},categoryName:v("owner")},"owner"===(null==t?void 0:t.toLowerCase())&&a().createElement(i.ToolbarItem,null,a().createElement(i.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},a().createElement(i.TextInput,{name:"owner",id:"owner-input",type:"search","aria-label":v("filter_by_owner"),placeholder:v("filter_by_owner"),validated:!y||C?i.ValidatedOptions.error:i.ValidatedOptions.default,onChange:function(e){D(e),!y&&A(!0)},onKeyPress:O,value:k,ref:m}),a().createElement(i.Button,{isDisabled:!y||C,variant:i.ButtonVariant.control,onClick:function(){return F("owner")},"aria-label":v("filter_by_owner")},a().createElement(o.ZP,null)),(!y||C)&&a().createElement(i.Tooltip,{isVisible:C||!y,content:N("owner"),reference:m})))))),[{item:a().createElement(i.Button,{variant:"primary",onClick:d,"data-testid":"tableServiceAccounts-buttonCreateServiceAccount"},v("serviceAccount.create_service_account"))}]);return a().createElement(c.L5,{toolbarProps:{id:"instance-toolbar",clearAllFilters:function(){s([])},collapseListedFiltersBreakpoint:"md",inset:{xl:"insetLg"}},toolbarItems:M})}},91067:(e,t,n)=>{"use strict";n.d(t,{s:()=>r.s});var r=n(66955);n(59379)}}]);
//# sourceMappingURL=636.28d3d273.js.map