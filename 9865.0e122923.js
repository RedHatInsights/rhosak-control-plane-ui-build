"use strict";(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[9865],{73171:(e,t,a)=>{t.qw={name:"AwsIcon",height:512,width:640,svgPath:"M180.41 203.01c-.72 22.65 10.6 32.68 10.88 39.05a8.164 8.164 0 0 1-4.1 6.27l-12.8 8.96a10.66 10.66 0 0 1-5.63 1.92c-.43-.02-8.19 1.83-20.48-25.61a78.608 78.608 0 0 1-62.61 29.45c-16.28.89-60.4-9.24-58.13-56.21-1.59-38.28 34.06-62.06 70.93-60.05 7.1.02 21.6.37 46.99 6.27v-15.62c2.69-26.46-14.7-46.99-44.81-43.91-2.4.01-19.4-.5-45.84 10.11-7.36 3.38-8.3 2.82-10.75 2.82-7.41 0-4.36-21.48-2.94-24.2 5.21-6.4 35.86-18.35 65.94-18.18a76.857 76.857 0 0 1 55.69 17.28 70.285 70.285 0 0 1 17.67 52.36l-.01 69.29zM93.99 235.4c32.43-.47 46.16-19.97 49.29-30.47 2.46-10.05 2.05-16.41 2.05-27.4-9.67-2.32-23.59-4.85-39.56-4.87-15.15-1.14-42.82 5.63-41.74 32.26-1.24 16.79 11.12 31.4 29.96 30.48zm170.92 23.05c-7.86.72-11.52-4.86-12.68-10.37l-49.8-164.65c-.97-2.78-1.61-5.65-1.92-8.58a4.61 4.61 0 0 1 3.86-5.25c.24-.04-2.13 0 22.25 0 8.78-.88 11.64 6.03 12.55 10.37l35.72 140.83 33.16-140.83c.53-3.22 2.94-11.07 12.8-10.24h17.16c2.17-.18 11.11-.5 12.68 10.37l33.42 142.63L420.98 80.1c.48-2.18 2.72-11.37 12.68-10.37h19.72c.85-.13 6.15-.81 5.25 8.58-.43 1.85 3.41-10.66-52.75 169.9-1.15 5.51-4.82 11.09-12.68 10.37h-18.69c-10.94 1.15-12.51-9.66-12.68-10.75L328.67 110.7l-32.78 136.99c-.16 1.09-1.73 11.9-12.68 10.75h-18.3zm273.48 5.63c-5.88.01-33.92-.3-57.36-12.29a12.802 12.802 0 0 1-7.81-11.91v-10.75c0-8.45 6.2-6.9 8.83-5.89 10.04 4.06 16.48 7.14 28.81 9.6 36.65 7.53 52.77-2.3 56.72-4.48 13.15-7.81 14.19-25.68 5.25-34.95-10.48-8.79-15.48-9.12-53.13-21-4.64-1.29-43.7-13.61-43.79-52.36-.61-28.24 25.05-56.18 69.52-55.95 12.67-.01 46.43 4.13 55.57 15.62 1.35 2.09 2.02 4.55 1.92 7.04v10.11c0 4.44-1.62 6.66-4.87 6.66-7.71-.86-21.39-11.17-49.16-10.75-6.89-.36-39.89.91-38.41 24.97-.43 18.96 26.61 26.07 29.7 26.89 36.46 10.97 48.65 12.79 63.12 29.58 17.14 22.25 7.9 48.3 4.35 55.44-19.08 37.49-68.42 34.44-69.26 34.42zm40.2 104.86c-70.03 51.72-171.69 79.25-258.49 79.25A469.127 469.127 0 0 1 2.83 327.46c-6.53-5.89-.77-13.96 7.17-9.47a637.37 637.37 0 0 0 316.88 84.12 630.22 630.22 0 0 0 241.59-49.55c11.78-5 21.77 7.8 10.12 16.38zm29.19-33.29c-8.96-11.52-59.28-5.38-81.81-2.69-6.79.77-7.94-5.12-1.79-9.47 40.07-28.17 105.88-20.1 113.44-10.63 7.55 9.47-2.05 75.41-39.56 106.91-5.76 4.87-11.27 2.3-8.71-4.1 8.44-21.25 27.39-68.49 18.43-80.02z",yOffset:0,xOffset:0},t.er=a(35183).createIcon(t.qw),t.ZP=t.er},68908:(e,t,a)=>{a.d(t,{t:()=>n,N:()=>i});var n=function(){this.cloud_provider="",this.multi_az=!0,this.region="",this.name=""},i=function(){this.name="",this.description=""}},78845:(e,t,a)=>{a.r(t),a.d(t,{CreateInstance:()=>I,default:()=>E});var n=a(70655),i=a(75418),r=a.n(i),l=a(54532),o=a(58788),s=a(73171),c=a(78261),m=a(52648),u=a(45024),d=a(75381),_=a(92717),f=a(68908),g=a(54950),v=function(e){var t=e.isKasTrial,a=(0,l.useTranslation)().t,n=r().useContext(g.QuickStartContext);return r().createElement(o.TextContent,null,r().createElement(o.Text,{component:o.TextVariants.h3},a("common.instance_information")),r().createElement(o.TextList,{component:o.TextListVariants.dl},r().createElement(o.Grid,{sm:6,lg:12,hasGutter:!0},t&&r().createElement(o.GridItem,null,r().createElement(o.TextListItem,{component:o.TextListItemVariants.dt},a("common.duration")),r().createElement(o.TextListItem,{component:o.TextListItemVariants.dd},a("common.duration_value"))),r().createElement(o.GridItem,null,r().createElement(o.TextListItem,{component:o.TextListItemVariants.dt},a("common.ingress_egress")),r().createElement(o.TextListItem,{component:o.TextListItemVariants.dd},a("common.ingress_egress_value"))),r().createElement(o.GridItem,null,r().createElement(o.TextListItem,{component:o.TextListItemVariants.dt},a("common.storage")),r().createElement(o.TextListItem,{component:o.TextListItemVariants.dd},a("common.storage_value"))),r().createElement(o.GridItem,null,r().createElement(o.TextListItem,{component:o.TextListItemVariants.dt},a("common.partitions")),r().createElement(o.TextListItem,{component:o.TextListItemVariants.dd},a("common.partitions_value"))),r().createElement(o.GridItem,null,r().createElement(o.TextListItem,{component:o.TextListItemVariants.dt},a("common.client_connections")),r().createElement(o.TextListItem,{component:o.TextListItemVariants.dd},a("common.client_connections_value"))),r().createElement(o.GridItem,null,r().createElement(o.TextListItem,{component:o.TextListItemVariants.dt},a("common.connection_rate")),r().createElement(o.TextListItem,{component:o.TextListItemVariants.dd},a("common.connection_rate_value"))),r().createElement(o.GridItem,null,r().createElement(o.TextListItem,{component:o.TextListItemVariants.dt},a("common.message_size")),r().createElement(o.TextListItem,{component:o.TextListItemVariants.dd},a("common.message_size_value")))),r().createElement(o.Button,{isSmall:!0,isInline:!0,variant:o.ButtonVariant.link,style:{marginTop:"20px"},onClick:function(){return n.setActiveQuickStart&&n.setActiveQuickStart("getting-started")}},a("common.quick_start_guide_message"))))},p=a(95216),T=function(e){var t=e.quota,a=e.hasKafkaCreationFailed,n=e.loadingQuota,i=e.hasUserTrialKafka,s=(e.isKasTrial,(0,l.useTranslation)().t),c=t||{},m=c.data,u=c.isServiceDown,d=null==m?void 0:m.get(null===p.QuotaType||void 0===p.QuotaType?void 0:p.QuotaType.kas),_=null==m?void 0:m.get(null===p.QuotaType||void 0===p.QuotaType?void 0:p.QuotaType.kasTrial),f="",g="",v=o.AlertVariant.warning;return!d&&_&&i?(f="trial_kafka_title",v=o.AlertVariant.warning,g="deploy_one_instance_alert_message"):d||_||n?d||!_||i?d&&0===(null==d?void 0:d.remaining)?(v=o.AlertVariant.warning,f="standard_kafka_alert_title",g="standard_kafka_alert_message"):d&&(null==d?void 0:d.remaining)>0&&(f=""):(v=o.AlertVariant.info,f="trial_quota_kafka_title"):(v=o.AlertVariant.warning,f="no_quota_kafka_alert_title",g="no_quota_kafka_alert_message"),a&&(v=o.AlertVariant.danger,f="kafka_creation_failed_alert_title",g=d?"standard_kafka_creation_failed_alert_message":"trial_kafka_creation_failed_alert_message"),u&&(f="something_went_wrong",v=o.AlertVariant.danger,g="ams_service_down_message"),r().createElement(r().Fragment,null,n&&r().createElement(o.Alert,{className:"pf-u-mb-md",variant:o.AlertVariant.info,title:s("instance_checking_message"),"aria-live":"polite",isInline:!0,customIcon:r().createElement(o.Spinner,{size:"md","aria-valuetext":"Checking kafka availability"})}),f&&r().createElement(o.Alert,{className:"pf-u-mb-md",variant:v,title:s(f),"aria-live":"polite",isInline:!0},s(g)))},h={kind:"Empty provider",display_name:"Please Select",enabled:!0},I=function(){var e,t,a=(0,l.useTranslation)().t,g=(0,u.QK)(),I=g.store,E=g.hideModal,k=(null==I?void 0:I.modalProps)||{},x=k.onCreate,S=k.refresh,b=k.cloudProviders,L=k.hasUserTrialKafka,C=(0,p.useAuth)(),w=(((0,p.useConfig)()||{}).kas||{}).apiBasePath,y=((0,p.useAlert)()||{}).addAlert,A=((0,p.useQuota)()||{}).getQuota,V=new f.t,z=(0,i.useState)(V),Q=z[0],F=z[1],G=(0,i.useState)({fieldState:"default"}),K=G[0],q=G[1],P=(0,i.useState)({fieldState:"default"}),N=P[0],B=P[1],M=(0,i.useState)([]),D=M[0],O=M[1],U=(0,i.useState)(!0),R=U[0],J=U[1],$=(0,i.useState)(!1),Z=$[0],H=$[1],W=(0,i.useState)(),X=W[0],j=W[1],Y=(0,i.useState)(!1),ee=Y[0],te=Y[1],ae=null===(e=null==X?void 0:X.data)||void 0===e?void 0:e.get(null===p.QuotaType||void 0===p.QuotaType?void 0:p.QuotaType.kas),ne=null===(t=null==X?void 0:X.data)||void 0===t?void 0:t.get(null===p.QuotaType||void 0===p.QuotaType?void 0:p.QuotaType.kasTrial),ie=void 0===(null==X?void 0:X.loading)||(null==X?void 0:X.loading),re=ne&&!ae,le=ie||L||ee||ae&&0===(null==ae?void 0:ae.remaining)||!ae&&!ne,oe=function(){F((function(e){return(0,n.__assign)((0,n.__assign)({},e),{name:"",multi_az:!0})})),J(!0),q({fieldState:"default"}),H(!1)},se=function(e){return(0,n.__awaiter)(void 0,void 0,void 0,(function(){var t,i,r,l,s;return(0,n.__generator)(this,(function(m){switch(m.label){case 0:return[4,null==C?void 0:C.kas.getToken()];case 1:if(t=m.sent(),i=e.id,!t||!i)return[3,5];m.label=2;case 2:return m.trys.push([2,4,,5]),[4,new _.DefaultApi(new _.Configuration({accessToken:t,basePath:w})).getCloudProviderRegions(i).then((function(t){var a,i=(null===(a=t.data)||void 0===a?void 0:a.items)||[],r=null==i?void 0:i.filter((function(e){return e.enabled}));if(1===r.length&&r[0].id&&e.name){var l=r[0].id;F((function(e){return(0,n.__assign)((0,n.__assign)({},e),{region:l})}))}r.unshift(h),O(r)}))];case 3:return m.sent(),[3,5];case 4:return r=m.sent(),l=void 0,(0,c.G)(r)&&(l=null===(s=r.response)||void 0===s?void 0:s.data.reason),y&&y({title:a("common.something_went_wrong"),variant:o.AlertVariant.danger,description:l}),[3,5];case 5:return[2]}}))}))};(0,i.useEffect)((function(){(null==b?void 0:b.length)>0&&b[0].name&&(F((function(e){return(0,n.__assign)((0,n.__assign)({},e),{cloud_provider:b[0].name})})),se(b[0]))}),[b]);(0,i.useEffect)((function(){(0,n.__awaiter)(void 0,void 0,void 0,(function(){return(0,n.__generator)(this,(function(e){switch(e.label){case 0:return A?[4,A().then((function(e){j(e)}))]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}),[]);var ce=function(){return(0,n.__awaiter)(void 0,void 0,void 0,(function(){var e,t,i,r,l,s,u;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return function(){var e=!0,t=Q.name,n=Q.region;return(null==t?void 0:t.trim())?/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(t.trim())||(e=!1,q({fieldState:"error",message:a("common.input_filed_invalid_helper_text")})):(e=!1,q({fieldState:"error",message:a("common.this_is_a_required_field")})),t.length>m.JB&&(e=!1,q({fieldState:"error",message:a("length_is_greater_than_expected",{maxLength:m.JB})})),n.trim()||(e=!1,B({fieldState:"error",message:a("common.this_is_a_required_field")})),e}()?[4,null==C?void 0:C.kas.getToken()]:(J(!1),[2]);case 1:if(!(e=n.sent()))return[3,5];n.label=2;case 2:return n.trys.push([2,4,,5]),t=new _.DefaultApi(new _.Configuration({accessToken:e,basePath:w})),H(!0),x(),[4,t.createKafka(!0,Q).then((function(){oe(),E(),S()}))];case 3:return n.sent(),[3,5];case 4:return i=n.sent(),(0,c.G)(i)&&(r=(null===(u=null==i?void 0:i.response)||void 0===u?void 0:u.data)||{},l=r.code,s=r.reason,l===d.SM.DUPLICATE_INSTANCE_NAME?(J(!1),q({fieldState:"error",message:a("the_name_already_exists_please_enter_a_unique_name",{name:Q.name})})):l===d.SM.PREVIEW_KAFKA_INSTANCE_EXIST||l===d.SM.INSUFFICIENT_QUOTA||l===d.SM.FAILED_TO_CHECK_QUOTA?te(!0):y&&y({title:a("common.something_went_wrong"),variant:o.AlertVariant.danger,description:s,dataTestId:"toastCreateKafka-failed"})),H(!1),[3,5];case 5:return[2]}}))}))};(0,i.useEffect)((function(){"error"!==K.fieldState&&"error"!==N.fieldState&&J(!0)}),[K.fieldState,N.fieldState]);var me,ue,de,_e,fe,ge,ve,pe=function(e){var t=!0;F((function(t){return(0,n.__assign)((0,n.__assign)({},t),{name:e})})),e&&!/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(e.trim())&&(t=!1),(null==e?void 0:e.length)>m.JB?q({fieldState:"error",message:a("length_is_greater_than_expected",{maxLength:m.JB})}):t&&"error"===K.fieldState?q({fieldState:"default",message:""}):t||q({fieldState:"error",message:a("common.input_filed_invalid_helper_text")})},Te=function(e){F((function(t){return(0,n.__assign)((0,n.__assign)({},t),{region:e})})),e&&"error"===N.fieldState&&B({fieldState:"default",message:""})},he=function(e){switch(null==e?void 0:e.toLowerCase()){case"aws":return r().createElement(s.ZP,{size:"lg",color:"black",className:"mk--create-instance__tile--icon"});default:return}},Ie=function(e,t){if(e){var a=t.currentTarget.id;F((function(e){return(0,n.__assign)((0,n.__assign)({},e),{multi_az:"multi"===a})}))}},Ee=function(e){e.preventDefault(),ce()};return r().createElement(u.a$,{isModalOpen:!0,title:a("create_a_kafka_instance"),handleModalToggle:function(){E(),oe()},onCreate:ce,isFormValid:R,primaryButtonTitle:a("create_instance"),isCreationInProgress:Z,dataTestIdSubmit:"modalCreateKafka-buttonSubmit",dataTestIdCancel:"modalCreateKafka-buttonCancel",isDisabledButton:le},r().createElement(r().Fragment,null,r().createElement(T,{quota:X,hasKafkaCreationFailed:ee,loadingQuota:ie,hasUserTrialKafka:L,isKasTrial:re}),r().createElement(o.Flex,{direction:{default:"column",lg:"row"}},r().createElement(o.FlexItem,{flex:{default:"flex_2"}},(me=K.message,ue=K.fieldState,de=Q.name,_e=Q.cloud_provider,fe=Q.multi_az,ge=Q.region,ve=fe,r().createElement(o.Form,{onSubmit:Ee},!R&&r().createElement(o.FormAlert,null,r().createElement(o.Alert,{variant:"danger",title:a("common.form_invalid_alert"),"aria-live":"polite",isInline:!0})),r().createElement(o.FormGroup,{label:a("instance_name"),helperText:a("create_instance_name_helper_text"),helperTextInvalid:me,isRequired:!0,validated:ue,fieldId:"form-instance-name"},r().createElement(o.TextInput,{isRequired:!0,validated:ue,type:"text",id:"form-instance-name",name:"instance-name",value:de,onChange:pe,autoFocus:!0})),r().createElement(o.FormGroup,{label:a("cloud_provider"),fieldId:"form-cloud-provider-name"},null==b?void 0:b.map((function(e){var t=e.name,a=e.display_name,i=void 0===a?"":a;return r().createElement(o.Tile,{key:"tile-"+t,title:i,icon:he(t),isSelected:_e===t,onClick:function(){return t=e,F((function(e){return(0,n.__assign)((0,n.__assign)({},e),{cloud_provider:t.name||""})})),void se(t);var t}})}))),r().createElement(o.FormGroup,{label:a("cloud_region"),helperTextInvalid:N.message,validated:N.fieldState,fieldId:"form-cloud-region-option",isRequired:!0},r().createElement(o.FormSelect,{validated:N.fieldState,value:ge,onChange:Te,id:"cloud-region-select",name:"cloud-region","aria-label":a("cloud_region")},D.map((function(e,t){var n=e.id,i=e.display_name,l=void 0===i?"":i;return r().createElement(o.FormSelectOption,{key:t,value:n,label:n?a(n):l})})))),r().createElement(o.FormGroup,{label:a("availabilty_zones"),fieldId:"availability-zones"},r().createElement(o.ToggleGroup,{"aria-label":a("availability_zone_selection")},r().createElement(o.Tooltip,{content:a("kafkaInstance.availabilty_zones_tooltip_message")},r().createElement(o.ToggleGroupItem,{text:a("single"),value:"single",isDisabled:!0,buttonId:"single",onChange:Ie})),r().createElement(o.ToggleGroupItem,{text:a("multi"),value:"multi",buttonId:"multi",isSelected:ve,onChange:Ie}),r().createElement(o.Tooltip,{content:a("kafkaInstance.availabilty_zones_tooltip_message"),reference:function(){return document.getElementById("multi")||document.createElement("span")}})))))),r().createElement(o.Divider,{isVertical:!0}),r().createElement(o.FlexItem,{flex:{default:"flex_1"},className:"mk--create-instance-modal__sidebar--content"},r().createElement(v,{isKasTrial:re})))))};const E=I}}]);
//# sourceMappingURL=9865.0e122923.js.map