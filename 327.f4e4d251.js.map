{"version":3,"file":"327.f4e4d251.js","mappings":"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","sources":["webpack://kas-ui/./src/app/common/MASErrorBoundary/MASErrorBoundary.tsx","webpack://kas-ui/./src/app/common/MASLoading/MASLoading.tsx","webpack://kas-ui/./src/app/modules/Metrics/MetricsApi.ts","webpack://kas-ui/./src/app/modules/Metrics/MetricsFederated.tsx","webpack://kas-ui/./src/app/utils/utils.ts","webpack://kas-ui/./src/i18n/i18n.ts"],"sourcesContent":["import React, { Component, ErrorInfo, ReactNode } from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { PageSection, Button } from '@patternfly/react-core';\nimport { MASEmptyState, MASEmptyStateVariant } from '@app/common';\nimport './MASErrorBoundary.css';\n\ntype Props = WithTranslation &\n  RouteComponentProps & {\n    children?: ReactNode;\n  };\n\ntype State = {\n  hasError?: boolean;\n};\n\nclass MASErrorBoundary extends Component<Props, State> {\n  state: State = {\n    hasError: false,\n  };\n\n  static getDerivedStateFromError(_: Error): State {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error('error:', error, errorInfo);\n  }\n\n  onClickButton = () => {\n    const { history } = this.props;\n    this.setState({ hasError: false });\n    history && history.push('/');\n  };\n\n  render() {\n    const { t } = this.props;\n    const { hasError } = this.state;\n\n    if (hasError) {\n      return (\n        <PageSection padding={{ default: 'noPadding' }} isFilled>\n          <MASEmptyState\n            emptyStateProps={{\n              variant: MASEmptyStateVariant.UnexpectedError,\n            }}\n            emptyStateIconProps={{\n              className: 'icon-color',\n            }}\n            titleProps={{\n              title: t('common.something_went_wrong'),\n            }}\n            emptyStateBodyProps={{\n              body: t('unexpected_error'),\n            }}\n          >\n            <Button onClick={this.onClickButton}>\n              {t('go_to_kafka_instances')}\n            </Button>\n          </MASEmptyState>\n        </PageSection>\n      );\n    }\n    return this.props.children;\n  }\n}\n\nconst MASErrorBoundaryComponent = withRouter(\n  withTranslation()(MASErrorBoundary)\n);\nexport { MASErrorBoundaryComponent as MASErrorBoundary };\n","import React from 'react';\nimport {\n  Bullseye,\n  BullseyeProps,\n  Spinner,\n  SpinnerProps,\n} from '@patternfly/react-core';\n\nexport type MASLoadingProps = {\n  bullseyeProps?: Omit<BullseyeProps, 'children'>;\n  spinnerProps?: SpinnerProps;\n};\n\nexport const MASLoading: React.FunctionComponent<MASLoadingProps> = ({\n  bullseyeProps,\n  spinnerProps,\n}: MASLoadingProps) => (\n  <Bullseye {...bullseyeProps}>\n    <Spinner {...spinnerProps} />\n  </Bullseye>\n);\n","import { TopicsApi } from '@rhoas/kafka-instance-sdk';\nimport {\n  Configuration,\n  ConfigurationParameters,\n  DefaultApi,\n  RangeQuery,\n} from '@rhoas/kafka-management-sdk';\n\ntype NoUndefinedField<T> = {\n  [P in keyof T]-?: NoUndefinedField<NonNullable<T[P]>>;\n};\ntype SafeRangeQuery = NoUndefinedField<RangeQuery>;\nexport type TotalBytesMetrics = { [timestamp: string]: number };\nexport type PartitionBytesMetric = { [partition: string]: TotalBytesMetrics };\n\nexport type BasicApiConfigurationParameters = Pick<\n  ConfigurationParameters,\n  'accessToken' | 'basePath'\n>;\n\ntype FetchDiskSpaceMetricsProps = {\n  kafkaId: string;\n  timeDuration: number;\n  timeInterval: number;\n} & BasicApiConfigurationParameters;\nexport const fetchDiskSpaceMetrics = async ({\n  kafkaId,\n  timeDuration,\n  timeInterval,\n  accessToken,\n  basePath,\n}: FetchDiskSpaceMetricsProps) => {\n  const apisService = new DefaultApi(\n    new Configuration({\n      accessToken,\n      basePath,\n    })\n  );\n\n  const response = await apisService.getMetricsByRangeQuery(\n    kafkaId,\n    timeDuration,\n    timeInterval,\n    ['kubelet_volume_stats_used_bytes']\n  );\n\n  // Remove all results with no data. Not sure this can really  happen but since\n  // the types allow for undefined we need to do a bit of defensive programming.\n  const safeMetrics: SafeRangeQuery[] = (response.data.items || []).filter(\n    (m) =>\n      // defensive programming\n      !(\n        m.values &&\n        m.metric &&\n        m.metric.topic &&\n        m.metric.name &&\n        m.metric.persistentvolumeclaim &&\n        m.metric.persistentvolumeclaim.includes('zookeeper')\n      )\n  ) as SafeRangeQuery[];\n\n  const aggregatedData: TotalBytesMetrics = {};\n\n  safeMetrics.forEach((m) => {\n    m.values.forEach(\n      ({ value, timestamp }) =>\n        (aggregatedData[timestamp] = value + (aggregatedData[timestamp] || 0))\n    );\n  });\n  return aggregatedData;\n};\n\ntype FetchTopicsMetricsProps = FetchRawTopicsMetricsProps;\nexport const fetchTopicsMetrics = async (props: FetchTopicsMetricsProps) => {\n  const [kafkaTopics, metrics] = await Promise.all([\n    fetchKafkaTopis({\n      basePath: props.kafkaApiPath,\n      accessToken: props.accessToken,\n    }),\n    fetchRawTopicMetrics(props),\n  ]);\n  const {\n    topics: metricsTopics,\n    bytesIncoming,\n    bytesOutgoing,\n    bytesPerPartition,\n  } = metrics;\n  return {\n    kafkaTopics,\n    metricsTopics,\n    bytesIncoming,\n    bytesOutgoing,\n    bytesPerPartition,\n  };\n};\n\nexport const fetchKafkaTopis = async ({\n  accessToken,\n  basePath,\n}: BasicApiConfigurationParameters): Promise<string[]> => {\n  const api = new TopicsApi(\n    new Configuration({\n      accessToken,\n      basePath,\n    })\n  );\n  const response = await api.getTopics(\n    undefined,\n    100,\n    100,\n    undefined,\n    undefined,\n    undefined,\n    undefined\n  );\n  return (response.data.items || []).map((t) => t.name as string);\n};\n\ntype FetchRawTopicsMetricsProps = {\n  kafkaId: string;\n  kafkaApiPath: string;\n  timeDuration: number;\n  timeInterval: number;\n  selectedTopic: string | undefined;\n} & BasicApiConfigurationParameters;\ntype FetchRawTopicsMetricsReturnValue = {\n  topics: string[];\n  bytesOutgoing: TotalBytesMetrics;\n  bytesIncoming: TotalBytesMetrics;\n  bytesPerPartition: PartitionBytesMetric;\n};\nexport async function fetchRawTopicMetrics({\n  accessToken,\n  basePath,\n  kafkaId,\n  timeDuration,\n  timeInterval,\n  selectedTopic,\n}: FetchRawTopicsMetricsProps): Promise<FetchRawTopicsMetricsReturnValue> {\n  const privateTopics = ['__consumer_offsets', '__strimzi_canary'];\n\n  const apisService = new DefaultApi(\n    new Configuration({\n      accessToken,\n      basePath,\n    })\n  );\n\n  const response = await apisService.getMetricsByRangeQuery(\n    kafkaId,\n    timeDuration,\n    timeInterval,\n    [\n      'kafka_server_brokertopicmetrics_bytes_in_total',\n      'kafka_server_brokertopicmetrics_bytes_out_total',\n      'kafka_topic:kafka_log_log_size:sum',\n    ]\n  );\n\n  // Remove all results with no data. Not sure this can really  happen but since\n  // the types allow for undefined we need to do a bit of defensive programming.\n  const safeMetrics: SafeRangeQuery[] = (response.data.items || []).filter(\n    (m) =>\n      // defensive programming\n      !(m.values && m.metric && m.metric.topic && m.metric.name) &&\n      !privateTopics.includes(m.metric?.topic || '')\n  ) as SafeRangeQuery[];\n\n  // Also filter for metrics about the selectedTopic, if specified\n  const filteredMetrics = safeMetrics.filter((m) =>\n    // filter for metrics for the selectedTopic, if needed\n    selectedTopic !== undefined ? m.metric?.topic === selectedTopic : true\n  );\n\n  // get the unique topics we have metrics for in the selected time range\n  const topics = Array.from(new Set(safeMetrics.map((m) => m.metric.topic)));\n\n  const bytesIncoming: TotalBytesMetrics = {};\n  const bytesOutgoing: TotalBytesMetrics = {};\n  const bytesPerPartition: PartitionBytesMetric = {};\n\n  filteredMetrics.forEach((m) => {\n    const { __name__: name, topic } = m.metric;\n\n    function addAggregatedTotalBytesTo(metric: TotalBytesMetrics) {\n      m.values.forEach(\n        ({ value, timestamp }) =>\n          (metric[timestamp] = value + (metric[timestamp] || 0))\n      );\n    }\n\n    function addAggregatePartitionBytes() {\n      const partition = bytesPerPartition[topic] || {};\n      m.values.forEach(\n        ({ value, timestamp }) =>\n          (partition[timestamp] = value + (partition[timestamp] || 0))\n      );\n      bytesPerPartition[topic] = partition;\n    }\n\n    switch (name) {\n      case 'kafka_server_brokertopicmetrics_bytes_in_total':\n        addAggregatedTotalBytesTo(bytesIncoming);\n        break;\n      case 'kafka_server_brokertopicmetrics_bytes_out_total':\n        addAggregatedTotalBytesTo(bytesOutgoing);\n        break;\n      case 'kafka_topic:kafka_log_log_size:sum':\n        addAggregatePartitionBytes();\n        break;\n    }\n  });\n\n  return {\n    topics,\n    bytesOutgoing,\n    bytesIncoming,\n    bytesPerPartition,\n  };\n}\n","import React from 'react';\nimport { Metrics, MetricsProps } from '@app/modules/Metrics/Metrics';\nimport { initI18N } from '@i18n/i18n';\nimport { I18nextProvider } from 'react-i18next';\n\n// Version of Metrics for federation\n\nconst MetricsFederated: React.FunctionComponent<MetricsProps> = ({\n  kafkaId,\n  apiBasePath,\n  onCreateTopic,\n}) => {\n  return (\n    <I18nextProvider i18n={initI18N()}>\n      <Metrics\n        kafkaId={kafkaId}\n        apiBasePath={apiBasePath}\n        onCreateTopic={onCreateTopic}\n      />\n    </I18nextProvider>\n  );\n};\n\nexport default MetricsFederated;\n","import { IRowCell, IRowData } from '@patternfly/react-table';\nimport { formatDistance } from 'date-fns';\n\nfunction accessibleRouteChangeHandler(): number {\n  return window.setTimeout(() => {\n    const mainContainer = document.getElementById('primary-app-container');\n    if (mainContainer) {\n      mainContainer.focus();\n    }\n  }, 50);\n}\n\nexport type KeyValueOptions = {\n  value: string;\n  label: string;\n  disabled?: boolean;\n};\n\nenum InstanceStatus {\n  READY = 'ready',\n  ACCEPTED = 'accepted',\n  PREPARING = 'preparing',\n  PROVISIONING = 'provisioning',\n  FAILED = 'failed',\n  DEPROVISION = 'deprovision',\n  DELETED = 'deleting',\n}\n\nenum InstanceType {\n  eval = 'eval',\n  standard = 'standard',\n}\n\nconst cloudProviderOptions: KeyValueOptions[] = [\n  { value: 'aws', label: 'Amazon Web Services' },\n  // Only aws is supported for now\n  // { value: 'azure', label: 'Microsoft Azure' },\n  // { value: 'baremetal', label: 'Bare Metal' },\n  // { value: 'gcp', label: 'Google Cloud Platform' },\n  // { value: 'libvirt', label: 'Libvirt' },\n  // { value: 'openstack', label: 'OpenStack' },\n  // { value: 'vsphere', label: 'VSphere' },\n];\n\nconst statusOptions: KeyValueOptions[] = [\n  { value: 'ready', label: 'Ready' },\n  { value: 'failed', label: 'Failed' },\n  { value: 'accepted', label: 'Creation pending' },\n  { value: 'provisioning', label: 'Creation in progress' },\n  { value: 'preparing', label: 'Creation in progress' },\n  { value: 'deprovision', label: 'Deletion in progress' },\n  { value: 'deleting', label: 'Deletion in progress' },\n];\n\nconst getCloudProviderDisplayName = (value: string): string => {\n  return (\n    cloudProviderOptions.find((option) => option.value === value)?.label ||\n    value\n  );\n};\n\nconst cloudRegionOptions: KeyValueOptions[] = [\n  { value: 'us-east-1', label: 'US East, N. Virginia' },\n  { value: 'eu-west-1', label: 'EU, Ireland' },\n\n  // Only us-east is supported for now\n  // { value: 'ap-northeast-1', label: 'Asia Pacific, Tokyo' },\n  // { value: 'ap-northeast-2', label: 'Asia Pacific, Seoul' },\n  // { value: 'ap-south-1', label: 'Asia Pacific, Mumbai' },\n  // { value: 'ap-southeast-1', label: 'Asia Pacific, Singapore' },\n  // { value: 'ap-southeast-2', label: 'Asia Pacific, Sydney' },\n  // { value: 'ca-central-1', label: 'Canada, Central' },\n  // { value: 'eu-central-1', label: 'EU, Frankfurt' },\n  // { value: 'eu-north-1', label: 'EU, Stockholm' },\n  // { value: 'eu-west-2', label: 'EU, London' },\n  // { value: 'eu-west-3', label: 'EU, Paris' },\n  // { value: 'me-south-1', label: 'Middle East, Bahrain' },\n  // { value: 'sa-east-1', label: 'South America, São Paulo' },\n  // { value: 'us-east-2', label: 'US East, Ohio' },\n  // { value: 'us-west-1', label: 'US West, N. California' },\n  // { value: 'us-west-2', label: 'US West, Oregon' },\n];\n\nconst MAX_INSTANCE_NAME_LENGTH = 32;\nconst MAX_FILTER_LIMIT = 10;\nconst MAX_SERVICE_ACCOUNT_NAME_LENGTH = 50;\n\nconst MAX_POLL_INTERVAL = 5000;\n\n// function to get exact number of skeleton count required for the current page\nconst getLoadingRowsCount = (\n  page: number,\n  perPage: number,\n  expectedTotal: number\n): number => {\n  // initiaise loadingRowCount by perPage\n  let loadingRowCount = perPage;\n  /*\n    if number of expected count is greater than 0\n      calculate the loadingRowCount\n    else\n      leave the loadingRowCount to perPage\n   */\n  if (expectedTotal && expectedTotal > 0) {\n    // get total number of pages\n    const totalPage =\n      expectedTotal % perPage !== 0\n        ? Math.floor(expectedTotal / perPage) + 1\n        : Math.floor(expectedTotal / perPage);\n    // check whether the current page is the last page\n    if (page === totalPage) {\n      // check whether to total expected count is greater than perPage count\n      if (expectedTotal > perPage) {\n        // assign the calculated skelton rows count to display the exact number of expected loading skelton rows\n        loadingRowCount =\n          expectedTotal % perPage === 0 ? perPage : expectedTotal % perPage;\n      } else {\n        loadingRowCount = expectedTotal;\n      }\n    }\n  }\n  // return the exact number of skeleton expected at the time of loading\n  return loadingRowCount !== 0 ? loadingRowCount : perPage;\n};\n\nconst sortValues = <T>(\n  items: T[] | undefined,\n  key: string,\n  order = 'asc'\n): T[] | undefined => {\n  const compareValue = (a: T, b: T) => {\n    if (\n      !Object.prototype.hasOwnProperty.call(a, key) ||\n      Object.prototype.hasOwnProperty.call(b, key)\n    ) {\n      // property doesn't exist on either object\n      return 0;\n    }\n\n    const varA = typeof a[key] === 'string' ? a[key].toUpperCase() : a[key];\n    const varB = typeof b[key] === 'string' ? b[key].toUpperCase() : b[key];\n\n    let comparison = 0;\n    if (varA > varB) {\n      comparison = 1;\n    } else if (varA < varB) {\n      comparison = -1;\n    }\n    return order === 'desc' ? comparison * -1 : comparison;\n  };\n  return items?.sort(compareValue);\n};\n\nconst getFormattedDate = (\n  date: string | Date,\n  translatePostfix: string\n): string => {\n  date = typeof date === 'string' ? new Date(date) : date;\n  return formatDistance(date, new Date()) + ' ' + translatePostfix;\n};\n\nconst getModalAppendTo = (): HTMLElement =>\n  (document.getElementById('chrome-app-render-root') as HTMLElement) ||\n  document.body;\n\nconst isMobileTablet = (): boolean => {\n  let check = false;\n  (function (a) {\n    /* eslint-disable */\n    if (\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\n        a\n      ) ||\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n        a.substr(0, 4)\n      )\n    )\n      check = true;\n  })(navigator.userAgent || navigator.vendor || window['opera']);\n  return check;\n};\n\nconst getSkeletonForRows = ({\n  loadingCount,\n  skeleton,\n  length,\n}: {\n  loadingCount: number;\n  skeleton: React.ReactNode;\n  length: number;\n}) => {\n  const rows: (IRowData | string[])[] | undefined = [];\n  const cells: (React.ReactNode | IRowCell)[] = [];\n  //get exact number of skeletonCompoenet cells based on total columns\n  for (let i = 0; i < length; i++) {\n    cells.push({ title: skeleton });\n  }\n  // get exact of skeleton rows based on expected total count of instances\n  for (let i = 0; i < loadingCount; i++) {\n    rows.push({\n      cells: cells,\n    });\n  }\n  return rows;\n};\n\nexport {\n  accessibleRouteChangeHandler,\n  cloudProviderOptions,\n  cloudRegionOptions,\n  getCloudProviderDisplayName,\n  statusOptions,\n  InstanceStatus,\n  MAX_INSTANCE_NAME_LENGTH,\n  MAX_FILTER_LIMIT,\n  MAX_POLL_INTERVAL,\n  getLoadingRowsCount,\n  MAX_SERVICE_ACCOUNT_NAME_LENGTH,\n  sortValues,\n  getFormattedDate,\n  getModalAppendTo,\n  isMobileTablet,\n  getSkeletonForRows,\n  InstanceType,\n};\n","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport detector from 'i18next-browser-languagedetector';\nimport httpBackend from 'i18next-http-backend';\nimport Pseudo from 'i18next-pseudo';\nimport dayjs from 'dayjs';\n// import fromNow\nimport * as relativeTime from 'dayjs/plugin/relativeTime';\n\n// import locales for any languages you're supporting (English is included by default)\nimport 'dayjs/locale/ja';\ndeclare const __webpack_public_path__: string;\n\ndeclare const window: Window & {\n  windowError: string;\n};\n\nexport const initI18N = () => {\n  const params = new URLSearchParams(window.location.search);\n  const pseudolocalizationEnabled = params.get('pseudolocalization') === 'true';\n\n  const kasi18n = i18n.createInstance();\n\n  kasi18n\n    .use(new Pseudo({ enabled: pseudolocalizationEnabled, wrapped: true }))\n    // fetch json files\n    // learn more: https://github.com/i18next/i18next-http-backend\n    .use(httpBackend)\n    // detect user language\n    // learn more: https://github.com/i18next/i18next-browser-languageDetector\n    .use(detector)\n    // pass the i18n instance to react-i18next.\n    .use(initReactI18next)\n    // init i18next\n    // for all options read: https://www.i18next.com/overview/configuration-options\n    .init(\n      {\n        backend: {\n          loadPath: `${__webpack_public_path__}locales/{{lng}}/{{ns}}.json`,\n        },\n        fallbackLng: 'en',\n        load: 'all',\n        debug: process.env.NODE_ENV === 'development',\n        detection: { caches: [] },\n        contextSeparator: '~',\n        // add any namespaces you're using here for loading purposes\n        ns: ['public'],\n        defaultNS: 'public',\n        nsSeparator: ':',\n        keySeparator: '.',\n        postProcess: ['pseudo'],\n        interpolation: {\n          format: function (value, format, lng, options) {\n            options = options || {};\n            if (format === 'number') {\n              // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat#Browser_compatibility\n              return new Intl.NumberFormat(lng).format(value);\n            }\n            if (value instanceof Date) {\n              if (format === 'fromNow') {\n                return dayjs(value).fromNow(options.omitSuffix === true);\n              }\n              return dayjs(value).format(format);\n            }\n            return value;\n          },\n          escapeValue: false, // not needed for react as it escapes by default\n        },\n        react: {\n          useSuspense: true,\n          wait: true,\n        },\n        saveMissing: true,\n        // missingKeyHandler: function (lng, ns, key) {\n        //   // window.windowError = `Missing i18n key \"${key}\" in namespace \"${ns}\" and language \"${lng}.\"`;\n        //   // eslint-disable-next-line no-console\n        //   // console.error(window.windowError); // we use these in OpenShift to break tests\n        // },\n      },\n      () => {\n        dayjs.locale(i18n.language);\n      }\n    );\n\n  kasi18n.on('languageChanged', function (lng) {\n    dayjs.locale(lng);\n  });\n\n  return kasi18n;\n};\n"],"names":["state","hasError","onClickButton","history","props","setState","push","getDerivedStateFromError","_","componentDidCatch","error","errorInfo","console","render","t","this","PageSection","padding","default","isFilled","MASEmptyState","emptyStateProps","variant","emptyStateIconProps","className","titleProps","title","emptyStateBodyProps","body","Button","onClick","children","Component","MASLoading","withRouter","withTranslation","bullseyeProps","spinnerProps","Bullseye","Spinner","fetchDiskSpaceMetrics","kafkaId","timeDuration","timeInterval","accessToken","basePath","DefaultApi","Configuration","getMetricsByRangeQuery","response","safeMetrics","data","items","filter","m","values","metric","topic","name","persistentvolumeclaim","includes","aggregatedData","forEach","value","timestamp","fetchTopicsMetrics","Promise","all","fetchKafkaTopis","kafkaApiPath","fetchRawTopicMetrics","kafkaTopics","metrics","metricsTopics","bytesIncoming","bytesOutgoing","bytesPerPartition","TopicsApi","getTopics","undefined","map","selectedTopic","privateTopics","filteredMetrics","topics","Array","from","Set","partition","addAggregatedTotalBytesTo","apiBasePath","onCreateTopic","I18nextProvider","i18n","InstanceStatus","InstanceType","cloudProviderOptions","label","statusOptions","cloudRegionOptions","MAX_INSTANCE_NAME_LENGTH","MAX_FILTER_LIMIT","MAX_SERVICE_ACCOUNT_NAME_LENGTH","MAX_POLL_INTERVAL","getLoadingRowsCount","page","perPage","expectedTotal","loadingRowCount","Math","floor","sortValues","key","order","sort","a","b","Object","prototype","hasOwnProperty","call","varA","toUpperCase","varB","comparison","getFormattedDate","date","translatePostfix","Date","formatDistance","getModalAppendTo","document","getElementById","isMobileTablet","check","navigator","userAgent","vendor","window","test","substr","getSkeletonForRows","loadingCount","skeleton","length","rows","cells","i","initI18N","pseudolocalizationEnabled","URLSearchParams","location","search","get","kasi18n","use","enabled","wrapped","initReactI18next","init","backend","loadPath","fallbackLng","load","debug","detection","caches","contextSeparator","ns","defaultNS","nsSeparator","keySeparator","postProcess","interpolation","format","lng","options","Intl","NumberFormat","fromNow","omitSuffix","escapeValue","react","useSuspense","wait","saveMissing","on"],"sourceRoot":""}