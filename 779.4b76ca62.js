(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[779],{4218:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>P});var a=n(8121),i=n.n(a),r=n(655),o=n(5977),s=n(3006),l=n(5399),c=n(4643),u=n(9826),d=n(2603),v=n(9995);var f=n(5381),g=n(7038);function m(){return!document[(e=document,void 0!==e.hidden?"hidden":void 0!==e.msHidden?"msHidden":void 0!==e.webkitHidden?"webkitHidden":"")];var e}function h(){var e=(0,a.useState)(m()),t=e[0],n=e[1],i=function(){return n(m())};return(0,a.useEffect)((function(){var e,t=void 0!==(e=document).hidden?"visibilitychange":void 0!==e.msHidden?"msvisibilitychange":void 0!==e.webkitHidden?"webkitvisibilitychange":"";return document.addEventListener(t,i,!1),function(){document.removeEventListener(t,i)}})),{isVisible:t,setIsVisible:n}}var _=function(e){var t,n,m,_,p=e.onConnectToInstance,E=e.getConnectToInstancePath,P=(0,a.useContext)(d.V),k=(0,a.useContext)(v.G).basePath,b=h().isVisible,S=(0,o.TH)(),T=new URLSearchParams(S.search),w=parseInt(T.get("page")||"",10)||1,y=parseInt(T.get("perPage")||"",10)||10,C=T.has("user-testing"),I=(0,s.useTranslation)().t,V=(0,c.Z7)().addAlert,L=(0,a.useState)(!1),D=L[0],H=L[1],R=(0,a.useState)(),x=R[0],A=R[1],U=(0,a.useState)({}),B=U[0],M=U[1],O=(0,a.useState)([]),G=O[0],K=O[1],F=(0,a.useState)(!1),Z=F[0],j=F[1],z=(0,a.useState)("created_at desc"),N=z[0],Q=z[1],W=(0,a.useState)(),Y=W[0],q=W[1],J=(0,a.useState)(0),X=J[0],$=J[1],ee=(0,a.useState)(0),te=ee[0],ne=ee[1],ae=(0,a.useState)("name"),ie=ae[0],re=ae[1],oe=(0,a.useState)([]),se=oe[0],le=oe[1],ce=(0,a.useState)(!1),ue=ce[0],de=ce[1],ve=(i().createRef(),Y||{}),fe=ve.activeTab,ge=ve.instanceDetail,me=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return[4,null==P?void 0:P.getToken()];case 1:if(!function(e){return void 0!==e&&""!==e}(t=a.sent())||!b)return[3,7];a.label=2;case 2:return a.trys.push([2,6,,7]),[4,(n=new u.M2({accessToken:t,basePath:k})).listKafkas(null==w?void 0:w.toString(),null==y?void 0:y.toString(),N,(i=[],se.forEach((function(e){var t=e.filterKey,n=e.filterValue;n&&n.length>0&&i.push(n.map((function(e){var n=e.value.trim();return"provisioning"===n?t+" = preparing or "+t+" = provisioning":""!==n?t+" "+(!0===e.isExact?"= "+n:"like %"+n+"%"):""})).join(" or "))})),i.join(" or "))).then((function(e){var t=e.data;M(t),A(t.items),void 0!==(null==B?void 0:B.total)&&B.total>X&&$(B.total),j(!0)}))];case 3:return a.sent(),e?[3,5]:[4,n.listKafkas("1","1").then((function(e){ne(e.data.items.length)}))];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return function(e){var t,n,a,i,r;(0,f.G6)(e)&&(i=null===(t=e.response)||void 0===t?void 0:t.data.reason,r=null===(a=null===(n=e.response)||void 0===n?void 0:n.data)||void 0===a?void 0:a.code),r===f.SM.UNAUTHORIZED_USER?de(!0):V(I("something_went_wrong"),l.AlertVariant.danger,i)}(a.sent()),[3,7];case 7:return[2]}var i}))}))};(0,a.useEffect)((function(){j(!1),me(!0)}),[P,w,y,se,N,b]),(0,a.useEffect)((function(){(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n,a;return(0,r.__generator)(this,(function(i){switch(i.label){case 0:return[4,null==P?void 0:P.getToken()];case 1:if(void 0===(e=i.sent())||""===e)return[3,5];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,new u.M2({accessToken:e,basePath:k}).listCloudProviders().then((function(e){var t=e.data;K(t.items)}))];case 3:return i.sent(),[3,5];case 4:return t=i.sent(),n=void 0,(0,f.G6)(t)&&(n=null===(a=t.response)||void 0===a?void 0:a.data.reason),V(I("something_went_wrong"),l.AlertVariant.danger,n),[3,5];case 5:return[2]}}))})),me(!1)}),[]),n=function(){return me(!0)},m=f.md,_=(0,a.useRef)(),(0,a.useEffect)((function(){_.current=n}),[n]),(0,a.useEffect)((function(){if(null!==m){var e=setTimeout((function(){_.current()}),m);return function(){clearInterval(e)}}}),[n,m]);var he=function(){j(!1),me(!1)};return ue?i().createElement(g.nW,{titleProps:{title:I("you_do_not_have_access_to_openshift_streams"),headingLevel:"h2"},emptyStateBodyProps:{body:I("contact_your_organization_administration_for_more_information")}}):i().createElement(i().Fragment,null,i().createElement(c.uZ,null,i().createElement(c.tQ,{value:{isModalOpen:D,setIsModalOpen:H,onCreate:function(){$(B.total+1)},cloudProviders:G,mainToggle:C,refresh:he}},i().createElement(c.oY,{mainToggle:C,isExpanded:null!=Y,activeTab:fe,isLoading:void 0===ge,instanceDetail:ge,onClose:function(){q(null)},"data-ouia-app-id":"controlPlane-streams"},i().createElement(l.PageSection,{variant:l.PageSectionVariants.light},i().createElement(l.Level,null,i().createElement(l.LevelItem,null,i().createElement(l.Title,{headingLevel:"h1",size:"lg"},I("openshift_streams"))))),void 0===x?i().createElement(l.PageSection,{variant:l.PageSectionVariants.light,padding:{default:"noPadding"}},i().createElement(g.yR,null)):te&&te<1?i().createElement(l.PageSection,null,i().createElement(g.C0,{titleProps:{title:I("you_do_not_have_any_kafka_instances_yet"),headingLevel:"h4"},emptyStateBodyProps:{body:I("create_a_kafka_instance_to_get_started")},buttonProps:(t={title:I("create_a_kafka_instance"),onClick:function(){return H(!D)}},t["data-testid"]="emptyStateStreams-buttonCreateKafka",t)}),i().createElement(c.vx,null)):i().createElement(l.PageSection,{className:"mk--main-page__page-section--table",variant:l.PageSectionVariants.light,padding:{default:"noPadding"}},i().createElement(c.fw,{kafkaInstanceItems:x,mainToggle:C,onViewConnection:function(e){q({instanceDetail:e,activeTab:"Connection"})},onViewInstance:function(e){q({instanceDetail:e,activeTab:"Details"})},onConnectToInstance:p,getConnectToInstancePath:E,refresh:he,kafkaDataLoaded:Z,onDelete:function(){j(!1),$(B.total-1)},page:w,perPage:y,total:null==B?void 0:B.total,expectedTotal:X,filteredValue:se,setFilteredValue:le,setFilterSelected:re,filterSelected:ie,orderBy:N,setOrderBy:Q,isDrawerOpen:null!==Y}))))))},p=n(4956),E=n(3727);n(8800);const P=function(e){var t=e.getUsername,n=e.getToken,a=e.onConnectToInstance,r=e.getConnectToInstancePath,o=e.addAlert,s=e.basePath,l={getToken:n,getUsername:t},c={addAlert:o};return i().createElement(E.BrowserRouter,null,i().createElement(v.G.Provider,{value:{basePath:s}},i().createElement(p.wP.Provider,{value:c},i().createElement(d.V.Provider,{value:l},i().createElement(_,{onConnectToInstance:a,getConnectToInstancePath:r})))))}}}]);
//# sourceMappingURL=779.4b76ca62.js.map