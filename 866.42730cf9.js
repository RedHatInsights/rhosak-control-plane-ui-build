(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[866],{86153:(e,t,n)=>{"use strict";n.d(t,{i:()=>b});var a=n(70655),r=n(48121),i=n.n(r),l=n(25399),o=n(42603),s=n(9995),c=n(23141),u=n(68908),d=n(75381),m=n(56777),f=n(84564),p=n(13006),v=n(78261),g=n(99229),_=n(1910),b=function(e){var t,n,b=e.isOpen,h=e.setIsOpen,S=e.fetchServiceAccounts,w=new u.N,E=(0,r.useState)({fieldState:"default"}),y=E[0],C=E[1],x=(0,r.useState)(""),P=x[0],A=x[1],T=(0,r.useState)(""),V=T[0],I=T[1],k=(0,r.useState)(w),O=k[0],F=k[1],B=(0,r.useState)(!0),D=B[0],G=B[1],L=(0,r.useState)(!1),M=L[0],R=L[1],Z=(0,r.useState)(),N=Z[0],K=Z[1],j=(0,r.useState)(!1),q=j[0],z=j[1],H=(0,p.useTranslation)().t,W=(0,r.useContext)(o.V),$=(0,r.useContext)(s.G).basePath,J=(0,g.Z7)().addAlert,Q=function(){A(""),I(""),F(w),G(!0)},U=function(e){var t=!0;void 0!==e&&""!==e.trim()||(t=!0,C({fieldState:"default",message:""})),t?"error"===y.fieldState&&C({fieldState:"default",message:""}):C({fieldState:"error",message:H("create_instance_name_invalid_helper_text")}),G(!0),A(e),F((0,a.__assign)((0,a.__assign)({},O),{name:e||""}))},X=function(e){I(e),F((0,a.__assign)((0,a.__assign)({},O),{description:e}))},Y=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return e=function(){var e=!0,t=O.name;return t&&""!==t.trim()||(e=!1,C({fieldState:"error",message:H("common.this_is_a_required_field")})),e}(),[4,null==W?void 0:W.getToken()];case 1:return t=a.sent(),e?[3,2]:(G(!1),[3,7]);case 2:if(!(0,d.wu)(t))return[3,6];a.label=3;case 3:return a.trys.push([3,5,,6]),n=new c.M2({accessToken:t,basePath:$}),R(!0),[4,n.createServiceAccount(O).then((function(e){K(null==e?void 0:e.data),h(!1),z(!0),Q(),J(H("serviceAccount.service_account_creation_success_message"),l.AlertVariant.success),S()}))];case 4:return a.sent(),[3,6];case 5:return function(e){var t,n;(0,v.G)(e)&&(n=null===(t=e.response)||void 0===t?void 0:t.data.reason),J(H("something_went_wrong"),l.AlertVariant.danger,n)}(a.sent()),[3,6];case 6:R(!1),a.label=7;case 7:return[2]}}))}))},ee=function(e){e.preventDefault(),Y()};return i().createElement(i().Fragment,null,i().createElement(m.a,{isModalOpen:b,title:H("serviceAccount.create_a_service_account"),handleModalToggle:function(){Q(),h(!b)},onCreate:Y,isFormValid:D,primaryButtonTitle:"Create",isCreationInProgress:M},(t=y.message,n=y.fieldState,i().createElement(l.Form,{onSubmit:ee},!D&&i().createElement(l.FormAlert,null,i().createElement(l.Alert,{variant:"danger",title:H("common.create_instance_invalid_alert"),"aria-live":"polite",isInline:!0})),i().createElement(l.FormGroup,{label:"Name",isRequired:!0,fieldId:"text-input-name",helperTextInvalid:t,helperTextInvalidIcon:t&&i().createElement(f.ZP,null),validated:n},i().createElement(l.TextInput,{isRequired:!0,type:"text",id:"text-input-name",name:"text-input-name",value:P,onChange:U,validated:n})),i().createElement(l.FormGroup,{label:"Description",fieldId:"text-input-description"},i().createElement(l.TextInput,{isRequired:!0,type:"text",id:"text-input-description",name:"text-input-description","aria-label":"Input description",value:V,onChange:X}))))),i().createElement(_.L,{isOpen:q,setIsOpen:z,credential:N,setCredential:K}))}},89403:(e,t,n)=>{"use strict";n.d(t,{N:()=>p});var a=n(70655),r=n(48121),i=n.n(r),l=n(25399),o=n(42603),s=n(9995),c=n(23141),u=n(75381),d=n(7562),m=n(99229),f=n(13006),p=function(e){var t=e.isOpen,n=e.setIsOpen,p=e.fetchServiceAccounts,v=e.serviceAccountToDelete,g=(0,f.useTranslation)().t,_=(0,r.useContext)(o.V),b=(0,r.useContext)(s.G).basePath,h=(0,m.Z7)().addAlert,S=function(){n(!t)};return i().createElement(d.A,{isModalOpen:t,handleModalToggle:S,title:g("serviceAccount.delete_service_account")+"?",confirmButtonProps:{onClick:function(){return e=v,(0,a.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,i,o,s;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(void 0===(t=null==e?void 0:e.id))throw new Error("service account id not defined");return[4,null==_?void 0:_.getToken()];case 1:if(n=a.sent(),!(0,u.wu)(n))return[3,5];r=new c.M2({accessToken:n,basePath:b}),S(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,r.deleteServiceAccount(t).then((function(e){e.status>=200&&p()}))];case 3:return a.sent(),[3,5];case 4:return i=a.sent(),o=void 0,(0,u.G6)(i)&&(o=null===(s=i.response)||void 0===s?void 0:s.data.reason),h(g("common.something_went_wrong"),l.AlertVariant.danger,o),[3,5];case 5:return[2]}}))}));var e},label:"Delete"}},i().createElement("p",null,i().createElement("b",null,null==v?void 0:v.name)," ",g("serviceAccount.will_be_deleted")))}},65746:(e,t,n)=>{"use strict";n.d(t,{O:()=>f});var a=n(70655),r=n(48121),i=n.n(r),l=n(25399),o=n(42603),s=n(9995),c=n(23141),u=n(75381),d=n(13006),m=n(99229),f=function(e){var t=e.isOpen,n=e.setIsOpen,f=e.serviceAccountToReset,p=(0,d.useTranslation)().t,v=(0,r.useContext)(o.V),g=(0,r.useContext)(s.G).basePath,_=(0,m.Z7)().addAlert,b=i().useState(!1),h=b[0],S=b[1],w=function(e){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var t,r,i;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=null==e?void 0:e.id,[4,null==v?void 0:v.getToken()];case 1:if(r=a.sent(),!(0,u.wu)(r))return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),i=new c.M2({accessToken:r,basePath:g}),S(!0),[4,i.resetServiceAccountCreds(t).then((function(e){n(!1),S(!1)}))];case 3:return a.sent(),[3,5];case 4:return function(e){var t,n;(0,u.G6)(e)&&(n=null===(t=e.response)||void 0===t?void 0:t.data.reason),_(p("something_went_wrong"),l.AlertVariant.danger,n)}(a.sent()),S(!1),[3,5];case 5:return[2]}}))}))},E=function(){n(!t)},y=null==f?void 0:f.name;return i().createElement(l.Modal,{id:"reset-service-account-modal",variant:l.ModalVariant.medium,title:p("serviceAccount.reset_service_account_credentials"),isOpen:t,onClose:E,actions:[i().createElement(l.Button,{key:"create",variant:"primary",type:"submit",onClick:function(){return w(f)},spinnerAriaValueText:p("common.submitting_request"),isLoading:h},p("serviceAccount.reset")),i().createElement(l.Button,{key:"cancel",variant:"link",onClick:E},p("common.cancel"))]},i().createElement("span",{dangerouslySetInnerHTML:{__html:p("serviceAccount.client_secret_will_be_reset",{serviceAccountId:y})}}))}},26992:(e,t,n)=>{"use strict";n.d(t,{s:()=>p});var a=n(70655),r=n(48121),i=n.n(r),l=n(13006),o=n(70726),s=n(25399),c=n(48784),u=n(75381),d=n(8755),m=n(71070),f=function(e){var t=e.filterSelected,n=e.setFilterSelected,a=e.total,o=e.page,u=e.perPage,f=e.filteredValue,p=e.setFilteredValue,v=e.handleCreateModal,g=(0,l.useTranslation)().t,_=(0,r.useRef)(),b=(0,r.useRef)(),h=(0,r.useState)(!1),S=h[0],w=h[1],E=(0,r.useState)(!0),y=E[0],C=E[1],x=(0,r.useState)(!0),P=x[0],A=x[1],T=(0,r.useState)(!1),V=T[0],I=(T[1],(0,r.useState)()),k=I[0],O=I[1],F=(0,r.useState)(),B=F[0],D=F[1],G=(0,r.useState)(!1),L=(G[0],G[1],[{label:g("name"),value:"name",disabled:!1},{label:g("owner"),value:"owner",disabled:!1}]),M=function(e){return!e||/^([a-zA-Z0-9-_%]*[a-zA-Z0-9-_%])?$/.test(e.trim())},R=function(e,t,n){var a=Object.assign([],f),r=a.findIndex((function(t){return t.filterKey===e}));if(r>-1){var i=a[r];if(i.filterValue&&i.filterValue.length>0){var l=i.filterValue.findIndex((function(e){return e.value===t.value}));if(l>-1){if(!n)return;i.filterValue.splice(l,1)}else a[r].filterValue.push(t)}else a[r].filterValue=[t]}else a.push({filterKey:e,filterValue:[t]});p(a)},Z=function(e){"name"===e&&k&&""!=k.trim()?M(k)?(R("name",{value:k,isExact:!1},!1),O("")):C(!1):"owner"===e&&B&&""!=B.trim()&&(M(B)?(R("owner",{value:B,isExact:!1},!1),D("")):A(!1))},N=function(e){var t;if("Enter"===e.key&&!V){var n=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.name;Z(n)}},K=function(e){return V?i().createElement("div",null,g("max_filter_message")):i().createElement("div",null,g("input_field_invalid_message",{name:e}))},j=function(e){var t=f.filter((function(t){return t.filterKey===e}));return t.length>0?t[0].filterValue.map((function(e){return e.value})):[]},q=function(e,t,n){var a,r,i=Object.assign([],f),l=i.findIndex((function(t){return t.filterKey===e})),o=Object.assign([],null===(a=i[l])||void 0===a?void 0:a.filterValue),s=t.toString();n&&(null==n?void 0:n.length)>0&&(s=null===(r=null==n?void 0:n.find((function(e){return e.label===t.toString()})))||void 0===r?void 0:r.value);var c=o.findIndex((function(e){return e.value===s}));c>=0&&(i[l].filterValue.splice(c,1),p(i))},z=function(e){var t=Object.assign([],f),n=t.findIndex((function(t){return t.filterKey===e}));n>=0&&(t.splice(n,1),p(t))},H=i().createElement(i().Fragment,null,i().createElement(s.ToolbarGroup,{variant:"filter-group"},i().createElement(s.ToolbarItem,null,i().createElement(s.Select,{variant:s.SelectVariant.single,"aria-label":"Select filter",onToggle:function(){w(!S)},selections:t,isOpen:S,onSelect:function(e,t){w(!S),n(null==t?void 0:t.toString())}},L.map((function(e,t){return i().createElement(s.SelectOption,{isDisabled:e.disabled,key:t,value:e.value},e.label)})))),i().createElement(s.ToolbarFilter,{chips:j("name"),deleteChip:function(e,t){return q("name",t)},deleteChipGroup:function(){return z("name")},categoryName:g("name")},"name"===(null==t?void 0:t.toLowerCase())&&i().createElement(s.ToolbarItem,null,i().createElement(s.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},i().createElement(s.TextInput,{name:"name",id:"name-input",type:"search","aria-label":g("filter_by_name_lower"),validated:!y||V?s.ValidatedOptions.error:s.ValidatedOptions.default,placeholder:g("filter_by_name_lower"),onChange:function(e){O(e),!y&&C(!0)},onKeyPress:N,value:k,ref:_}),i().createElement(s.Button,{variant:s.ButtonVariant.control,isDisabled:!y||V,onClick:function(){return Z("name")},"aria-label":g("filter_by_name_lower")},i().createElement(m.ZP,null)),(!y||V)&&i().createElement(s.Tooltip,{isVisible:V||!y,content:K("name"),reference:_})))),i().createElement(s.ToolbarFilter,{chips:j("owner"),deleteChip:function(e,t){return q("owner",t)},deleteChipGroup:function(){return z("owner")},categoryName:g("owner")},"owner"===(null==t?void 0:t.toLowerCase())&&i().createElement(s.ToolbarItem,null,i().createElement(s.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},i().createElement(s.TextInput,{name:"owner",id:"owner-input",type:"search","aria-label":g("filter_by_owner"),placeholder:g("filter_by_owner"),validated:!P||V?s.ValidatedOptions.error:s.ValidatedOptions.default,onChange:function(e){D(e),!P&&A(!0)},onKeyPress:N,value:B,ref:b}),i().createElement(s.Button,{isDisabled:!P||V,variant:s.ButtonVariant.control,onClick:function(){return Z("owner")},"aria-label":g("filter_by_owner")},i().createElement(m.ZP,null)),(!P||V)&&i().createElement(s.Tooltip,{isVisible:V||!P,content:K("owner"),reference:b})))))),W=[{item:i().createElement(s.Button,{variant:"primary",onClick:v,"data-testid":"tableServiceAccounts-buttonCreateServiceAccount"},g("serviceAccount.create_service_account"))}];return a&&a>0&&1===W.length&&W.push({item:i().createElement(c.wu,{widgetId:"pagination-options-menu-top",itemCount:a,page:o,perPage:u,isCompact:!0,titles:{paginationTitle:g("minimal_pagination"),perPageSuffix:g("per_page_suffix"),toFirstPage:g("to_first_page"),toPreviousPage:g("to_previous_page"),toLastPage:g("to_last_page"),toNextPage:g("to_next_page"),optionsToggle:g("options_toggle"),currPage:g("curr_page")}}),variant:"pagination",alignment:{default:"alignRight"}}),i().createElement(c.L5,{toolbarProps:{id:"instance-toolbar",clearAllFilters:function(){p([])},collapseListedFiltersBreakpoint:"md",inset:{lg:"insetLg"}},toggleGroupProps:{toggleIcon:i().createElement(d.ZP,null),breakpoint:"md"},toggleGroupItems:H,toolbarItems:W})},p=function(e){var t=e.page,n=e.perPage,d=e.expectedTotal,p=e.total,v=e.serviceAccountsDataLoaded,g=e.serviceAccountItems,_=e.onResetCredentials,b=e.onDeleteServiceAccount,h=e.orderBy,S=e.setOrderBy,w=e.filteredValue,E=e.setFilteredValue,y=e.filterSelected,C=e.setFilterSelected,x=e.handleCreateModal,P=(0,l.useTranslation)().t,A=(0,r.useState)(void 0),T=(A[0],A[1],[{title:P("common.name"),transforms:[o.sortable]},{title:P("common.owner"),transforms:[o.sortable,(0,o.cellWidth)(20)]},{title:P("common.description")}]),V=function(e,t,n){var a,r,i,l;"reset-credentials"===n?_&&_(t):"delete-account"===n&&b&&b(t),null===(l=null===(i=null===(r=null===(a=null==e?void 0:e.target)||void 0===a?void 0:a.parentElement)||void 0===r?void 0:r.parentElement)||void 0===i?void 0:i.previousSibling)||void 0===l||l.focus()},I=function(e){switch(e.toLowerCase()){case"name":return 0;case"owner":return 1;case"description":return 2;default:return}};return i().createElement(i().Fragment,null,i().createElement(f,{filterSelected:y,setFilterSelected:C,total:p,page:t,perPage:n,filteredValue:w,setFilteredValue:E,handleCreateModal:x}),i().createElement(c.wR,{tableProps:{cells:T,rows:function(){var e=[],a=(0,u.o8)(t,n,d);if(!v){for(var r=[],l=0;l<T.length;l++)r.push({title:i().createElement(s.Skeleton,null)});for(l=0;l<a;l++)e.push({cells:r});return e}return null==g||g.forEach((function(t){var n=t.name,a=(t.owner,t.description);e.push({cells:[n,"owner-test",a],originalData:t})})),e}(),"aria-label":P("serviceAccount.service_account_list"),actionResolver:function(e,t){return function(e,t){var n,r;if(!v)return[];var i,l=e.originalData;return[(n={title:P("common.reset_credentials"),id:"reset-credentials"},n["data-testid"]="tableServiceAccounts-actionResetCredentials",n.onClick=function(e){return V(e,l,"reset-credentials")},n),(0,a.__assign)((r={title:P("serviceAccount.delete_service_account"),id:"delete-account"},r["data-testid"]="tableServiceAccounts-actionDeleteAccount",r.onClick=function(e){return V(e,l,"delete-account")},r),i)]}(e)},onSort:function(e,t,n,a){S&&S(function(e){switch(e){case 0:return"name";case 1:return"owner";case 2:return"description";default:return""}}(t)+" "+n)},sortBy:function(){var e=(null==h?void 0:h.split(" "))||[];if(e.length>1)return{index:I(e[0]),direction:e[1]===o.SortByDirection.asc?o.SortByDirection.asc:o.SortByDirection.desc}}()}}),g&&(null==g?void 0:g.length)<1&&v&&i().createElement(c.C0,{emptyStateProps:{variant:s.EmptyStateVariant.full},emptyStateIconProps:{icon:m.ZP},titleProps:{title:P("no_results_found"),headingLevel:"h2",size:s.TitleSizes.lg},emptyStateBodyProps:{body:P("adjust_your_filters_and_try_again")}}),p&&p>0&&i().createElement(c.wu,{widgetId:"pagination-options-menu-bottom",itemCount:p,variant:s.PaginationVariant.bottom,page:t,perPage:n,titles:{paginationTitle:P("full_pagination"),perPageSuffix:P("per_page_suffix"),toFirstPage:P("to_first_page"),toPreviousPage:P("to_previous_page"),toLastPage:P("to_last_page"),toNextPage:P("to_next_page"),optionsToggle:P("options_toggle"),currPage:P("curr_page")}}))}}}]);
//# sourceMappingURL=866.42730cf9.js.map