(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[932],{95932:(e,t,n)=>{"use strict";n.d(t,{L:()=>Q});var a=n(70655),r=n(48121),l=n.n(r),i=n(5977),o=n(13006),s=n(25399),c=n(68908),u=n(73171),d=n(84564),m=n(99229),p=n(42603),f=n(23141),_=n(9995),v=n(78261),g=n(52648),E=function(){return l().createElement(s.DrawerPanelContent,null,l().createElement(s.DrawerHead,null,l().createElement(s.TextContent,null,l().createElement(s.Text,{component:s.TextVariants.h2},"Cluster information"),l().createElement(s.TextList,{component:s.TextListVariants.dl},l().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},"Ingress/Egress"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},"up to 4 MBps"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},"Storage"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},"up to 100 GB"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},"Partitions"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},"up to 100"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},"Client connections"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},"up to 500"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},"Message size"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},"up to 1 MB"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},"Availability"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},"Multizone highly available")),l().createElement(s.Text,{component:s.TextVariants.h2},"Cost information"),l().createElement(s.TextList,{component:s.TextListVariants.dl},l().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},"Base Cluster"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},"$1.50/hr"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},"Ingress/Egress"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},"$0.02/MB"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},"Storage"),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},"$0.0002/GB/hr")))))},b=n(75381),h=n(56777),T=(0,r.createContext)({isModalOpen:!1,setIsModalOpen:function(){},onCreate:function(){},mainToggle:!1,refresh:function(){},cloudProviders:[]}),x=T.Provider,S=function(){return(0,r.useContext)(T)},I={kind:"Empty provider",id:"please_select",display_name:"Please Select",enabled:!0},C=function(){var e=(0,o.useTranslation)().t,t=S(),n=t.isModalOpen,i=t.setIsModalOpen,T=t.onCreate,x=t.cloudProviders,C=t.refresh,y=t.mainToggle,w=(0,r.useContext)(p.V),k=(0,r.useContext)(_.G).basePath,P=(0,m.Z7)().addAlert,V=new c.t;V.name="",V.cloud_provider="",V.region="",V.multi_az=!0;var L=(0,r.useState)(V),N=L[0],F=L[1],O=(0,r.useState)({fieldState:"default"}),D=O[0],B=O[1],R=(0,r.useState)({fieldState:"default"}),A=R[0],G=R[1],M=(0,r.useState)([]),K=M[0],z=M[1],Z=(0,r.useState)(!0),q=Z[0],H=Z[1],j=(0,r.useState)(!1),U=j[0],J=j[1],Y=function(){F((0,a.__assign)((0,a.__assign)({},N),{name:"",multi_az:!0})),H(!0),B({fieldState:"default"}),J(!1)},$=function(t){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var n,r,l,i,o;return(0,a.__generator)(this,(function(c){switch(c.label){case 0:return[4,null==w?void 0:w.getToken()];case 1:if(n=c.sent(),r=t.id,void 0===n||""===n||!r)return[3,5];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,new f.M2({accessToken:n,basePath:k}).listCloudProviderRegions(r).then((function(e){var n=e.data,r=[I].concat(n.items);z(null!=n.items?r:[]);var l=n.items.filter((function(e){return e.enabled}));if(1===l.length&&l[0].id&&t.name){var i=l[0].id;F((function(e){return(0,a.__assign)((0,a.__assign)({},e),{region:i})}))}}))];case 3:return c.sent(),[3,5];case 4:return l=c.sent(),i=void 0,(0,v.G)(l)&&(i=null===(o=l.response)||void 0===o?void 0:o.data.reason),P(e("common.something_went_wrong"),s.AlertVariant.danger,i),[3,5];case 5:return[2]}}))}))};(0,r.useEffect)((function(){var e=x.filter((function(e){return e.enabled}));e.length>0&&e[0].name&&(F((0,a.__assign)((0,a.__assign)({},N),{cloud_provider:e[0].name})),$(e[0]))}),[x]);var W=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,l,o,c,u,d;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=function(){var t=!0,n=N.name,a=N.region;return n&&""!==n.trim()?/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(n.trim())||(t=!1,B({fieldState:"error",message:e("create_instance_name_invalid_helper_text")})):(t=!1,B({fieldState:"error",message:e("common.this_is_a_required_field")})),n.length>g.JB&&(t=!1,B({fieldState:"error",message:e("length_is_greater_than_expected",{maxLength:g.JB})})),a&&""!==a.trim()||(t=!1,G({fieldState:"error",message:e("common.this_is_a_required_field")})),t}(),[4,null==w?void 0:w.getToken()];case 1:return n=a.sent(),t?[3,2]:(H(!1),[3,7]);case 2:if(!(0,b.wu)(n))return[3,7];a.label=3;case 3:return a.trys.push([3,5,,6]),r=new f.M2({accessToken:n,basePath:k}),T(),J(!0),[4,r.createKafka(!0,N).then((function(e){Y(),i(!1),C()}))];case 4:return a.sent(),[3,6];case 5:return l=a.sent(),o=void 0,c=!0,(0,v.G)(l)&&((null===(u=l.response)||void 0===u?void 0:u.data.code)===b.SM.DUPLICATE_INSTANCE_NAME?(H(!1),c=!1,B({fieldState:"error",message:e("the_name_already_exists_please_enter_a_unique_name",{name:N.name})})):o=null===(d=l.response)||void 0===d?void 0:d.data.reason),c&&P(e("common.something_went_wrong"),s.AlertVariant.danger,o,"toastCreateKafka-failed"),[3,6];case 6:J(!1),a.label=7;case 7:return[2]}}))}))},X=function(t){var n=!0;void 0===t||""===t.trim()?n=!0:t&&!/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(t.trim())&&(n=!1),F((0,a.__assign)((0,a.__assign)({},N),{name:t||""})),t&&t.length>g.JB?B({fieldState:"error",message:e("length_is_greater_than_expected",{maxLength:g.JB})}):n?("error"===D.fieldState&&"error"!==A.fieldState&&H(!0),"error"===D.fieldState&&B({fieldState:"default",message:""})):B({fieldState:"error",message:e("create_instance_name_invalid_helper_text")})},Q=function(e){var t=e;"please_select"===e&&(t=""),"error"===A.fieldState&&"error"!==D.fieldState&&H(!0),"error"===A.fieldState&&G({fieldState:"default",message:""}),F((0,a.__assign)((0,a.__assign)({},N),{region:t}))},ee=function(e){switch(null==e?void 0:e.toLowerCase()){case"aws":return l().createElement(u.ZP,{size:"lg",color:"black",className:"mk--create-instance__tile--icon"});default:return}},te=function(e,t){if(e){var n=t.currentTarget.id;F((0,a.__assign)((0,a.__assign)({},N),{multi_az:"multi"===n}))}},ne=function(e){e.preventDefault(),W()},ae=function(){var t=D.message,n=D.fieldState,r=N.name,i=N.cloud_provider,o=N.multi_az,c=N.region,u=o;return l().createElement(s.Form,{onSubmit:ne},!q&&l().createElement(s.FormAlert,null,l().createElement(s.Alert,{variant:"danger",title:e("common.create_instance_invalid_alert"),"aria-live":"polite",isInline:!0})),l().createElement(s.FormGroup,{label:e("instance_name"),helperText:e("create_instance_name_helper_text"),helperTextInvalid:t,helperTextInvalidIcon:""!=t&&l().createElement(d.ZP,null),isRequired:!0,validated:n,fieldId:"form-instance-name"},l().createElement(s.TextInput,{isRequired:!0,validated:n,type:"text",id:"form-instance-name",name:"instance-name",value:r,onChange:X,autoFocus:!0})),l().createElement(s.FormGroup,{label:e("cloud_provider"),fieldId:"form-cloud-provider-name"},x.map((function(e){return e.enabled&&l().createElement(s.Tile,{key:"tile-"+e.name,title:(null==e?void 0:e.display_name)||"",icon:ee(null==e?void 0:e.name),isSelected:i===e.name,onClick:function(){return(t=e).name&&F((0,a.__assign)((0,a.__assign)({},N),{cloud_provider:t.name})),void $(t);var t}})}))),l().createElement(s.FormGroup,{label:e("cloud_region"),helperTextInvalid:A.message,helperTextInvalidIcon:l().createElement(d.ZP,null),validated:A.fieldState,fieldId:"form-cloud-region-option"},l().createElement(s.FormSelect,{validated:A.fieldState,value:c,onChange:Q,id:"cloud-region-select",name:"cloud-region","aria-label":e("cloud_region")},K.map((function(t,n){return t.enabled&&l().createElement(s.FormSelectOption,{key:n,value:t.id,label:t.id?e(t.id):t.display_name||""})})))),l().createElement(s.FormGroup,{label:e("availabilty_zones"),fieldId:"availability-zones"},l().createElement(s.ToggleGroup,{"aria-label":e("availability_zone_selection")},l().createElement(s.ToggleGroupItem,{text:e("single"),value:"single",isDisabled:!0,buttonId:"single",isSelected:u,onChange:te}),l().createElement(s.ToggleGroupItem,{text:e("multi"),value:"multi",buttonId:"multi",isSelected:u,onChange:te}))))};return l().createElement(h.a,{isModalOpen:n,title:e("create_a_kafka_instance"),handleModalToggle:function(){Y(),i(!n)},onCreate:W,isFormValid:q,primaryButtonTitle:e("create_instance"),isCreationInProgress:U,dataTestIdSubmit:"modalCreateKafka-buttonSubmit",dataTestIdCancel:"modalCreateKafka-buttonCancel"},!0===y?l().createElement(s.Drawer,{isStatic:!0,className:"mk--create-instance-modal__drawer--content"},l().createElement(s.DrawerContent,{panelContent:l().createElement(E,null)},l().createElement(s.DrawerContentBody,null,ae()))):ae())},y=n(73727),w=n(70726),k=n(48784),P=n(35451),V=n(41942),L=function(e){var t,n=e.status,a=e.instanceName,r=(0,o.useTranslation)().t,i=function(){switch(null==n?void 0:n.toLowerCase()){case g.hm[0].value:return l().createElement(P.ZP,{className:"mk--instances__table--icon--completed"});case g.hm[1].value:return l().createElement(d.ZP,{className:"mk--instances__table--icon--failed"});case g.hm[2].value:return l().createElement(V.ZP,null);case g.hm[3].value:case g.hm[4].value:return l().createElement(s.Spinner,{size:"md","aria-label":a,"aria-valuetext":"Creation in progress"});case g.hm[5].value:return;default:return l().createElement(V.ZP,null)}}();return l().createElement(s.Flex,null,i&&l().createElement(s.FlexItem,{spacer:{default:"spacerSm"}},i),l().createElement(s.FlexItem,null,1===(t=g.hm.filter((function(e){return e.value===(null==n?void 0:n.toLowerCase())}))).length?r(t[0].value):r("creation_pending")))},N=function(e){var t=e.isModalOpen,n=e.title,i=e.confirmButtonProps,c=e.cancelButtonProps,u=e.handleModalToggle,d=e.textProps,m=e.instanceStatus,p=e.selectedItemData,f=(0,o.useTranslation)().t,_=null==p?void 0:p.name,v=(0,r.useState)(),g=v[0],E=v[1],h=function(){return m===b.Od.READY&&(null==g?void 0:g.toLowerCase())!==(null==_?void 0:_.toLowerCase())};return l().createElement(k.AX,{isModalOpen:t,title:n,confirmButtonProps:(0,a.__assign)({isDisabled:h(),"data-testid":"modalDeleteKafka-buttonDelete"},i),cancelButtonProps:c,handleModalToggle:u,textProps:d},m===b.Od.READY&&l().createElement(l().Fragment,null,l().createElement("label",{htmlFor:"instance-name-input",dangerouslySetInnerHTML:{__html:f("instance_name_label",{name:_})}}),l().createElement(s.TextInput,{id:"mk--instance-name__input",name:"instance-name-input",type:"text",value:g,onChange:function(e){E(e)},onKeyPress:function(e){"Enter"!==e.key||h()||(null==i?void 0:i.onClick)&&i.onClick(p)},autoFocus:!0})))},F=n(71070),O=n(8755),D=function(e){var t,n,a,i=e.setFilterSelected,c=e.filterSelected,u=void 0===c?"name":c,d=e.total,m=e.page,p=e.perPage,f=e.filteredValue,_=e.setFilteredValue,v=S(),g=v.isModalOpen,E=v.setIsModalOpen,h=(0,o.useTranslation)().t,T=(0,r.useState)(!1),x=T[0],I=T[1],C=(0,r.useState)(!1),y=C[0],w=C[1],P=(0,r.useState)(!1),V=P[0],L=P[1],N=(0,r.useState)(!1),D=N[0],B=N[1],R=(0,r.useState)(),A=R[0],G=R[1],M=(0,r.useState)(),K=M[0],z=M[1],Z=(0,r.useState)(!0),q=Z[0],H=Z[1],j=(0,r.useState)(!0),U=j[0],J=j[1],Y=(0,r.useState)(!1),$=Y[0],W=Y[1],X=(0,r.useRef)(),Q=(0,r.useRef)(),ee=[{label:h("name"),value:"name",disabled:!1},{label:h("cloud_provider"),value:"cloud_provider",disabled:!1},{label:h("region"),value:"region",disabled:!1},{label:h("owner"),value:"owner",disabled:!1},{label:h("status"),value:"status",disabled:!1}];(0,r.useEffect)((function(){me()}),[f]);var te=b.bv.map((function(e){return{label:h(e.value),value:e.value,disabled:!1}})),ne=b.Bh.map((function(e){return{label:h(e.value),value:e.value,disabled:!1}})),ae=b.hm.filter((function(e){return"preparing"!==e.value})).map((function(e){return{label:h(e.value),value:e.value,disabled:!1}})),re=function(e,t,n){var a=Object.assign([],f),r=a.findIndex((function(t){return t.filterKey===e}));if(r>-1){var l=a[r];if(l.filterValue&&l.filterValue.length>0){var i=l.filterValue.findIndex((function(e){return e.value===t.value}));if(i>-1){if(!n)return;l.filterValue.splice(i,1)}else a[r].filterValue.push(t)}else a[r].filterValue=[t]}else a.push({filterKey:e,filterValue:[t]});_(a)},le=function(e){return!e||/^([a-zA-Z0-9-_%]*[a-zA-Z0-9-_%])?$/.test(e.trim())},ie=function(e){"name"===e&&A&&""!=A.trim()?le(A)?(re("name",{value:A,isExact:!1},!1),G("")):H(!1):"owner"===e&&K&&""!=K.trim()&&(le(K)?(re("owner",{value:K,isExact:!1},!1),z("")):J(!1))},oe=function(e){var t=Object.assign([],f),n=t.findIndex((function(t){return t.filterKey===e}));n>=0&&t.splice(n,1),_(t),"name"===e&&G(""),"owner"===e&&z(""),"cloud_provider"===e&&B(!1),"region"===e&&L(!1),"status"===e&&B(!1)},se=function(e){var t;if("Enter"===e.key&&!$){var n=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.name;ie(n)}},ce=function(e){var t=f.filter((function(t){return t.filterKey===e}));return t.length>0?t[0].filterValue.map((function(e){return e.value})):[]},ue=function(e,t,n){var a,r,l=Object.assign([],f),i=l.findIndex((function(t){return t.filterKey===e})),o=Object.assign([],null===(a=l[i])||void 0===a?void 0:a.filterValue),s=t.toString();n&&(null==n?void 0:n.length)>0&&(s=null===(r=null==n?void 0:n.find((function(e){return e.label===t.toString()})))||void 0===r?void 0:r.value);var c=o.findIndex((function(e){return e.value===s}));c>=0&&(l[i].filterValue.splice(c,1),_(l))},de=function(e){var t=Object.assign([],f),n=t.findIndex((function(t){return t.filterKey===e}));n>=0&&(t.splice(n,1),_(t))},me=function(){var e=0;null==f||f.forEach((function(t){var n=t.filterValue,a="status"===t.filterKey&&(null==n?void 0:n.filter((function(e){return"provisioning"===e.value})));(null==a?void 0:a.length)>0?e+=(null==n?void 0:n.length)+1:e+=null==n?void 0:n.length})),e>=b.pf?W(!0):W(!1)},pe=function(e,t){var n,a=null==f?void 0:f.filter((function(t){return t.filterKey===e}));if(a&&(null==a?void 0:a.length)>0){var r=a[0].filterValue;n=null==r?void 0:r.find((function(e){return e.value===t}))}return!n},fe=function(e){return $?l().createElement("div",null,h("max_filter_message")):l().createElement("div",null,h("input_field_invalid_message",{name:e}))},_e=l().createElement(l().Fragment,null,l().createElement(s.ToolbarGroup,{variant:"filter-group"},l().createElement(s.ToolbarItem,null,l().createElement(s.Select,{variant:s.SelectVariant.single,"aria-label":"Select filter",onToggle:function(){I(!x)},selections:u,isOpen:x,onSelect:function(e,t){I(!x),i(null==t?void 0:t.toString())}},ee.map((function(e,t){return l().createElement(s.SelectOption,{isDisabled:e.disabled,key:t,value:e.value},e.label)})))),l().createElement(s.ToolbarFilter,{chips:ce("name"),deleteChip:function(e,t){return ue("name",t)},deleteChipGroup:function(){return de("name")},categoryName:h("name")},"name"===(null==u?void 0:u.toLowerCase())&&l().createElement(s.ToolbarItem,null,l().createElement(s.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},l().createElement(s.TextInput,{name:"name",id:"filterText",type:"search","aria-label":"Search filter input",validated:!q||$?s.ValidatedOptions.error:s.ValidatedOptions.default,placeholder:h("filter_by_name_lower"),onChange:function(e){G(e),!q&&H(!0)},onKeyPress:se,value:A,ref:X}),l().createElement(s.Button,{variant:s.ButtonVariant.control,isDisabled:!q||$,onClick:function(){return ie("name")},"aria-label":"Search instances"},l().createElement(F.ZP,null)),(!q||$)&&l().createElement(s.Tooltip,{isVisible:$||!q,content:fe("name"),reference:X})))),l().createElement(s.ToolbarFilter,{chips:null===(t=ce("cloud_provider"))||void 0===t?void 0:t.map((function(e){return h(e)})),deleteChip:function(e,t){return ue("cloud_provider",t,te)},deleteChipGroup:function(){return de("cloud_provider")},categoryName:h("cloud_provider")},"cloud_provider"===u&&l().createElement(s.ToolbarItem,null,l().createElement(s.Select,{id:"cloud-provider-select",variant:s.SelectVariant.checkbox,"aria-label":"Select cloud provider",onToggle:function(){w(!y)},selections:ce("cloud_provider"),isOpen:y,onSelect:function(e,t,n){n&&oe("cloud_provider"),re("cloud_provider",{value:t.toString(),isExact:!0},!0),b.bv.length<2&&w(!1)},placeholderText:h("filter_by_cloud_provider")},te.map((function(e,t){return l().createElement(s.SelectOption,{isDisabled:e.disabled||$&&pe("cloud_provider",e.value),key:t,value:e.value},$&&l().createElement(s.Tooltip,{isVisible:$,content:fe(),reference:function(){return document.getElementById("cloud-provider-select")}}),e.label)}))))),l().createElement(s.ToolbarFilter,{chips:null===(n=ce("region"))||void 0===n?void 0:n.map((function(e){return h(e)})),deleteChip:function(e,t){return ue("region",t,ne)},deleteChipGroup:function(){return de("region")},categoryName:h("region")},"region"===u&&l().createElement(s.ToolbarItem,null,l().createElement(s.Select,{id:"region-select",variant:s.SelectVariant.checkbox,"aria-label":"Select region",onToggle:function(){L(!V)},selections:ce("region"),isOpen:V,onSelect:function(e,t,n){n&&oe("region"),re("region",{value:t.toString(),isExact:!0},!0),ne.length<2&&L(!1)},placeholderText:h("filter_by_region")},ne.map((function(e,t){return l().createElement(s.SelectOption,{isDisabled:e.disabled||$&&pe("region",e.value),key:t,value:e.value},$&&l().createElement(s.Tooltip,{isVisible:$,content:fe(),reference:function(){return document.getElementById("region-select")}}),e.label)}))))),l().createElement(s.ToolbarFilter,{chips:ce("owner"),deleteChip:function(e,t){return ue("owner",t)},deleteChipGroup:function(){return de("owner")},categoryName:h("owner")},"owner"===u.toLowerCase()&&l().createElement(s.ToolbarItem,null,l().createElement(s.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},l().createElement(s.TextInput,{name:"owner",id:"filterOwners",type:"search","aria-label":"Search filter input",placeholder:h("filter_by_owner"),validated:!U||$?s.ValidatedOptions.error:s.ValidatedOptions.default,onChange:function(e){z(e),!U&&J(!0)},onKeyPress:se,value:K,ref:Q}),l().createElement(s.Button,{isDisabled:!U||$,variant:s.ButtonVariant.control,onClick:function(){return ie("owner")},"aria-label":"Search owners"},l().createElement(F.ZP,null)),(!U||$)&&l().createElement(s.Tooltip,{isVisible:$||!U,content:fe("owner"),reference:Q})))),l().createElement(s.ToolbarFilter,{chips:null===(a=ce("status"))||void 0===a?void 0:a.map((function(e){return h(e)})),deleteChip:function(e,t){return ue("status",t,ae)},deleteChipGroup:function(){return de("status")},categoryName:h("status")},"status"===u&&l().createElement(s.ToolbarItem,null,l().createElement(s.Select,{id:"status-select",variant:s.SelectVariant.checkbox,"aria-label":"Select status",onToggle:function(){B(!D)},selections:ce("status"),isOpen:D,onSelect:function(e,t,n){n&&oe("status"),re("status",{value:t.toString(),isExact:!0},!0)},placeholderText:h("filter_by_status")},ae.map((function(e,t){return l().createElement(s.SelectOption,{isDisabled:e.disabled||$&&pe("status",e.value),key:t,value:e.value},$&&l().createElement(s.Tooltip,{isVisible:$,content:fe(),reference:function(){return document.getElementById("status-select")}}),e.label)}))))))),ve=[{item:l().createElement(s.Button,{variant:"primary",onClick:function(){return E(!g)},"data-testid":"tableStreams-buttonCreateKafka"},h("create_kafka_instance"))}];return d&&d>0&&1===ve.length&&ve.push({item:l().createElement(k.wu,{widgetId:"pagination-options-menu-top",itemCount:d,page:m,perPage:p,isCompact:!0,titles:{paginationTitle:h("minimal_pagination"),perPageSuffix:h("per_page_suffix"),toFirstPage:h("to_first_page"),toPreviousPage:h("to_previous_page"),toLastPage:h("to_last_page"),toNextPage:h("to_next_page"),optionsToggle:h("options_toggle"),currPage:h("curr_page")}}),variant:"pagination",alignment:{default:"alignRight"}}),l().createElement(k.L5,{toolbarProps:{id:"instance-toolbar",clearAllFilters:function(){_([]),W(!1)},collapseListedFiltersBreakpoint:"md",inset:{lg:"insetLg"}},toggleGroupProps:{toggleIcon:l().createElement(O.ZP,null),breakpoint:"md"},toggleGroupItems:_e,toolbarItems:ve})},B=n(70207),R=function(e){var t=e.mainToggle,n=e.kafkaInstanceItems,c=e.onViewInstance,u=e.onViewConnection,d=e.onConnectToInstance,v=e.getConnectToInstancePath,g=e.refresh,E=e.page,h=e.perPage,T=e.total,x=e.kafkaDataLoaded,S=e.onDelete,I=e.expectedTotal,P=e.filteredValue,V=e.setFilteredValue,O=e.setFilterSelected,R=e.filterSelected,A=e.orderBy,G=e.setOrderBy,M=e.isDrawerOpen,K=(0,r.useContext)(p.V),z=(0,r.useContext)(_.G).basePath,Z=(0,o.useTranslation)().t,q=(0,r.useState)(!1),H=q[0],j=q[1],U=(0,r.useState)({}),J=U[0],Y=U[1],$=(0,r.useState)(),W=$[0],X=$[1],Q=(0,r.useState)([]),ee=Q[0],te=Q[1],ne=[{title:Z("name"),transforms:[w.sortable]},{title:Z("cloud_provider"),transforms:[w.sortable]},{title:Z("region"),transforms:[w.sortable]},{title:Z("owner"),transforms:[w.sortable]},{title:Z("status"),transforms:[w.sortable]},{title:Z("time_created"),transforms:[w.sortable]}],ae=(0,r.useState)([]),re=ae[0],le=ae[1],ie=(0,r.useState)(void 0),oe=ie[0],se=ie[1],ce=new URLSearchParams(location.search),ue=(0,i.k6)(),de=(0,m.Z7)().addAlert,me=(0,r.useCallback)((function(e,t){ce.set(e,t.toString())}),[ce]);(0,r.useEffect)((function(){null==K||K.getUsername().then((function(e){return se(e)}))}),[]),(0,r.useEffect)((function(){M||X("")}),[M]);var pe=function(){var e=n.filter((function(e){return e.status===b.Od.DEPROVISION})).filter((function(e){return ee.findIndex((function(t){return t===e.name}))<0})).map((function(e){return e.name||""})),t=(0,a.__spreadArray)((0,a.__spreadArray)([],ee),e);te(t),t.forEach((function(e){n.findIndex((function(t){return t.name===e}))<0&&(!function(e){var t=ee.findIndex((function(t){return t===e}));if(t>-1){var n=Object.assign([],ee);n.splice(t,1),te(n)}}(e),de(Z("kafka_successfully_deleted",{name:e}),s.AlertVariant.success))}))};(0,r.useEffect)((function(){E>1&&0===n.length&&(me("page",(E-1).toString()),me("perPage",h.toString()),ue.push({search:ce.toString()})),pe(),function(){var e=JSON.parse(JSON.stringify(re));if(re&&re.length>0){var t=Object.assign([],n).filter((function(e){return e.status===b.Od.READY||e.status===b.Od.FAILED}));e.forEach((function(e){var n,a,r=t.filter((function(t){return e.id===t.id}));r&&r.length>0&&(r[0].status===b.Od.READY?de(Z("kafka_successfully_created"),s.AlertVariant.success,l().createElement("span",{dangerouslySetInnerHTML:{__html:Z("kafka_success_message",{name:null===(n=r[0])||void 0===n?void 0:n.name})}}),"toastCreateKafka-success"):r[0].status===b.Od.FAILED&&de(Z("kafka_not_created"),s.AlertVariant.danger,l().createElement("span",{dangerouslySetInnerHTML:{__html:Z("kafka_failed_message",{name:null===(a=r[0])||void 0===a?void 0:a.name})}}),"toastCreateKafka-failed"))}))}var a=Object.assign([],null==n?void 0:n.filter((function(e){return e.status===b.Od.PROVISIONING||e.status===b.Od.ACCEPTED})));le(a)}()}),[E,h,n]);var fe=function(e,t,n){var a,r,l,i;"view-instance"===n?(c(t),X(null==t?void 0:t.name)):"connect-instance"===n?(u(t),X(null==t?void 0:t.name)):"delete-instance"===n&&ve(t),null===(i=null===(l=null===(r=null===(a=null==e?void 0:e.target)||void 0===a?void 0:a.parentElement)||void 0===r?void 0:r.parentElement)||void 0===l?void 0:l.previousSibling)||void 0===i||i.focus()},_e=function(e){var n=e.name,a=e.row;return l().createElement(l().Fragment,null,t?l().createElement("a",{href:"http://uxd-mk-data-plane-cmolloy.apps.uxd-os-research.shz4.p1.openshiftapps.com/openshiftstreams"},n):l().createElement(y.Link,{to:function(){return v(a)},onClick:function(e){e.preventDefault(),d(a)},"data-testid":"tableStreams-linkKafka"},n))},ve=function(e){var t=e.status;Y(e),t===b.Od.FAILED?ge(e):j(!H)},ge=function(e){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,l,i,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(void 0===(t=(null==J?void 0:J.id)||(null==e?void 0:e.id)))throw new Error("kafka instance id is not set");return[4,null==K?void 0:K.getToken()];case 1:n=a.sent(),r=new f.M2({accessToken:n,basePath:z}),S(),j(!1),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,r.deleteKafkaById(t,!0).then((function(){X(void 0),g()}))];case 3:return a.sent(),[3,5];case 4:return l=a.sent(),i=void 0,(0,b.G6)(l)&&(i=null===(o=l.response)||void 0===o?void 0:o.data.reason),de(Z("common.something_went_wrong"),s.AlertVariant.danger,i),[3,5];case 5:return[2]}}))}))},Ee=function(e,t,n){var a={title:"",confirmActionLabel:"",description:""};return t===b.Od.READY?(a.title=e("delete_instance")+"?",a.confirmActionLabel=e("delete"),a.description=e("delete_instance_status_complete",{instanceName:n})):t!==b.Od.ACCEPTED&&t!==b.Od.PROVISIONING&&t!==b.Od.PREPARING||(a.title=e("delete_instance")+"?",a.confirmActionLabel=e("delete"),a.description=e("delete_instance_status_accepted_or_provisioning",{instanceName:n})),a}(Z,null==J?void 0:J.status,null==J?void 0:J.name),be=Ee.title,he=Ee.confirmActionLabel,Te=Ee.description,xe=function(e){switch(e.toLowerCase()){case"name":return 0;case"cloud_provider":return 1;case"region":return 2;case"owner":return 3;case"status":return 4;case"created_at":return 5;default:return}},Se=function(){var e=(null==A?void 0:A.split(" "))||[];if(e.length>1)return{index:xe(e[0]),direction:e[1]===w.SortByDirection.asc?w.SortByDirection.asc:w.SortByDirection.desc}};return l().createElement(l().Fragment,null,l().createElement(D,{mainToggle:t,filterSelected:R,setFilterSelected:O,total:T,page:E,perPage:h,filteredValue:P,setFilteredValue:V}),l().createElement(k.wR,{tableProps:{cells:ne,rows:function(){var e=[],t=(0,b.o8)(E,h,I);if(!x){for(var a=[],r=0;r<ne.length;r++)a.push({title:l().createElement(s.Skeleton,null)});for(r=0;r<t;r++)e.push({cells:a});return e}return n.forEach((function(t){var n,a=t.name,r=t.cloud_provider,i=t.region,o=t.created_at,s=t.status,c=t.owner,u=Z(r),d=Z(i);e.push({cells:[{title:s===b.Od.DEPROVISION||s!==b.Od.READY?a:_e({name:a,row:t})},u,d,c,{title:l().createElement(L,{status:s,instanceName:a})},{title:(n=o,n="string"==typeof n?new Date(n):n,l().createElement(l().Fragment,null,(0,B.Z)(n,new Date)," ",Z("ago")))}],originalData:t})})),e}(),"aria-label":Z("cluster_instance_list"),actionResolver:function(e,t){return function(e,t){var n,r,l;if(!x)return[];var i=e.originalData;if(i.status===b.Od.DEPROVISION)return[];var o,s=i.owner===oe;return s||(o={tooltip:!0,tooltipProps:{position:"left",content:Z("no_permission_to_delete_kafka")},isDisabled:!0,style:{pointerEvents:"auto",cursor:"default"}}),[(n={title:Z("view_details"),id:"view-instance"},n["data-testid"]="tableStreams-actionDetails",n.onClick=function(e){return fe(e,i,"view-instance")},n),(r={title:Z("view_connection_information"),id:"connect-instance"},r["data-testid"]="tableStreams-actionConnection",r.onClick=function(e){return fe(e,i,"connect-instance")},r),(0,a.__assign)((l={title:Z("delete_instance"),id:"delete-instance"},l["data-testid"]="tableStreams-actionDelete",l.onClick=function(e){return s&&fe(e,i,"delete-instance")},l),o)]}(e)},onSort:function(e,t,n,a){var r,l=n;(null===(r=Se())||void 0===r?void 0:r.index)!==t&&"time-created"===a.property&&(l="desc"),G(function(e){switch(e){case 0:return"name";case 1:return"cloud_provider";case 2:return"region";case 3:return"owner";case 4:return"status";case 5:return"created_at";default:return""}}(t)+" "+l)},sortBy:Se(),hasDefaultCustomRowWrapper:!0},activeRow:W,onRowClick:function(e,t,n){var a,r,l=n.originalData,i=null===(a=null==e?void 0:e.target)||void 0===a?void 0:a.type,o=null===(r=null==e?void 0:e.target)||void 0===r?void 0:r.tagName;"button"!==i&&"a"!==(null==o?void 0:o.toLowerCase())&&(c(l),X(null==l?void 0:l.name))},rowDataTestId:"tableStreams-row"}),n.length<1&&x&&l().createElement(k.C0,{emptyStateProps:{variant:s.EmptyStateVariant.full},emptyStateIconProps:{icon:F.ZP},titleProps:{title:Z("no_results_found"),headingLevel:"h2",size:s.TitleSizes.lg},emptyStateBodyProps:{body:Z("adjust_your_filters_and_try_again")}}),T&&T>0&&l().createElement(k.wu,{widgetId:"pagination-options-menu-bottom",itemCount:T,variant:s.PaginationVariant.bottom,page:E,perPage:h,titles:{paginationTitle:Z("full_pagination"),perPageSuffix:Z("per_page_suffix"),toFirstPage:Z("to_first_page"),toPreviousPage:Z("to_previous_page"),toLastPage:Z("to_last_page"),toNextPage:Z("to_next_page"),optionsToggle:Z("options_toggle"),currPage:Z("curr_page")}}),l().createElement(N,{isModalOpen:H,instanceStatus:null==J?void 0:J.status,selectedItemData:J,handleModalToggle:function(){return j(!H)},title:be,confirmButtonProps:{onClick:ge,label:he},textProps:{description:Te}}),l().createElement(C,null))},A=(n(46795),n(83313),n(82420)),G=n.n(A),M=n(56176),K=n.n(M),z=n(20777),Z=n(690),q=(n(96888),n(28764),function(e){var t,n=e.instanceName,i=void 0===n?"":n,c=e.mainToggle,u=(0,o.useTranslation)().t,d=(0,r.useContext)(p.V),m=(0,r.useContext)(_.G).basePath,g=(0,r.useState)(!1),E=g[0],b=g[1],h=(0,r.useState)(!1),T=h[0],x=h[1],S=(0,r.useState)(1),I=(S[0],S[1]),C=(0,r.useState)(),y=C[0],w=C[1],P=(0,r.useState)(!1),V=P[0],L=P[1],N=(0,r.useState)(!1),F=N[0],O=N[1],D=(0,r.useState)(!1),B=D[0],R=D[1],A=(0,r.useState)(!1),G=A[0],M=A[1],K=(0,r.useState)(!1),q=K[0],H=K[1],j=(0,r.useState)("name"),U=j[0],J=j[1],Y=(0,r.useState)(),$=Y[0],W=Y[1],X=(0,r.useState)(!1),Q=X[0],ee=X[1],te=(0,r.useState)("name"),ne=te[0],ae=te[1],re=(0,r.useState)(),le=re[0],ie=re[1],oe=(0,r.useState)(!1),se=oe[0],ce=oe[1],ue=(0,r.useState)(!1),de=ue[0],me=ue[1],pe=(0,r.useState)(!1),fe=pe[0],_e=pe[1],ve=(0,r.useState)("name"),ge=ve[0],Ee=ve[1],be=(0,r.useState)(),he=be[0],Te=be[1],xe=(0,r.useState)(!1),Se=xe[0],Ie=xe[1],Ce=(0,r.useState)(),ye=Ce[0],we=Ce[1],ke=(0,r.useState)(!1),Pe=ke[0],Ve=ke[1],Le=(0,r.useState)(""),Ne=Le[0],Fe=Le[1],Oe=function(e,t){I(e.id)},De=function(e,t){L(!1),O(!1),R(!1),M(!1);var n=t.target,a="radio"===n.type?n.checked:n.value,r=n.name;"radio1-1"===r?L(a):"radio2-1"===r?O(a):"radio3-1"===r?R(a):"radio4-1"===r&&M(a)},Be=function(e,t){ce(!1),me(!1),_e(!1);var n=t.target,a="radio"===n.type?n.checked:n.value,r=n.name;"radio1-4"===r?ce(a):"radio2-4"===r?me(a):"radio3-4"===r&&_e(a)},Re=l().createElement("div",{className:"mk--generate-credential__wizard--text-content"},l().createElement(s.TextContent,{className:"pf-u-mb-lg"},l().createElement(s.Text,{component:s.TextVariants.h2},u("basic_info")),l().createElement(s.Text,{component:s.TextVariants.small},u("generate_credential_step1_title_description"))),l().createElement(s.Form,null,l().createElement(s.FormGroup,{label:u("credential_name_form_label"),fieldId:"simple-form-name",isRequired:!0},l().createElement(s.TextInput,{isRequired:!0,type:"text",id:"simple-form-name",name:"simple-form-name","aria-describedby":"simple-form-name-helper",value:y,onChange:function(e){w(e)},placeholder:u("credential_name_form_input_placeholder")})),l().createElement(s.FormGroup,{label:u("credential_aplication_reason_form_label"),className:"form-group-radio",fieldId:"radio-access-type",isRequired:!0},l().createElement(s.Radio,{isChecked:V,name:"radio1-1",onChange:De,label:u("produce_only"),id:"radio-controlled-1",value:"produce"}),l().createElement(s.Radio,{isChecked:F,name:"radio2-1",onChange:De,label:u("consume_only"),id:"radio-controlled-2",value:"consume"}),l().createElement(s.Radio,{isChecked:B,name:"radio3-1",onChange:De,label:u("produce_and_consume"),id:"radio-controlled-3",value:"produceconsume"}),l().createElement(s.Radio,{isChecked:G,name:"radio4-1",onChange:De,label:u("produce_consume_and_create_topics"),id:"radio-controlled-4",value:"produceconsumecreate"})))),Ae=l().createElement("div",{className:"mk--generate-credential__wizard--text-content"},l().createElement(s.TextContent,{className:"pf-u-mb-lg"},l().createElement(s.Text,{component:s.TextVariants.h2},u("generate_credential_step2_title_description"))),l().createElement(s.Form,null,l().createElement(s.Switch,{id:"simple-switch",label:u("all_topics"),labelOff:u("all_topics"),isChecked:q,onChange:function(e){H(e)}}),q?l().createElement(l().Fragment,null):l().createElement(s.FormGroup,{label:u("specific_topics"),fieldId:"input-access-topics",isRequired:!0},l().createElement(s.Split,{hasGutter:!0,className:"pf-u-align-items-center"},l().createElement(s.SplitItem,null,u("topics_with_the")),l().createElement(s.SplitItem,null,l().createElement(s.FormSelect,{id:"select-access-topics",value:U,onChange:function(e){J(e)}},l().createElement(s.FormSelectOption,{value:"name",label:u("lower_name")}),l().createElement(s.FormSelectOption,{value:"prefix",label:u("lower_prefix")}))),l().createElement(s.SplitItem,{isFilled:!0},l().createElement(s.TextInput,{isRequired:!0,type:"text",id:"input-access-topics",name:"input-access-topics","aria-describedby":"simple-form-name-helper",value:$,onChange:function(e){W(e)},placeholder:u("enter_your_topic")+" "+U}))),l().createElement(s.Popover,{position:"bottom",bodyContent:l().createElement("div",null,u("credential_rule_popover_data"))},l().createElement(s.Button,{variant:"link",icon:l().createElement(z.ZP,null),isInline:!0,className:"pf-u-mt-md"},"Add another rule"))))),Ge=l().createElement("div",{className:"mk--generate-credential__wizard--text-content"},l().createElement(s.TextContent,{className:"pf-u-mb-lg"},l().createElement(s.Text,{component:s.TextVariants.h2},u("generate_credential_step3_title_description"))),l().createElement(s.Form,null,l().createElement(s.Switch,{id:"simple-switch",label:u("all_consumer_groups"),labelOff:u("all_consumer_groups"),isChecked:Q,onChange:function(e){ee(e)}}),Q?l().createElement(l().Fragment,null):l().createElement(s.FormGroup,{label:u("specific_consumer_groups"),fieldId:"input-access-consumers",isRequired:!0},l().createElement(s.Split,{hasGutter:!0,className:"pf-u-align-items-center"},l().createElement(s.SplitItem,null,u("groups_with_the")),l().createElement(s.SplitItem,null,l().createElement(s.FormSelect,{id:"select-access-consumers",value:ne,onChange:function(e){ae(e)}},l().createElement(s.FormSelectOption,{value:"name",label:u("lower_name")}),l().createElement(s.FormSelectOption,{value:"prefix",label:u("lower_prefix")}))),l().createElement(s.SplitItem,{isFilled:!0},l().createElement(s.TextInput,{isRequired:!0,type:"text",id:"input-access-consumers",name:"input-access-consumers",value:le,onChange:function(e){ie(e)},placeholder:u("enter_your_consumer_group")+" "+ne})))))),Me=l().createElement("div",{className:"mk--generate-credential__wizard--text-content"},l().createElement(s.TextContent,{className:"pf-u-mb-lg"},l().createElement(s.Text,{component:s.TextVariants.h2,id:"step4-title"},u("generate_credential_step4_title_description"))),l().createElement(s.Form,null,l().createElement("section",{"aria-labelledby":"step4-title",className:"form-group-radio"},l().createElement("div",{className:"pf-c-form__group-control"},l().createElement(s.Radio,{isChecked:se,name:"radio1-4",onChange:Be,label:u("no_transaction_ids"),id:"radio-controlled-1-4",value:"no"}),l().createElement(s.Radio,{isChecked:de,name:"radio2-4",onChange:Be,label:u("all_transaction_ids"),id:"radio-controlled-2-4",value:"all",className:"pf-u-mb-sm"}),l().createElement(s.Split,{hasGutter:!0,className:"pf-u-align-items-center"},l().createElement(s.SplitItem,null,l().createElement(s.Radio,{isChecked:fe,name:"radio3-4",onChange:Be,label:u("transaction_ids_with_the"),id:"radio-controlled-3-4",value:"filter"})),l().createElement(s.SplitItem,null,l().createElement(s.FormSelect,{id:"select-access-transactions",value:ge,onChange:function(e){Ee(e)}},l().createElement(s.FormSelectOption,{value:"name",label:u("lower_name")}),l().createElement(s.FormSelectOption,{value:"prefix",label:u("lower_prefix")}))),l().createElement(s.SplitItem,{isFilled:!0},l().createElement(s.TextInput,{isRequired:!0,type:"text",id:"input-access-transactions",name:"input-access-transactions",value:he,onChange:function(e){Te(e)},placeholder:u("enter_your_transaction_id")+" "+ge}))))))),Ke=l().createElement(l().Fragment,null,c&&l().createElement(s.Alert,{variant:"danger",isInline:!0,title:"These credentials were not actually generated from this flow as it is part of the mock UI. For now, please turn off the mock UI to generate a service account."}),l().createElement(k.C0,{emptyStateProps:{variant:s.EmptyStateVariant.large},emptyStateIconProps:{icon:Z.ZP},titleProps:{title:u("credential_successfully_generated"),headingLevel:"h4",size:s.TitleSizes.lg},emptyStateBodyProps:{body:u("clientid_empty_state_body")}},l().createElement(s.InputGroup,{className:"pf-u-mt-lg"},l().createElement(s.InputGroupText,{className:"mk--generate-credential__empty-state--input-group"},u("client_id")),l().createElement(s.ClipboardCopy,{isReadOnly:!0,className:"pf-u-w-100","data-testid":"modalCredentials-copyClientID"},c?"srvc-acct-962bc96e-4339-4aee-9505-040d5069c6a5":null==ye?void 0:ye.clientID)),l().createElement(s.InputGroup,{className:"pf-u-mt-md"},l().createElement(s.InputGroupText,{className:"mk--generate-credential__empty-state--input-group"},"Client secret"),l().createElement(s.ClipboardCopy,{isReadOnly:!0,className:"pf-u-w-100","data-testid":"modalCredentials-copyClientSecret"},c?"441cdf77-083c-41d1-9050-c27a3b4247ac":null==ye?void 0:ye.clientSecret)),l().createElement(s.Bullseye,{className:"pf-u-mt-lg"},l().createElement(s.Checkbox,{label:u("client_id_confirmation_checkbox_label"),isChecked:Se,onChange:function(e){Ie(e)},id:"check-1",name:"check1"})),l().createElement(s.Button,{variant:"primary",isDisabled:!Se,onClick:function(){x(!1),b(!E),we(void 0),Ie(!1),I(1)},"data-testid":"modalCredentials-buttonClose"},u("close")))),ze=u("create_service_account");return l().createElement(l().Fragment,null,l().createElement(s.FlexItem,{className:"pf-m-align-right"},l().createElement(s.Button,{variant:"secondary",onClick:function(){c?(x(!0),Ve(!1)):(Ve(!0),Fe(""),we(void 0),(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n,r,l,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,null==d?void 0:d.getToken()];case 1:e=a.sent(),t={name:i},n=new f.M2({accessToken:e,basePath:m}),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,n.createServiceAccount(t).then((function(e){we(null==e?void 0:e.data),Ve(!1),x(!0)}))];case 3:return a.sent(),[3,5];case 4:return r=a.sent(),Ve(!1),l=void 0,(0,v.G)(r)&&(l=null===(o=r.response)||void 0===o?void 0:o.data.reason),Fe(l),[3,5];case 5:return[2]}}))})))},className:"pf-u-ml-md",spinnerAriaValueText:Pe?"Loading":void 0,isLoading:Pe,"data-testid":"drawerStreams-buttonCreateServiceAccount"},u("create_service_account"))),l().createElement(s.Wizard,{title:ze,description:u("create_credential_wizard_description"),steps:(t=[{id:5,name:u("finish"),component:Ke,isFinishedStep:!0}],c&&t.unshift({id:1,name:u("basic_info"),component:Re,nextButtonText:u("next")},{id:2,name:u("topics_access"),component:Ae,nextButtonText:u("next")},{id:3,name:u("consumer_groups_access"),component:Ge,nextButtonText:u("next")},{id:4,name:u("transaction_ids_access"),component:Me,nextButtonText:u("finish")}),t),onNext:Oe,onBack:Oe,onClose:function(){x(!1)},isOpen:T,hideClose:!0}),Ne&&l().createElement(s.FlexItem,{className:"pf-m-grow"},l().createElement(s.Alert,{variant:"danger",isInline:!0,title:Ne})))}),H=function(e){var t=e.mainToggle,n=e.externalServer,a=e.instanceName,r=(0,o.useTranslation)().t;return l().createElement("div",{className:"mas--details__drawer--tab-content"},l().createElement(s.TextContent,{className:"pf-u-pb-sm"},l().createElement(s.Text,{component:s.TextVariants.small},r("drawer_resource_tab_body_description_1")),l().createElement(s.Text,{component:s.TextVariants.h5},r("kafka_listener_and_credentials")),l().createElement(s.Text,{component:s.TextVariants.small},r("drawer_resource_tab_body_description_2")),l().createElement(s.Text,{component:s.TextVariants.p,className:"pf-u-mt-md"},r("bootstrap_server"))),l().createElement(s.Flex,null,l().createElement(s.FlexItem,{className:"pf-m-grow pf-m-spacer-none pf-u-mb-xs"},l().createElement(s.ClipboardCopy,{"data-testid":"drawerStreams-copyBootstrapURL"},n)),l().createElement(q,{instanceName:a,mainToggle:t})),t&&l().createElement(l().Fragment,null,l().createElement(s.TextContent,{className:"pf-u-pb-sm pf-u-pt-lg"},l().createElement(s.Text,{component:s.TextVariants.h5},"Producer endpoint and credentials"),l().createElement(s.Text,{component:s.TextVariants.small},r("drawer_resource_tab_body_description_3"))),l().createElement(s.ClipboardCopy,null,"https://:30123")))},j=n(10141),U=function(){var e=(0,o.useTranslation)().t;return l().createElement(l().Fragment,null,l().createElement("div",{className:"mas--details__drawer--tab-content"},l().createElement(s.TextContent,{className:"pf-u-pb-sm"},l().createElement(s.Text,{component:s.TextVariants.h5},e("sample_connection_code")),l().createElement(s.Text,{component:s.TextVariants.small},e("drawer_code_section_tab_body_description_1"),"<",e("brackets"),">.")),l().createElement("div",{className:"pf-c-code-editor pf-m-read-only"},l().createElement("div",{className:"pf-c-code-editor__header"},l().createElement("div",{className:"pf-c-code-editor__controls"},l().createElement(s.Button,{variant:"control","aria-label":"Action"},l().createElement(j.ZP,null))),l().createElement("div",{className:"pf-c-code-editor__tab"},l().createElement("span",{className:"pf-c-code-editor__tab-text"},"Java"))),l().createElement("div",{className:"pf-c-code-editor__main"},l().createElement("div",{className:"pf-c-code-editor__code"},l().createElement("pre",{className:"pf-c-code-editor__code-pre"},"import java.util.Properties;")))),l().createElement(s.TextContent,{className:"pf-u-pb-sm pf-u-pt-lg"},l().createElement(s.Text,{component:s.TextVariants.h5},e("sample_connection_code")),l().createElement(s.Text,{component:s.TextVariants.small},e("drawer_code_section_tab_body_description_1"),"<",e("brackets"),">.")),l().createElement("div",{className:"pf-c-code-editor pf-m-read-only"},l().createElement("div",{className:"pf-c-code-editor__header"},l().createElement("div",{className:"pf-c-code-editor__controls"},l().createElement(s.Button,{variant:"control","aria-label":"Action"},l().createElement(j.ZP,null)))),l().createElement("div",{className:"pf-c-code-editor__main"},l().createElement("div",{className:"pf-c-code-editor__code"},l().createElement("pre",{className:"pf-c-code-editor__code-pre"},"bootstrap.servers=es-1-4-0-ibm-es-proxy-route-bootstrap-es.apps.2019-4-1-demo-icp-mst.fyre.ibm.com:44 sasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username=“token"))))))},J=function(e){var t=e.onSelect,n=e.externalServer,a=e.instanceName,r=e.mainToggle,i=e.activeKey,c=(0,o.useTranslation)().t;return l().createElement(l().Fragment,null,r?l().createElement("div",{className:"mas--details__drawer--tab-content pf-m-secondary"},l().createElement(s.Tabs,{activeKey:i,isSecondary:!0,onSelect:t},l().createElement(s.Tab,{eventKey:0,title:l().createElement(s.TabTitleText,null,c("resources"))},l().createElement(H,{externalServer:n,instanceName:a,mainToggle:r})),l().createElement(s.Tab,{eventKey:1,title:l().createElement(s.TabTitleText,null,c("sample_code"))},l().createElement(U,null)))):l().createElement(H,{externalServer:n,instanceName:a,mainToggle:r}))},Y=function(e){var t=e.mainToggle,n=e.instanceDetail;G().extend(K());var a=(0,o.useTranslation)().t,r=n||{},i=r.id,c=r.owner,u=r.created_at,d=r.updated_at,m=function(e,t){return l().createElement(l().Fragment,null,t&&l().createElement(l().Fragment,null,l().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},e),l().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},t)))};return l().createElement(l().Fragment,null,l().createElement("div",{className:"mas--details__drawer--tab-content"},t&&l().createElement(s.Grid,{className:"mas--details__drawer--grid"},l().createElement(s.GridItem,{span:6,className:"mas--details__drawer--grid--column-one"},l().createElement(s.Card,{isFlat:!0},l().createElement(s.CardBody,null,l().createElement(s.TextContent,null,l().createElement(s.Text,{component:s.TextVariants.small,className:"pf-u-mb-0"},a("topics")),l().createElement(s.Text,{component:s.TextVariants.h3,className:"pf-u-mt-0"},"10"))))),l().createElement(s.GridItem,{span:6},l().createElement(s.Card,{isFlat:!0},l().createElement(s.CardBody,null,l().createElement(s.TextContent,null,l().createElement(s.Text,{component:s.TextVariants.small,className:"pf-u-mb-0"},a("consumer_groups")),l().createElement(s.Text,{component:s.TextVariants.h3,className:"pf-u-mt-0"},"8")))))),l().createElement(s.TextContent,null,l().createElement(s.TextList,{component:s.TextListVariants.dl},m(a("cloud_provider"),a("amazon_web_services")),m(a("region"),a("us_east_north_virginia")),m(a("id"),i),m(a("owner"),c),m(a("created"),G()(u).format("LLLL")),m(a("updated"),G()(d).format("LLLL"))))))},$=function(e){var t=e.mainToggle,n=e.onClose,a=e.activeTab,i=e.instanceDetail,c=e.isExpanded,u=e.isLoading,d=e.children,m=e["data-ouia-app-id"];G().extend(K());var p=(0,o.useTranslation)().t,f=(i||{}).name,_=(0,r.useState)(0),v=_[0],g=_[1],E=(0,r.useState)(0),b=E[0],h=E[1];(0,r.useEffect)((function(){var e="details"===(null==a?void 0:a.toLowerCase())?0:1;g(e),h(0)}),[a]);var T,x=function(e,t){g(t)},S=function(e,t){h(t)};return l().createElement(k.D5,{isExpanded:c,isLoading:u,onClose:n,panelBodyContent:l().createElement(s.Tabs,{activeKey:v,onSelect:x},l().createElement(s.Tab,{eventKey:0,title:l().createElement(s.TabTitleText,null,p("details"))},l().createElement(Y,{mainToggle:t,instanceDetail:i})),l().createElement(s.Tab,{eventKey:1,title:l().createElement(s.TabTitleText,null,p("connection")),"data-testid":"drawerStreams-tabConnect"},l().createElement(J,{mainToggle:t,activeKey:b,instanceName:f,externalServer:(T=(i||{}).bootstrapServerHost,(null==T?void 0:T.endsWith(":443"))?T:T+":443"),onSelect:S}))),drawerHeaderProps:{text:{label:p("instance_name")},title:{value:f,headingLevel:"h1"}},"data-ouia-app-id":m},d)};function W(){return!document[(e=document,void 0!==e.hidden?"hidden":void 0!==e.msHidden?"msHidden":void 0!==e.webkitHidden?"webkitHidden":"")];var e}function X(){var e=(0,r.useState)(W()),t=e[0],n=e[1],a=function(){return n(W())};return(0,r.useEffect)((function(){var e,t=void 0!==(e=document).hidden?"visibilitychange":void 0!==e.msHidden?"msvisibilitychange":void 0!==e.webkitHidden?"webkitvisibilitychange":"";return document.addEventListener(t,a,!1),function(){document.removeEventListener(t,a)}})),{isVisible:t,setIsVisible:n}}var Q=function(e){var t,n,c,u,d=e.onConnectToInstance,v=e.getConnectToInstancePath,g=(0,r.useContext)(p.V),E=(0,r.useContext)(_.G).basePath,h=X().isVisible,T=(0,i.TH)(),S=new URLSearchParams(T.search),I=parseInt(S.get("page")||"",10)||1,y=parseInt(S.get("perPage")||"",10)||10,w=S.has("user-testing"),P=(0,o.useTranslation)().t,V=(0,m.Z7)().addAlert,L=(0,r.useState)(!1),N=L[0],F=L[1],O=(0,r.useState)(),D=O[0],B=O[1],A=(0,r.useState)({}),G=A[0],M=A[1],K=(0,r.useState)([]),z=K[0],Z=K[1],q=(0,r.useState)(!1),H=q[0],j=q[1],U=(0,r.useState)("created_at desc"),J=U[0],Y=U[1],W=(0,r.useState)(),Q=W[0],ee=W[1],te=(0,r.useState)(0),ne=te[0],ae=te[1],re=(0,r.useState)(0),le=re[0],ie=re[1],oe=(0,r.useState)("name"),se=oe[0],ce=oe[1],ue=(0,r.useState)([]),de=ue[0],me=ue[1],pe=(0,r.useState)(!1),fe=pe[0],_e=pe[1],ve=(l().createRef(),Q||{}),ge=ve.activeTab,Ee=ve.instanceDetail,be=function(e){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,null==g?void 0:g.getToken()];case 1:if(!function(e){return void 0!==e&&""!==e}(t=a.sent())||!h)return[3,7];a.label=2;case 2:return a.trys.push([2,6,,7]),[4,(n=new f.M2({accessToken:t,basePath:E})).listKafkas(null==I?void 0:I.toString(),null==y?void 0:y.toString(),J,(r=[],de.forEach((function(e){var t=e.filterKey,n=e.filterValue;n&&n.length>0&&r.push(n.map((function(e){var n=e.value.trim();return"provisioning"===n?t+" = preparing or "+t+" = provisioning":""!==n?t+" "+(!0===e.isExact?"= "+n:"like %"+n+"%"):""})).join(" or "))})),r.join(" or "))).then((function(e){var t=e.data;M(t),B(t.items),void 0!==(null==G?void 0:G.total)&&G.total>ne&&ae(G.total),j(!0)}))];case 3:return a.sent(),e?[3,5]:[4,n.listKafkas("1","1").then((function(e){ie(e.data.items.length)}))];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return function(e){var t,n,a,r,l;(0,b.G6)(e)&&(r=null===(t=e.response)||void 0===t?void 0:t.data.reason,l=null===(a=null===(n=e.response)||void 0===n?void 0:n.data)||void 0===a?void 0:a.code),l===b.SM.UNAUTHORIZED_USER?_e(!0):V(P("common.something_went_wrong"),s.AlertVariant.danger,r)}(a.sent()),[3,7];case 7:return[2]}var r}))}))};(0,r.useEffect)((function(){j(!1),be(!0)}),[g,I,y,de,J]),(0,r.useEffect)((function(){(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n,r;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,null==g?void 0:g.getToken()];case 1:if(void 0===(e=a.sent())||""===e)return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,new f.M2({accessToken:e,basePath:E}).listCloudProviders().then((function(e){var t=e.data;Z(t.items)}))];case 3:return a.sent(),[3,5];case 4:return t=a.sent(),n=void 0,(0,b.G6)(t)&&(n=null===(r=t.response)||void 0===r?void 0:r.data.reason),V(P("common.something_went_wrong"),s.AlertVariant.danger,n),[3,5];case 5:return[2]}}))})),be(!1)}),[]),n=function(){return be(!0)},c=b.md,u=(0,r.useRef)(),(0,r.useEffect)((function(){u.current=n}),[n]),(0,r.useEffect)((function(){if(null!==c){var e=setTimeout((function(){u.current()}),c);return function(){clearInterval(e)}}}),[n,c]);var he=function(){j(!1),be(!1)};return fe?l().createElement(k.nW,{titleProps:{title:P("access_permissions_needed"),headingLevel:"h2"},emptyStateBodyProps:{body:P("to_access_kafka_instances_contact_your_organization_administrators")}}):l().createElement(l().Fragment,null,l().createElement(m.uZ,null,l().createElement(x,{value:{isModalOpen:N,setIsModalOpen:F,onCreate:function(){ae(G.total+1)},cloudProviders:z,mainToggle:w,refresh:he}},l().createElement($,{mainToggle:w,isExpanded:null!=Q,activeTab:ge,isLoading:void 0===Ee,instanceDetail:Ee,onClose:function(){ee(null)},"data-ouia-app-id":"controlPlane-streams"},l().createElement(s.PageSection,{variant:s.PageSectionVariants.light},l().createElement(s.Level,null,l().createElement(s.LevelItem,null,l().createElement(s.TextContent,null,l().createElement(s.Text,{component:"h1"},P("kafka_instances")))))),void 0===D?l().createElement(s.PageSection,{variant:s.PageSectionVariants.light,padding:{default:"noPadding"}},l().createElement(k.yR,null)):le&&le<1?l().createElement(s.PageSection,null,l().createElement(k.C0,{titleProps:{title:P("no_kafka_instances_yet"),headingLevel:"h2"},emptyStateBodyProps:{body:P("create_a_kafka_instance_to_get_started")},buttonProps:(t={title:P("create_kafka_instance"),onClick:function(){return F(!N)}},t["data-testid"]="emptyStateStreams-buttonCreateKafka",t)}),l().createElement(C,null)):l().createElement(s.PageSection,{className:"mk--main-page__page-section--table",variant:s.PageSectionVariants.light,padding:{default:"noPadding"}},l().createElement(R,{kafkaInstanceItems:D,mainToggle:w,onViewConnection:function(e){ee({instanceDetail:e,activeTab:"Connection"})},onViewInstance:function(e){ee({instanceDetail:e,activeTab:"Details"})},onConnectToInstance:d,getConnectToInstancePath:v,refresh:he,kafkaDataLoaded:H,onDelete:function(){j(!1),ae(G.total-1)},page:I,perPage:y,total:null==G?void 0:G.total,expectedTotal:ne,filteredValue:de,setFilteredValue:me,setFilterSelected:ce,filterSelected:se,orderBy:J,setOrderBy:Y,isDrawerOpen:null!==Q}))))))}}}]);
//# sourceMappingURL=932.03d3ab1a.js.map