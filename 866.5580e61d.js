(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[866],{86153:(e,t,n)=>{"use strict";n.d(t,{i:()=>_});var r=n(70655),a=n(48121),i=n.n(a),l=n(25399),o=n(42603),c=n(9995),s=n(23141),u=n(68908),d=n(75381),m=n(56777),f=n(84564),p=n(13006),v=n(78261),g=n(99229),_=function(e){var t,n,_=e.isOpen,b=e.setIsOpen,h=e.fetchServiceAccounts,S=new u.N,w=(0,a.useState)({fieldState:"default"}),E=w[0],y=w[1],x=(0,a.useState)(""),C=x[0],P=x[1],A=(0,a.useState)(""),T=A[0],V=A[1],I=(0,a.useState)(S),k=I[0],O=I[1],F=(0,a.useState)(!0),B=F[0],D=F[1],G=(0,a.useState)(!1),M=G[0],L=G[1],R=(0,p.useTranslation)().t,Z=(0,a.useContext)(o.V),N=(0,a.useContext)(c.G).basePath,K=(0,g.Z7)().addAlert,q=function(){P(""),V(""),O(S),D(!0)},j=function(e){var t=!0;void 0!==e&&""!==e.trim()||(t=!0,y({fieldState:"default",message:""})),t?"error"===E.fieldState&&y({fieldState:"default",message:""}):y({fieldState:"error",message:R("create_instance_name_invalid_helper_text")}),D(!0),P(e),O((0,r.__assign)((0,r.__assign)({},k),{name:e||""}))},z=function(e){V(e),O((0,r.__assign)((0,r.__assign)({},k),{description:e}))},H=function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e=function(){var e=!0,t=k.name;return t&&""!==t.trim()||(e=!1,y({fieldState:"error",message:R("common.this_is_a_required_field")})),e}(),[4,null==Z?void 0:Z.getToken()];case 1:return t=r.sent(),e?[3,2]:(D(!1),[3,7]);case 2:if(!(0,d.wu)(t))return[3,6];r.label=3;case 3:return r.trys.push([3,5,,6]),n=new s.M2({accessToken:t,basePath:N}),L(!0),[4,n.createServiceAccount(k).then((function(e){e.status>=200&&(q(),b(!1),K(R("serviceAccount.service_account_creation_success_message"),l.AlertVariant.success),h())}))];case 4:return r.sent(),[3,6];case 5:return function(e){var t,n;(0,v.G)(e)&&(n=null===(t=e.response)||void 0===t?void 0:t.data.reason),K(R("something_went_wrong"),l.AlertVariant.danger,n)}(r.sent()),[3,6];case 6:L(!1),r.label=7;case 7:return[2]}}))}))},W=function(e){e.preventDefault(),H()};return i().createElement(m.a,{isModalOpen:_,title:R("create_a_service_account"),handleModalToggle:function(){q(),b(!_)},onCreate:H,isFormValid:B,primaryButtonTitle:"Create",isCreationInProgress:M},(t=E.message,n=E.fieldState,i().createElement(l.Form,{onSubmit:W},!B&&i().createElement(l.FormAlert,null,i().createElement(l.Alert,{variant:"danger",title:R("common.create_instance_invalid_alert"),"aria-live":"polite",isInline:!0})),i().createElement(l.FormGroup,{label:"Name",isRequired:!0,fieldId:"text-input-name",helperTextInvalid:t,helperTextInvalidIcon:t&&i().createElement(f.ZP,null),validated:n},i().createElement(l.TextInput,{isRequired:!0,type:"text",id:"text-input-name",name:"text-input-name",value:C,onChange:j,validated:n})),i().createElement(l.FormGroup,{label:"Description",fieldId:"text-input-description"},i().createElement(l.TextInput,{isRequired:!0,type:"text",id:"text-input-description",name:"text-input-description","aria-label":"Input description",value:T,onChange:z})))))}},89403:(e,t,n)=>{"use strict";n.d(t,{N:()=>p});var r=n(70655),a=n(48121),i=n.n(a),l=n(25399),o=n(42603),c=n(9995),s=n(23141),u=n(75381),d=n(7562),m=n(99229),f=n(13006),p=function(e){var t=e.isOpen,n=e.setIsOpen,p=e.fetchServiceAccounts,v=e.serviceAccountToDelete,g=(0,f.useTranslation)().t,_=(0,a.useContext)(o.V),b=(0,a.useContext)(c.G).basePath,h=(0,m.Z7)().addAlert,S=function(){n(!t)};return i().createElement(d.A,{isModalOpen:t,handleModalToggle:S,title:g("serviceAccount.delete_service_account"),confirmButtonProps:{onClick:function(){return e=v,(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,n,a,i,o,c;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(void 0===(t=null==e?void 0:e.id))throw new Error("service account id not defined");return[4,null==_?void 0:_.getToken()];case 1:if(n=r.sent(),!(0,u.wu)(n))return[3,5];a=new s.M2({accessToken:n,basePath:b}),S(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,a.deleteServiceAccount(t).then((function(e){e.status>=200&&p()}))];case 3:return r.sent(),[3,5];case 4:return i=r.sent(),o=void 0,(0,u.G6)(i)&&(o=null===(c=i.response)||void 0===c?void 0:c.data.reason),h(g("common.something_went_wrong"),l.AlertVariant.danger,o),[3,5];case 5:return[2]}}))}));var e},label:"Delete"}},i().createElement("p",null,i().createElement("b",null,null==v?void 0:v.name)," ",g("serviceAccount.will_be_deleted")))}},65746:(e,t,n)=>{"use strict";n.d(t,{O:()=>f});var r=n(70655),a=n(48121),i=n.n(a),l=n(25399),o=n(42603),c=n(9995),s=n(23141),u=n(75381),d=n(13006),m=n(99229),f=function(e){var t=e.isOpen,n=e.setIsOpen,f=e.serviceAccountToReset,p=(0,d.useTranslation)().t,v=(0,a.useContext)(o.V),g=(0,a.useContext)(c.G).basePath,_=(0,m.Z7)().addAlert,b=i().useState(!1),h=b[0],S=b[1],w=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,a,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return t=null==e?void 0:e.id,[4,null==v?void 0:v.getToken()];case 1:if(a=r.sent(),!(0,u.wu)(a))return[3,5];r.label=2;case 2:return r.trys.push([2,4,,5]),i=new s.M2({accessToken:a,basePath:g}),S(!0),[4,i.resetServiceAccountCreds(t).then((function(e){n(!1),S(!1)}))];case 3:return r.sent(),[3,5];case 4:return function(e){var t,n;(0,u.G6)(e)&&(n=null===(t=e.response)||void 0===t?void 0:t.data.reason),_(p("something_went_wrong"),l.AlertVariant.danger,n)}(r.sent()),S(!1),[3,5];case 5:return[2]}}))}))},E=function(){n(!t)},y=null==f?void 0:f.name;return i().createElement(l.Modal,{id:"reset-service-account-modal",variant:l.ModalVariant.medium,title:p("serviceAccount.reset_service_account_credentials"),isOpen:t,onClose:E,actions:[i().createElement(l.Button,{key:"create",variant:"primary",type:"submit",onClick:function(){return w(f)},spinnerAriaValueText:p("common.submitting_request"),isLoading:h},p("serviceAccount.reset")),i().createElement(l.Button,{key:"cancel",variant:"link",onClick:E},p("common.cancel"))]},i().createElement("span",{dangerouslySetInnerHTML:{__html:p("serviceAccount.client_secret_will_be_reset",{serviceAccountId:y})}}))}},26992:(e,t,n)=>{"use strict";n.d(t,{s:()=>p});var r=n(70655),a=n(48121),i=n.n(a),l=n(13006),o=n(70726),c=n(25399),s=n(48784),u=n(75381),d=n(8755),m=n(71070),f=function(e){var t=e.filterSelected,n=e.setFilterSelected,r=e.total,o=e.page,u=e.perPage,f=e.filteredValue,p=e.setFilteredValue,v=e.handleCreateModal,g=(0,l.useTranslation)().t,_=(0,a.useRef)(),b=(0,a.useRef)(),h=(0,a.useState)(!1),S=h[0],w=h[1],E=(0,a.useState)(!0),y=E[0],x=E[1],C=(0,a.useState)(!0),P=C[0],A=C[1],T=(0,a.useState)(!1),V=T[0],I=(T[1],(0,a.useState)()),k=I[0],O=I[1],F=(0,a.useState)(),B=F[0],D=F[1],G=(0,a.useState)(!1),M=(G[0],G[1],[{label:g("name"),value:"name",disabled:!1},{label:g("owner"),value:"owner",disabled:!1}]),L=function(e){return!e||/^([a-zA-Z0-9-_%]*[a-zA-Z0-9-_%])?$/.test(e.trim())},R=function(e,t,n){var r=Object.assign([],f),a=r.findIndex((function(t){return t.filterKey===e}));if(a>-1){var i=r[a];if(i.filterValue&&i.filterValue.length>0){var l=i.filterValue.findIndex((function(e){return e.value===t.value}));if(l>-1){if(!n)return;i.filterValue.splice(l,1)}else r[a].filterValue.push(t)}else r[a].filterValue=[t]}else r.push({filterKey:e,filterValue:[t]});p(r)},Z=function(e){"name"===e&&k&&""!=k.trim()?L(k)?(R("name",{value:k,isExact:!1},!1),O("")):x(!1):"owner"===e&&B&&""!=B.trim()&&(L(B)?(R("owner",{value:B,isExact:!1},!1),D("")):A(!1))},N=function(e){var t;if("Enter"===e.key&&!V){var n=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.name;Z(n)}},K=function(e){return V?i().createElement("div",null,g("max_filter_message")):i().createElement("div",null,g("input_field_invalid_message",{name:e}))},q=function(e){var t=f.filter((function(t){return t.filterKey===e}));return t.length>0?t[0].filterValue.map((function(e){return e.value})):[]},j=function(e,t,n){var r,a,i=Object.assign([],f),l=i.findIndex((function(t){return t.filterKey===e})),o=Object.assign([],null===(r=i[l])||void 0===r?void 0:r.filterValue),c=t.toString();n&&(null==n?void 0:n.length)>0&&(c=null===(a=null==n?void 0:n.find((function(e){return e.label===t.toString()})))||void 0===a?void 0:a.value);var s=o.findIndex((function(e){return e.value===c}));s>=0&&(i[l].filterValue.splice(s,1),p(i))},z=function(e){var t=Object.assign([],f),n=t.findIndex((function(t){return t.filterKey===e}));n>=0&&(t.splice(n,1),p(t))},H=i().createElement(i().Fragment,null,i().createElement(c.ToolbarGroup,{variant:"filter-group"},i().createElement(c.ToolbarItem,null,i().createElement(c.Select,{variant:c.SelectVariant.single,"aria-label":"Select filter",onToggle:function(){w(!S)},selections:t,isOpen:S,onSelect:function(e,t){w(!S),n(null==t?void 0:t.toString())}},M.map((function(e,t){return i().createElement(c.SelectOption,{isDisabled:e.disabled,key:t,value:e.value},e.label)})))),i().createElement(c.ToolbarFilter,{chips:q("name"),deleteChip:function(e,t){return j("name",t)},deleteChipGroup:function(){return z("name")},categoryName:g("name")},"name"===(null==t?void 0:t.toLowerCase())&&i().createElement(c.ToolbarItem,null,i().createElement(c.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},i().createElement(c.TextInput,{name:"name",id:"name-input",type:"search","aria-label":g("filter_by_name_lower"),validated:!y||V?c.ValidatedOptions.error:c.ValidatedOptions.default,placeholder:g("filter_by_name_lower"),onChange:function(e){O(e),!y&&x(!0)},onKeyPress:N,value:k,ref:_}),i().createElement(c.Button,{variant:c.ButtonVariant.control,isDisabled:!y||V,onClick:function(){return Z("name")},"aria-label":g("filter_by_name_lower")},i().createElement(m.ZP,null)),(!y||V)&&i().createElement(c.Tooltip,{isVisible:V||!y,content:K("name"),reference:_})))),i().createElement(c.ToolbarFilter,{chips:q("owner"),deleteChip:function(e,t){return j("owner",t)},deleteChipGroup:function(){return z("owner")},categoryName:g("owner")},"owner"===(null==t?void 0:t.toLowerCase())&&i().createElement(c.ToolbarItem,null,i().createElement(c.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},i().createElement(c.TextInput,{name:"owner",id:"owner-input",type:"search","aria-label":g("filter_by_owner"),placeholder:g("filter_by_owner"),validated:!P||V?c.ValidatedOptions.error:c.ValidatedOptions.default,onChange:function(e){D(e),!P&&A(!0)},onKeyPress:N,value:B,ref:b}),i().createElement(c.Button,{isDisabled:!P||V,variant:c.ButtonVariant.control,onClick:function(){return Z("owner")},"aria-label":g("filter_by_owner")},i().createElement(m.ZP,null)),(!P||V)&&i().createElement(c.Tooltip,{isVisible:V||!P,content:K("owner"),reference:b})))))),W=[{item:i().createElement(c.Button,{variant:"primary",onClick:v,"data-testid":"tableServiceAccounts-buttonCreateServiceAccount"},g("serviceAccount.create_service_account"))}];return r&&r>0&&1===W.length&&W.push({item:i().createElement(s.wu,{widgetId:"pagination-options-menu-top",itemCount:r,page:o,perPage:u,isCompact:!0,titles:{paginationTitle:g("minimal_pagination"),perPageSuffix:g("per_page_suffix"),toFirstPage:g("to_first_page"),toPreviousPage:g("to_previous_page"),toLastPage:g("to_last_page"),toNextPage:g("to_next_page"),optionsToggle:g("options_toggle"),currPage:g("curr_page")}}),variant:"pagination",alignment:{default:"alignRight"}}),i().createElement(s.L5,{toolbarProps:{id:"instance-toolbar",clearAllFilters:function(){p([])},collapseListedFiltersBreakpoint:"md",inset:{lg:"insetLg"}},toggleGroupProps:{toggleIcon:i().createElement(d.ZP,null),breakpoint:"md"},toggleGroupItems:H,toolbarItems:W})},p=function(e){var t=e.page,n=e.perPage,d=e.expectedTotal,p=e.total,v=e.serviceAccountsDataLoaded,g=e.serviceAccountItems,_=e.onResetCredentials,b=e.onDeleteServiceAccount,h=e.orderBy,S=e.setOrderBy,w=e.filteredValue,E=e.setFilteredValue,y=e.filterSelected,x=e.setFilterSelected,C=e.handleCreateModal,P=(0,l.useTranslation)().t,A=(0,a.useState)(void 0),T=(A[0],A[1],[{title:P("common.name"),transforms:[o.sortable]},{title:P("common.owner"),transforms:[o.sortable,(0,o.cellWidth)(20)]},{title:P("common.description")}]),V=function(e,t,n){var r,a,i,l;"reset-credentials"===n?_&&_(t):"delete-account"===n&&b&&b(t),null===(l=null===(i=null===(a=null===(r=null==e?void 0:e.target)||void 0===r?void 0:r.parentElement)||void 0===a?void 0:a.parentElement)||void 0===i?void 0:i.previousSibling)||void 0===l||l.focus()},I=function(e){switch(e.toLowerCase()){case"name":return 0;case"owner":return 1;case"description":return 2;default:return}};return i().createElement(i().Fragment,null,i().createElement(f,{filterSelected:y,setFilterSelected:x,total:p,page:t,perPage:n,filteredValue:w,setFilteredValue:E,handleCreateModal:C}),i().createElement(s.wR,{tableProps:{cells:T,rows:function(){var e=[],r=(0,u.o8)(t,n,d);if(!v){for(var a=[],l=0;l<T.length;l++)a.push({title:i().createElement(c.Skeleton,null)});for(l=0;l<r;l++)e.push({cells:a});return e}return null==g||g.forEach((function(t){var n=t.name,r=(t.owner,t.description);e.push({cells:[n,"owner-test",r],originalData:t})})),e}(),"aria-label":P("serviceAccount.service_account_list"),actionResolver:function(e,t){return function(e,t){var n,a;if(!v)return[];var i,l=e.originalData;return[(n={title:P("common.reset_credentials"),id:"reset-credentials"},n["data-testid"]="tableServiceAccounts-actionResetCredentials",n.onClick=function(e){return V(e,l,"reset-credentials")},n),(0,r.__assign)((a={title:P("serviceAccount.delete_service_account"),id:"delete-account"},a["data-testid"]="tableServiceAccounts-actionDeleteAccount",a.onClick=function(e){return V(e,l,"delete-account")},a),i)]}(e)},onSort:function(e,t,n,r){S&&S(function(e){switch(e){case 0:return"name";case 1:return"owner";case 2:return"description";default:return""}}(t)+" "+n)},sortBy:function(){var e=(null==h?void 0:h.split(" "))||[];if(e.length>1)return{index:I(e[0]),direction:e[1]===o.SortByDirection.asc?o.SortByDirection.asc:o.SortByDirection.desc}}()}}),g&&(null==g?void 0:g.length)<1&&v&&i().createElement(s.C0,{emptyStateProps:{variant:c.EmptyStateVariant.full},emptyStateIconProps:{icon:m.ZP},titleProps:{title:P("no_results_found"),headingLevel:"h2",size:c.TitleSizes.lg},emptyStateBodyProps:{body:P("no_results_match_the_filter_criteria")}}),p&&p>0&&i().createElement(s.wu,{widgetId:"pagination-options-menu-bottom",itemCount:p,variant:c.PaginationVariant.bottom,page:t,perPage:n,titles:{paginationTitle:P("full_pagination"),perPageSuffix:P("per_page_suffix"),toFirstPage:P("to_first_page"),toPreviousPage:P("to_previous_page"),toLastPage:P("to_last_page"),toNextPage:P("to_next_page"),optionsToggle:P("options_toggle"),currPage:P("curr_page")}}))}}}]);
//# sourceMappingURL=866.5580e61d.js.map