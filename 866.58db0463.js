(self.webpackChunkkas_ui=self.webpackChunkkas_ui||[]).push([[866],{86153:(e,t,n)=>{"use strict";n.d(t,{i:()=>g});var a=n(70655),r=n(48121),i=n.n(r),l=n(25399),o=n(42603),c=n(9995),s=n(23141),u=n(68908),d=n(56777),m=n(84564),f=n(13006),v=n(75381),p=n(99229),_=n(94179),g=function(e){var t=e.isOpen,n=e.setIsOpen,g=e.fetchServiceAccounts,h=new u.N,S=(0,r.useState)({fieldState:"default"}),b=S[0],w=S[1],E=(0,r.useState)({fieldState:"default"}),x=E[0],A=E[1],y=(0,r.useState)(h),C=y[0],P=y[1],I=(0,r.useState)(!0),T=I[0],V=I[1],k=(0,r.useState)(!1),O=k[0],F=k[1],D=(0,r.useState)(),L=D[0],B=D[1],G=(0,r.useState)(!1),N=G[0],M=G[1],R=(0,f.useTranslation)().t,Z=(0,r.useContext)(o.V),z=(0,r.useContext)(c.G).basePath,K=(0,p.Z7)().addAlert,j=function(){w({fieldState:"default"}),A({fieldState:"default"}),P(h),V(!0)};(0,r.useEffect)((function(){"error"!==b.fieldState&&"error"!==x.fieldState&&V(!0)}),[b.fieldState,x.fieldState]);var q,$,H,W,J,Q,U=function(e){P((0,a.__assign)((0,a.__assign)({},C),{name:e}));var t=!0;e&&!/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(e.trim())&&(t=!1),e&&e.length>v.Nw?w({fieldState:"error",message:R("serviceAccount.service_account_name_length_is_greater_than_expected",{maxLength:v.Nw})}):t&&"error"===b.fieldState?w({fieldState:"default",message:""}):t||w({fieldState:"error",message:R("common.input_filed_invalid_helper_text")})},X=function(e){P((0,a.__assign)((0,a.__assign)({},C),{description:e})),e&&e.length>v.lt?A({fieldState:"error",message:R("serviceAccount.service_account_description_length_is_greater_than_expected",{maxLength:v.lt})}):"error"===x.fieldState&&A({fieldState:"default",message:""})},Y=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return function(){var e=!0,t=C.name,n=C.description;return t&&""!==t.trim()?/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(t.trim())||(e=!1,w({fieldState:"error",message:R("serviceAccount.service_account_name_length_is_greater_than_expected")})):(e=!1,w({fieldState:"error",message:R("common.this_is_a_required_field")})),t.length>v.Nw&&(e=!1,w({fieldState:"error",message:R("serviceAccount.service_account_name_length_is_greater_than_expected",{maxLength:v.Nw})})),n&&n.length>v.Nw&&(e=!1,A({fieldState:"error",message:R("serviceAccount.service_account_name_length_is_greater_than_expected",{maxLength:v.lt})})),e}()?[4,null==Z?void 0:Z.getToken()]:(V(!1),[2]);case 1:if(!(e=a.sent()))return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),t=new s.M2({accessToken:e,basePath:z}),F(!0),[4,t.createServiceAccount(C).then((function(e){B(null==e?void 0:e.data),n(!1),M(!0),j(),K(R("serviceAccount.service_account_creation_success_message"),l.AlertVariant.success),g()}))];case 3:return a.sent(),[3,5];case 4:return function(e){var t,n;(0,v.G6)(e)&&(n=null===(t=e.response)||void 0===t?void 0:t.data.reason),K(R("something_went_wrong"),l.AlertVariant.danger,n)}(a.sent()),[3,5];case 5:return F(!1),[2]}}))}))},ee=function(e){e.preventDefault(),Y()};return i().createElement(i().Fragment,null,i().createElement(d.a,{isModalOpen:t,title:R("serviceAccount.create_a_service_account"),handleModalToggle:function(){j(),n(!t)},onCreate:Y,isFormValid:T,primaryButtonTitle:"Create",isCreationInProgress:O},(q=b.message,$=b.fieldState,H=C.name,W=C.description,J=x.message,Q=x.fieldState,i().createElement(l.Form,{onSubmit:ee},!T&&i().createElement(l.FormAlert,null,i().createElement(l.Alert,{variant:"danger",title:R("common.form_invalid_alert"),"aria-live":"polite",isInline:!0})),i().createElement(l.FormGroup,{label:"Name",isRequired:!0,fieldId:"text-input-name",helperTextInvalid:q,helperTextInvalidIcon:q&&i().createElement(m.ZP,null),validated:$},i().createElement(l.TextInput,{isRequired:!0,type:"text",id:"text-input-name",name:"text-input-name",value:H,onChange:U,validated:$})),i().createElement(l.FormGroup,{label:"Description",fieldId:"text-input-description",helperTextInvalid:J,helperTextInvalidIcon:J&&i().createElement(m.ZP,null),validated:Q},i().createElement(l.TextArea,{id:"text-input-description",name:"text-input-description",value:W,onChange:X,validated:Q}))))),i().createElement(_.L,{isOpen:N,setIsOpen:M,credential:L,setCredential:B}))}},89403:(e,t,n)=>{"use strict";n.d(t,{N:()=>v});var a=n(70655),r=n(48121),i=n.n(r),l=n(25399),o=n(42603),c=n(9995),s=n(23141),u=n(75381),d=n(7562),m=n(99229),f=n(13006),v=function(e){var t=e.isOpen,n=e.setIsOpen,v=e.fetchServiceAccounts,p=e.serviceAccountToDelete,_=(0,f.useTranslation)().t,g=(0,r.useContext)(o.V),h=(0,r.useContext)(c.G).basePath,S=(0,m.Z7)().addAlert,b=function(){n(!t)};return i().createElement(d.A,{isModalOpen:t,handleModalToggle:b,title:_("serviceAccount.delete_service_account")+"?",confirmButtonProps:{onClick:function(){return e=p,(0,a.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,i,o,c;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(void 0===(t=null==e?void 0:e.id))throw new Error("service account id not defined");return[4,null==g?void 0:g.getToken()];case 1:if(n=a.sent(),!(0,u.wu)(n))return[3,5];r=new s.M2({accessToken:n,basePath:h}),b(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,r.deleteServiceAccount(t).then((function(e){e.status>=200&&v()}))];case 3:return a.sent(),[3,5];case 4:return i=a.sent(),o=void 0,(0,u.G6)(i)&&(o=null===(c=i.response)||void 0===c?void 0:c.data.reason),S(_("common.something_went_wrong"),l.AlertVariant.danger,o),[3,5];case 5:return[2]}}))}));var e},label:"Delete"}},i().createElement("p",null,i().createElement("b",null,null==p?void 0:p.name)," ",_("serviceAccount.will_be_deleted")))}},65746:(e,t,n)=>{"use strict";n.d(t,{O:()=>v});var a=n(70655),r=n(48121),i=n.n(r),l=n(25399),o=n(42603),c=n(9995),s=n(23141),u=n(75381),d=n(13006),m=n(99229),f=n(94179),v=function(e){var t=e.isOpen,n=e.setIsOpen,v=e.serviceAccountToReset,p=(0,d.useTranslation)().t,_=(0,r.useContext)(o.V),g=(0,r.useContext)(c.G).basePath,h=(0,m.Z7)().addAlert,S=i().useState(!1),b=S[0],w=S[1],E=(0,r.useState)(),x=E[0],A=E[1],y=(0,r.useState)(!1),C=y[0],P=y[1],I=function(e){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var t,r,i;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=null==e?void 0:e.id,[4,null==_?void 0:_.getToken()];case 1:if(r=a.sent(),!(0,u.wu)(r))return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),i=new s.M2({accessToken:r,basePath:g}),w(!0),[4,i.resetServiceAccountCreds(t).then((function(e){A(null==e?void 0:e.data),n(!1),w(!1),P(!0)}))];case 3:return a.sent(),[3,5];case 4:return function(e){var t,n;(0,u.G6)(e)&&(n=null===(t=e.response)||void 0===t?void 0:t.data.reason),h(p("something_went_wrong"),l.AlertVariant.danger,n)}(a.sent()),w(!1),[3,5];case 5:return[2]}}))}))},T=function(){n(!t)},V=null==v?void 0:v.name,k=null==v?void 0:v.clientID;return i().createElement(i().Fragment,null,i().createElement(l.Modal,{id:"reset-service-account-modal",variant:l.ModalVariant.medium,title:p("serviceAccount.reset_service_account_credentials"),isOpen:t,onClose:T,actions:[i().createElement(l.Button,{key:"create",variant:"primary",type:"submit",onClick:function(){return I(v)},spinnerAriaValueText:p("common.submitting_request"),isLoading:b},p("serviceAccount.reset")),i().createElement(l.Button,{key:"cancel",variant:"link",onClick:T},p("common.cancel"))]},i().createElement("span",{dangerouslySetInnerHTML:{__html:p("serviceAccount.client_secret_will_be_reset",{serviceAccountId:V,clientID:k})}})),i().createElement(f.L,{title:"Reset service account credentials",isOpen:C,setIsOpen:P,credential:x,setCredential:A}))}},26992:(e,t,n)=>{"use strict";n.d(t,{s:()=>v});var a=n(70655),r=n(48121),i=n.n(r),l=n(13006),o=n(70726),c=n(25399),s=n(48784),u=n(75381),d=n(8755),m=n(71070),f=function(e){var t=e.filterSelected,n=e.setFilterSelected,a=e.total,o=e.page,u=e.perPage,f=e.filteredValue,v=e.setFilteredValue,p=e.handleCreateModal,_=(0,l.useTranslation)().t,g=(0,r.useRef)(),h=(0,r.useRef)(),S=(0,r.useState)(!1),b=S[0],w=S[1],E=(0,r.useState)(!0),x=E[0],A=E[1],y=(0,r.useState)(!0),C=y[0],P=y[1],I=(0,r.useState)(!1),T=I[0],V=(I[1],(0,r.useState)()),k=V[0],O=V[1],F=(0,r.useState)(),D=F[0],L=F[1],B=(0,r.useState)(!1),G=(B[0],B[1],[{label:_("name"),value:"name",disabled:!1},{label:_("owner"),value:"owner",disabled:!1}]),N=function(e){return!e||/^([a-zA-Z0-9-_%]*[a-zA-Z0-9-_%])?$/.test(e.trim())},M=function(e,t,n){var a=Object.assign([],f),r=a.findIndex((function(t){return t.filterKey===e}));if(r>-1){var i=a[r];if(i.filterValue&&i.filterValue.length>0){var l=i.filterValue.findIndex((function(e){return e.value===t.value}));if(l>-1){if(!n)return;i.filterValue.splice(l,1)}else a[r].filterValue.push(t)}else a[r].filterValue=[t]}else a.push({filterKey:e,filterValue:[t]});v(a)},R=function(e){"name"===e&&k&&""!=k.trim()?N(k)?(M("name",{value:k,isExact:!1},!1),O("")):A(!1):"owner"===e&&D&&""!=D.trim()&&(N(D)?(M("owner",{value:D,isExact:!1},!1),L("")):P(!1))},Z=function(e){var t;if("Enter"===e.key&&!T){var n=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.name;R(n)}},z=function(e){return T?i().createElement("div",null,_("max_filter_message")):i().createElement("div",null,_("input_field_invalid_message",{name:e}))},K=function(e){var t=f.filter((function(t){return t.filterKey===e}));return t.length>0?t[0].filterValue.map((function(e){return e.value})):[]},j=function(e,t,n){var a,r,i=Object.assign([],f),l=i.findIndex((function(t){return t.filterKey===e})),o=Object.assign([],null===(a=i[l])||void 0===a?void 0:a.filterValue),c=t.toString();n&&(null==n?void 0:n.length)>0&&(c=null===(r=null==n?void 0:n.find((function(e){return e.label===t.toString()})))||void 0===r?void 0:r.value);var s=o.findIndex((function(e){return e.value===c}));s>=0&&(i[l].filterValue.splice(s,1),v(i))},q=function(e){var t=Object.assign([],f),n=t.findIndex((function(t){return t.filterKey===e}));n>=0&&(t.splice(n,1),v(t))},$=i().createElement(i().Fragment,null,i().createElement(c.ToolbarGroup,{variant:"filter-group"},i().createElement(c.ToolbarItem,null,i().createElement(c.Select,{variant:c.SelectVariant.single,"aria-label":"Select filter",onToggle:function(){w(!b)},selections:t,isOpen:b,onSelect:function(e,t){w(!b),n(null==t?void 0:t.toString())}},G.map((function(e,t){return i().createElement(c.SelectOption,{isDisabled:e.disabled,key:t,value:e.value},e.label)})))),i().createElement(c.ToolbarFilter,{chips:K("name"),deleteChip:function(e,t){return j("name",t)},deleteChipGroup:function(){return q("name")},categoryName:_("name")},"name"===(null==t?void 0:t.toLowerCase())&&i().createElement(c.ToolbarItem,null,i().createElement(c.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},i().createElement(c.TextInput,{name:"name",id:"name-input",type:"search","aria-label":_("filter_by_name_lower"),validated:!x||T?c.ValidatedOptions.error:c.ValidatedOptions.default,placeholder:_("filter_by_name_lower"),onChange:function(e){O(e),!x&&A(!0)},onKeyPress:Z,value:k,ref:g}),i().createElement(c.Button,{variant:c.ButtonVariant.control,isDisabled:!x||T,onClick:function(){return R("name")},"aria-label":_("filter_by_name_lower")},i().createElement(m.ZP,null)),(!x||T)&&i().createElement(c.Tooltip,{isVisible:T||!x,content:z("name"),reference:g})))),i().createElement(c.ToolbarFilter,{chips:K("owner"),deleteChip:function(e,t){return j("owner",t)},deleteChipGroup:function(){return q("owner")},categoryName:_("owner")},"owner"===(null==t?void 0:t.toLowerCase())&&i().createElement(c.ToolbarItem,null,i().createElement(c.InputGroup,{className:"mk--filter-instances__toolbar--text-input"},i().createElement(c.TextInput,{name:"owner",id:"owner-input",type:"search","aria-label":_("filter_by_owner"),placeholder:_("filter_by_owner"),validated:!C||T?c.ValidatedOptions.error:c.ValidatedOptions.default,onChange:function(e){L(e),!C&&P(!0)},onKeyPress:Z,value:D,ref:h}),i().createElement(c.Button,{isDisabled:!C||T,variant:c.ButtonVariant.control,onClick:function(){return R("owner")},"aria-label":_("filter_by_owner")},i().createElement(m.ZP,null)),(!C||T)&&i().createElement(c.Tooltip,{isVisible:T||!C,content:z("owner"),reference:h})))))),H=[{item:i().createElement(c.Button,{variant:"primary",onClick:p,"data-testid":"tableServiceAccounts-buttonCreateServiceAccount"},_("serviceAccount.create_service_account"))}];return a&&a>0&&1===H.length&&H.push({item:i().createElement(s.wu,{widgetId:"pagination-options-menu-top",itemCount:a,page:o,perPage:u,isCompact:!0,titles:{paginationTitle:_("minimal_pagination"),perPageSuffix:_("per_page_suffix"),toFirstPage:_("to_first_page"),toPreviousPage:_("to_previous_page"),toLastPage:_("to_last_page"),toNextPage:_("to_next_page"),optionsToggle:_("options_toggle"),currPage:_("curr_page")}}),variant:"pagination",alignment:{default:"alignRight"}}),i().createElement(s.L5,{toolbarProps:{id:"instance-toolbar",clearAllFilters:function(){v([])},collapseListedFiltersBreakpoint:"md",inset:{lg:"insetLg"}},toggleGroupProps:{toggleIcon:i().createElement(d.ZP,null),breakpoint:"md"},toggleGroupItems:$,toolbarItems:H})},v=function(e){var t=e.page,n=e.perPage,d=e.expectedTotal,v=e.total,p=e.serviceAccountsDataLoaded,_=e.serviceAccountItems,g=e.onResetCredentials,h=e.onDeleteServiceAccount,S=e.orderBy,b=e.setOrderBy,w=e.filteredValue,E=e.setFilteredValue,x=e.filterSelected,A=e.setFilterSelected,y=e.handleCreateModal,C=(0,l.useTranslation)().t,P=(0,r.useState)(void 0),I=(P[0],P[1],[{title:C("common.name"),transforms:[o.sortable]},{title:C("common.clientID"),transforms:[o.sortable]},{title:C("common.owner"),transforms:[o.sortable,(0,o.cellWidth)(20)]},{title:C("common.description")}]),T=function(e,t,n){var a,r,i,l;"reset-credentials"===n?g&&g(t):"delete-account"===n&&h&&h(t),null===(l=null===(i=null===(r=null===(a=null==e?void 0:e.target)||void 0===a?void 0:a.parentElement)||void 0===r?void 0:r.parentElement)||void 0===i?void 0:i.previousSibling)||void 0===l||l.focus()},V=function(e){switch(e.toLowerCase()){case"name":return 0;case"owner":return 1;case"description":return 2;default:return}};return i().createElement(i().Fragment,null,i().createElement(f,{filterSelected:x,setFilterSelected:A,total:v,page:t,perPage:n,filteredValue:w,setFilteredValue:E,handleCreateModal:y}),i().createElement(s.wR,{tableProps:{cells:I,rows:function(){var e=[],a=(0,u.o8)(t,n,d);if(!p){for(var r=[],l=0;l<I.length;l++)r.push({title:i().createElement(c.Skeleton,null)});for(l=0;l<a;l++)e.push({cells:r});return e}return null==_||_.forEach((function(t){var n=t.name,a=t.owner,r=void 0===a?"owner-test":a,i=t.description,l=t.clientID;e.push({cells:[n,l,r,i],originalData:t})})),e}(),"aria-label":C("serviceAccount.service_account_list"),actionResolver:function(e,t){return function(e,t){var n,r;if(!p)return[];var i,l=e.originalData;return[(n={title:C("common.reset_credentials"),id:"reset-credentials"},n["data-testid"]="tableServiceAccounts-actionResetCredentials",n.onClick=function(e){return T(e,l,"reset-credentials")},n),(0,a.__assign)((r={title:C("serviceAccount.delete_service_account"),id:"delete-account"},r["data-testid"]="tableServiceAccounts-actionDeleteAccount",r.onClick=function(e){return T(e,l,"delete-account")},r),i)]}(e)},onSort:function(e,t,n,a){b&&b(function(e){switch(e){case 0:return"name";case 1:return"owner";case 2:return"description";default:return""}}(t)+" "+n)},sortBy:function(){var e=(null==S?void 0:S.split(" "))||[];if(e.length>1)return{index:V(e[0]),direction:e[1]===o.SortByDirection.asc?o.SortByDirection.asc:o.SortByDirection.desc}}()}}),_&&(null==_?void 0:_.length)<1&&p&&i().createElement(s.C0,{emptyStateProps:{variant:c.EmptyStateVariant.full},emptyStateIconProps:{icon:m.ZP},titleProps:{title:C("no_results_found"),headingLevel:"h2",size:c.TitleSizes.lg},emptyStateBodyProps:{body:C("adjust_your_filters_and_try_again")}}),v&&v>0&&i().createElement(s.wu,{widgetId:"pagination-options-menu-bottom",itemCount:v,variant:c.PaginationVariant.bottom,page:t,perPage:n,titles:{paginationTitle:C("full_pagination"),perPageSuffix:C("per_page_suffix"),toFirstPage:C("to_first_page"),toPreviousPage:C("to_previous_page"),toLastPage:C("to_last_page"),toNextPage:C("to_next_page"),optionsToggle:C("options_toggle"),currPage:C("curr_page")}}))}}}]);
//# sourceMappingURL=866.58db0463.js.map